import{d as he,p as xe,a as _,s as J,f as o,b as E,i as t,c,t as $,q as O,e as r,h as ke,l as ge,g as a,u as S,j as Z,m as Ue,w as Fe,r as Be}from"./render-wDF33Nt9.js";import{i as f}from"./if-bo9VvZzx.js";import{h as pe,Q as He,k as Ke}from"./QuestionForm-C7z_XXb_.js";import{p as B,e as Me,i as Oe}from"./event-modifiers-C_oJkXcz.js";import{h as ce}from"./html-D-buyqeJ.js";import{a as ue}from"./attributes-B-utWOYn.js";import{p as _e,s as Pe,a as Re}from"./props-BFeJQ68M.js";import{r as be}from"./legacy-client-BEOB7oQD.js";import{p as ve,d as Ge}from"./purify.es-CmVf96vk.js";import{_ as Je}from"./lodash-d8dSvcKh.js";import{s as Ne}from"./class-BfJg_ovI.js";import{o as Ve}from"./index-client-B5oBGgzC.js";import{a as We,b as je}from"./input-14QhjNA4.js";import{b as Xe}from"./this-D9aRRuzb.js";import{U as Ye}from"./UserSettingsStore-AGSLL0AW.js";var Ze=o('<div class="col-1 border-start-3 cursor-pointer svelte-1tl7wkh"><p class="badge text-bg-light my-0"> </p></div>'),$e=o('<div class="col-1 border-start-3"><p class="badge text-bg-light my-0"> </p></div>'),et=o('<div class="col-9 cursor-pointer svelte-1tl7wkh"><p class="px-1 my-0 trix-content"><!></p></div>'),tt=o('<div class="col-9"><p class="px-1 my-0 trix-content"><!></p></div>'),st=o('<span title="Percentage of users who chose this answer"> </span>'),at=o('<div class="d-flex justify-content-end align-items-center"><button type="button" class="btn btn-sm p-0"><span class="text-secondary">&cross;</span></button> <div class="vr mx-1"></div> <button type="button" class="btn btn-sm p-0"><span class="text-secondary">&check;</span></button></div>'),nt=o('<span class="text-light fw-bold fs-4">&check;</span>'),rt=o('<span class="text-light fw-bold fs-4">&#8672;</span>'),it=o('<span class="text-light fw-bold fs-4">&cross;</span>'),ot=o('<span class="text-secondary fw-bold fs-4">&check;</span>'),dt=o('<div class="col-1 border-3"></div> <div class="col-9"><p class="p-1 trix-content"><!></p></div>',1),lt=o('<div style="min-height: 3.6rem; box-shadow: 4px 4px rgba(0,0,0,.2);"><!> <!> <div class="col-2"><div class="d-flex align-items-center justify-content-end"><!> <!></div></div></div> <div class="row ms-1 mb-2 me-1"><!></div>',1);function ct(ee,e){xe(e,!0);var s=J(void 0),l=J(void 0),Q=e.answer.badgeText;be(()=>{pe.unbind(`${Q}, ${e.answerNumber}`,"questions"),pe(`${Q}, ${e.answerNumber}`,"questions",function(){e.submitAnswer(e.answer.id)})}),be(()=>{e.answer&&(_(s,""),e.examMode?_(l,""):e.questionIsAnswered?(_(l,""),e.answerContext.isCorrectAnswer?_(s,"border-success"):e.answerContext.isSubmittedAnswer&&_(s,"border-danger")):e.answerContext.isSelectedAnswer&&(_(l,""),_(s,"border-danger")))});var h=lt(),I=E(h);let T;var x=t(I);{var y=b=>{var m=Ze();m.__click=()=>e.submitAnswer(e.answer.id);var q=t(m),M=t(q);$(()=>ge(M,Q)),r(b,m)},D=b=>{var m=$e(),q=t(m),M=t(q);$(()=>ge(M,Q)),r(b,m)};f(x,b=>{!e.questionIsAnswered&&!e.answerContext.isSubmittedAnswer?b(y):b(D,!1)})}var g=c(x,2);{var k=b=>{var m=et();m.__click=()=>e.submitAnswer(e.answer.id);var q=t(m),M=t(q);ce(M,()=>ve.sanitize(e.answer.text)),r(b,m)},C=b=>{var m=tt(),q=t(m),M=t(q);ce(M,()=>ve.sanitize(e.answer.text)),r(b,m)};f(g,b=>{!e.questionIsAnswered&&!e.answerContext.isSelectedAnswer?b(k):b(C,!1)})}var R=c(g,2),v=t(R),u=t(v);{var W=b=>{var m=st();let q;var M=t(m);$(()=>{q=Ne(m,1,"badge",null,q,{"text-dark":!e.answerContext.isSubmittedAnswer&&!e.answerContext.isCorrectAnswer}),ge(M,`${e.answer.answer_percentage??""}%`)}),r(b,m)};f(u,b=>{e.questionIsAnswered&&!e.examMode&&e.settingsShowAnswerStats&&e.answer.answer_percentage!=null&&b(W)})}var X=c(u,2);{var le=b=>{var m=at(),q=t(m),M=S(()=>B(()=>_(l,O(l)==="incorrect"?"":"incorrect",!0)));q.__click=function(...Y){a(M)?.apply(this,Y)};var re=c(q,4),K=S(()=>B(()=>_(l,O(l)==="correct"?"":"correct",!0)));re.__click=function(...Y){a(K)?.apply(this,Y)},r(b,m)},H=b=>{var m=Z(),q=E(m);{var M=K=>{var Y=nt();r(K,Y)},re=K=>{var Y=Z(),Ae=E(Y);{var ye=se=>{var oe=rt();r(se,oe)},fe=se=>{var oe=Z(),Ce=E(oe);{var qe=ae=>{var de=it();r(ae,de)},we=ae=>{var de=Z(),Se=E(de);{var me=i=>{var w=ot();r(i,w)};f(Se,i=>{e.examMode&&e.answerContext.isSubmittedAnswer&&i(me)},!0)}r(ae,de)};f(Ce,ae=>{!e.examMode&&e.answerContext.isSubmittedAnswer?ae(qe):ae(we,!1)},!0)}r(se,oe)};f(Ae,se=>{!e.examMode&&e.answerContext.isCorrectAnswer&&!e.answerContext.isSubmittedAnswer&&e.questionIsAnswered?se(ye):se(fe,!1)},!0)}r(K,Y)};f(q,K=>{!e.examMode&&e.answerContext.isCorrectAnswer&&e.answerContext.isSubmittedAnswer?K(M):K(re,!1)},!0)}r(b,m)};f(X,b=>{!e.questionIsAnswered&&!e.answerContext.isSelectedAnswer?b(le):b(H,!1)})}var j=c(I,2),te=t(j);{var G=b=>{var m=dt(),q=c(E(m),2),M=t(q),re=t(M);ce(re,()=>ve.sanitize(e.answer.hint)),r(b,m)};f(te,b=>{!e.examMode&&e.answer.hint&&(e.questionIsAnswered||e.answerContext.isSelectedAnswer)&&b(G)})}$(()=>{ue(I,"id",`answer${e.answer.id??""}`),T=Ne(I,1,`row border border-3 rounded m-1 py-2 d-flex align-items-center ${O(s)??""}`,"svelte-1tl7wkh",T,{"bg-secondary-subtle":e.examMode||!e.questionIsAnswered&&!e.answerContext.isSelectedAnswer&&!e.answerContext.isSubmittedAnswer||e.questionIsAnswered&&!e.answerContext.isSubmittedAnswer&&!e.answerContext.isCorrectAnswer,"text-dark":e.examMode||!e.questionIsAnswered&&!e.answerContext.isSelectedAnswer&&!e.answerContext.isSubmittedAnswer||e.questionIsAnswered&&!e.answerContext.isSubmittedAnswer&&!e.answerContext.isCorrectAnswer,"text-bg-success":!e.examMode&&e.questionIsAnswered&&e.answerContext.isCorrectAnswer,"text-bg-danger":!e.examMode&&e.answerContext.isSelectedAnswer&&!e.answerContext.isCorrectAnswer,"bg-incorrect":O(l)==="incorrect","bg-correct":O(l)==="correct"})}),r(ee,h),ke()}he(["click"]);var vt=o('<div class="row"><div class="col-md-6 mb-1"><button type="button" class="btn btn-danger btn-sm w-100">&cross; Ask me again</button></div> <div class="col-md-6 mb-1"><button type="button" class="btn btn-success btn-sm w-100">&check; OK</button></div></div>'),ut=o('<div style="box-shadow: 4px 4px rgba(0,0,0,.2);" class="row border-start border-3 rounded bg-secondary-subtle m-1 mb-3 p-2"><p class="p-1"><!></p></div> <!>',1),bt=o('<div class="row"><div class="col-md"><button type="button" class="btn btn-warning btn-sm w-100">Show answer</button></div></div>');function _t(ee,e){xe(e,!0);var s=J(!1);be(()=>{e.hasAnswer?_(s,!0):_(s,!1)});function l(){_(s,!O(s))}var Q=Z(),h=E(Q);{var I=x=>{var y=ut(),D=E(y),g=t(D),k=t(g);ce(k,()=>ve.sanitize(e.answer.text));var C=c(D,2);{var R=v=>{var u=vt(),W=t(u),X=t(W),le=S(()=>B(()=>e.submitAnswer()));X.__click=function(...G){a(le)?.apply(this,G)};var H=c(W,2),j=t(H),te=S(()=>B(()=>e.submitAnswer(e.answer.id)));j.__click=function(...G){a(te)?.apply(this,G)},r(v,u)};f(C,v=>{e.hasAnswer||v(R)})}r(x,y)},T=x=>{var y=bt(),D=t(y),g=t(D),k=S(()=>B(l));g.__click=function(...C){a(k)?.apply(this,C)},r(x,y)};f(h,x=>{O(s)?x(I):x(T,!1)})}r(ee,Q),ke()}he(["click"]);var ft=o('<div class="row"><div class="col-md-6 mb-1"><button type="button" class="btn btn-danger btn-sm w-100">Ask me again</button></div> <div class="col-md-6 mb-1"><button type="button" class="btn btn-success btn-sm w-100">I got it!</button></div></div>');function wt(ee,e){xe(e,!0);var s=Z(),l=E(s);{var Q=h=>{var I=ft(),T=t(I),x=t(T),y=S(()=>B(()=>e.submitAnswer()));x.__click=function(...C){a(y)?.apply(this,C)};var D=c(T,2),g=t(D),k=S(()=>B(()=>e.submitAnswer(-1)));g.__click=function(...C){a(k)?.apply(this,C)},r(h,I)};f(l,h=>{e.hasAnswer||h(Q)})}r(ee,s),ke()}he(["click"]);var mt=o('<div class="col"><div class="card" style="max-width: 18rem; cursor: pointer;"><img class="card-img-top" alt=""/></div></div>'),gt=o('<div class="col-lg"><div class="row row-cols-1 row-cols-sm-3 g-4"></div></div>'),ht=o('<div class="img-fullscreen svelte-1kr8lcu"><p class="bg-white text-end"><button type="button" class="btn-close"></button></p> <div class="text-center"><img class="img-fluid border border-5 border-white" alt=""/></div></div>');function xt(ee,e){xe(e,!0);let s=_e(e,"images",19,()=>[]);var l=J(!1),Q=J(void 0);be(()=>{O(l)?pe.setScope("images"):pe.setScope("questions")}),Ve(()=>{pe("esc","images",function(g,k){O(l)&&_(l,!1)})});var h;function I(g){h&&h.cancel(),h=Ge(()=>{_(l,!O(l)),_(Q,s().find(k=>k.id===g),!0)},100,{maxWait:200}),h()}var T=Z(),x=E(T);{var y=g=>{var k=gt(),C=t(k);Me(C,21,s,R=>R.id,(R,v)=>{var u=mt(),W=t(u),X=t(W);X.__click=()=>I(a(v).id),$(()=>ue(X,"src",`/${a(v).path??""}`)),r(R,u)}),r(g,k)},D=g=>{var k=ht();k.__click=I;var C=t(k),R=t(C),v=S(()=>B(()=>_(l,!O(l))));R.__click=function(...X){a(v)?.apply(this,X)};var u=c(C,2),W=t(u);$(()=>ue(W,"src",`/${O(Q).path??""}`)),r(g,k)};f(x,g=>{O(l)?g(D,!1):g(y)})}r(ee,T),ke()}he(["click"]);var kt=o('<span class="badge text-bg-light"> </span>'),At=o('<input type="text" class="form-control mt-1 mb-3" placeholder="Filter decks ..."/>'),yt=o('<div class="row mb-1"><div class="col-9 text-truncate"><a class="link-dark"> </a></div> <div class="col-3 d-grid gap-4"><button class="btn btn-sm btn-outline-secondary float-end">Remove</button></div></div>'),Ct=o("<hr/>"),qt=o('<div class="row mb-1"><div class="col-9 text-truncate"><a class="link-dark"> </a></div> <div class="col-3 d-grid gap-4"><button class="btn btn-sm btn-primary float-end">Add</button></div></div>'),St=o('<div class="alert alert-light text-center" role="alert">No decks found</div>'),It=o("<!> <!> <!> <!> <!>",1),pt=o('<div class="d-flex justify-content-center"><div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading decks ...</span></div></div>'),Lt=o('<button type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasAddToDeck" aria-controls="offcanvasAddToDeck"><i class="bi bi-collection"></i> Add to deck <!></button> <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasAddToDeck" aria-labelledby="offcanvasAddToDeckLabel"><div class="offcanvas-header"><h5 id="offcanvasAddToDeckLabel">Add question to deck</h5> <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button></div> <div class="offcanvas-body py-0"><div class="row sticky-top bg-white"><div class="col"><div class="alert alert-light"><div class="form-check form-switch"><input class="form-check-input" type="checkbox" role="switch"/> <label class="form-check-label" for="flexSwitchCheckDefault">List only decks of current module or with question added</label></div></div></div></div> <!> <hr/> <div class="row sticky-bottom bg-white pt-3"><div class="col"><p>Create new deck:</p> <div class="mb-2"><input type="text" class="form-control" id="name" name="name" placeholder="My new deck ..."/></div> <button class="btn btn-sm btn-primary mb-3">Create deck and add question</button></div></div></div></div>',1);function Dt(ee,e){xe(e,!0);const s=()=>Re(Ye,"$UserSettings",l),[l,Q]=Pe();let h=_e(e,"questionAddToDeckIncludedCount",15),I=S(()=>s().add_to_deck_current_module_only),T=S(()=>s().last_module_id),x=J(Ue([])),y=J(void 0),D=J(void 0),g=J(""),k=J(void 0),C=J("");Ve(()=>{const i=document.getElementById("offcanvasAddToDeck");i.addEventListener("show.bs.offcanvas",w=>{R()}),i.addEventListener("shown.bs.offcanvas",w=>{le()}),i.addEventListener("hidden.bs.offcanvas",w=>{_(y,void 0),_(D,void 0),_(C,"")})}),Fe(()=>{axios.put("/api/users/me/settings",{add_to_deck_current_module_only:a(I)}).catch(function(i){alert(i)})}),Fe(()=>{a(I)!==void 0&&Be(()=>v())});function R(){axios.get("/api/decks/with_question_ids").then(function(i){_(x,i.data,!0),v()}).catch(function(i){console.log(i),alert(i)})}function v(){if(_(y,[],!0),_(D,[],!0),a(x).length===0)return;a(x).filter(w=>w.questions.some(P=>P.id===e.questionId)?!0:a(I)?w.module_id===a(T):!0).forEach(w=>{w.questions.some(P=>P.id===e.questionId)?_(y,[...a(y),w],!0):_(D,[...a(D),w],!0)}),h(a(y).length)}function u(i){axios.post("/api/decks/"+i+"/addquestion",{question_id:e.questionId}).then(function(w){a(x).find(ie=>ie.id===i).questions.push({id:e.questionId}),v()}).catch(function(w){alert(w)})}function W(i){axios.post("/api/decks/"+i+"/removequestion",{question_id:e.questionId}).then(function(w){const P=a(x).find(ie=>ie.id===i);P.questions=P.questions.filter(ie=>ie.id!==e.questionId),v()}).catch(function(w){alert(w)})}function X(){a(g)&&axios.post("/api/decks",{name:a(g)}).then(function(i){const w=i.data;w.questions=[],a(x).push(w),u(w.id),_(g,"")}).catch(function(i){alert(i)})}function le(){a(k)&&a(k).focus()}let H=S(()=>a(D)?.filter(i=>i.name.toLowerCase().includes(a(C).toLowerCase()))),j=S(()=>a(y)?.filter(i=>i.name.toLowerCase().includes(a(C).toLowerCase())));be(()=>{a(j),le()});var te=Lt(),G=E(te);let b;var m=c(t(G),2);{var q=i=>{var w=kt(),P=t(w);$(()=>ge(P,h())),r(i,w)};f(m,i=>{h()>0&&i(q)})}var M=c(G,2),re=c(t(M),2),K=t(re),Y=t(K),Ae=t(Y),ye=t(Ae),fe=t(ye),se=c(K,2);{var oe=i=>{var w=It(),P=E(w);{var ie=z=>{var N=At();Xe(N,ne=>_(k,ne),()=>a(k)),je(N,()=>a(C),ne=>_(C,ne)),r(z,N)};f(P,z=>{a(y).length+a(D).length>10&&z(ie)})}var Le=c(P,2);Me(Le,17,()=>a(j),Oe,(z,N)=>{var ne=yt(),n=t(ne),d=t(n),p=t(d),A=c(n,2),F=t(A),L=S(()=>B(()=>W(a(N).id)));F.__click=function(...U){a(L)?.apply(this,U)},$(()=>{ue(d,"href",`/decks/${a(N).id??""}`),ge(p,a(N).name)}),r(z,ne)});var Ie=c(Le,2);{var Te=z=>{var N=Ct();r(z,N)};f(Ie,z=>{a(H).length>0&&a(j).length>0&&z(Te)})}var De=c(Ie,2);Me(De,17,()=>a(H),Oe,(z,N)=>{var ne=qt(),n=t(ne),d=t(n),p=t(d),A=c(n,2),F=t(A),L=S(()=>B(()=>u(a(N).id)));F.__click=function(...U){a(L)?.apply(this,U)},$(()=>{ue(d,"href",`/decks/${a(N).id??""}`),ge(p,a(N).name)}),r(z,ne)});var Ee=c(De,2);{var Qe=z=>{var N=St();r(z,N)};f(Ee,z=>{a(H).length===0&&a(j).length===0&&z(Qe)})}r(i,w)},Ce=i=>{var w=pt();r(i,w)};f(se,i=>{a(y)?i(oe):i(Ce,!1)})}var qe=c(se,4),we=t(qe),ae=c(t(we),2),de=t(ae),Se=c(ae,2),me=S(()=>B(()=>X()));Se.__click=function(...i){a(me)?.apply(this,i)},$(()=>b=Ne(G,1,"btn btn-sm",null,b,{"btn-outline-secondary":h()===0,"bg-info-subtle":h()>0,"border-secondary":h()>0})),We(fe,()=>a(I),i=>_(I,i)),je(de,()=>a(g),i=>_(g,i)),r(ee,te),ke(),Q()}he(["click"]);var Mt=o('<div class="my-4 pt-1 pb-1 border-dark" style="border-top: dotted; border-bottom: dotted; border-width: 1px;"><!></div>'),Tt=o('<div class="row"><div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-cone-striped"></i> <strong>Question is marked invalid</strong> and safe to skip!</div></div></div>'),Et=o('<div class="row"><div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-eraser-fill"></i> <strong>Question needs review</strong> - Please review the question and answer choices and make sure they are correct and clear. Afterwards, remove the "Needs review" flag.</div></div></div>'),Qt=o('<div style="box-shadow: 4px 4px rgba(0,0,0,.2);" class="alert alert-secondary" role="alert"><p class="small fw-bold"><i class="bi bi-clipboard2-pulse"></i> CASE</p> <p class="trix-content"><!></p></div>'),zt=o('<div class="col-lg"><p id="questionText" class="trix-content"><!></p></div>'),Nt=o('<div class="row border-start border-3 border-secondary-subtle m-1 mt-3 mb-3"><p><!></p></div>'),Ft=o('<button type="button" class="btn btn-outline-secondary btn-sm mb-3"><i class="bi bi-question-circle"></i> Show hint</button>'),Ot=o('<div class="row"><div class="col"><div class="alert alert-secondary mt-1 trix-content" role="alert"><!></div></div></div>'),jt=o('<li><button type="button" class="dropdown-item btn btn-sm"><i class="bi bi-arrow-counterclockwise"></i> Reset answer</button></li>'),Ut=o('<li><hr class="dropdown-divider"/></li> <li><a class="dropdown-item btn btn-sm" role="button"><i class="bi bi-collection"></i> Open in deck editor</a></li>',1),Vt=o('<div class="mt-3"><button type="button" class="btn btn-outline-secondary btn-sm">&rightarrow; Show answer</button></div>'),Bt=o('<div class="px-2 py-2 border rounded-3 shadow-sm bg-light-subtle" style=""><!> <!> <!> <div class="row border-start border-3 border-dark m-1 mb-3 pt-2"><!> <!></div> <!> <!> <!> <div class="row mt-1 mb-1 pt-2"><div class="d-flex justify-content-end"><div class="btn-group me-1"><button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">More</button> <ul class="dropdown-menu"><!> <li><a class="dropdown-item btn btn-sm" target="_blank" role="button"><i class="bi bi-box-arrow-up-right"></i> Open in new tab</a></li> <li><hr class="dropdown-divider"/></li> <li><button type="button" class="dropdown-item btn btn-sm"><i class="bi bi-pencil"></i> Edit question</button></li> <!></ul></div> <!></div></div> <!></div>'),Ht=o("<p>Loading ...</p>");function rs(ee,e){xe(e,!0);let s=_e(e,"question",15),l=_e(e,"questionContext",15),Q=_e(e,"helpUsed",15),h=_e(e,"examMode",15),I=_e(e,"settingsShowAnswerStats",15);var T=J(!1),x=J(Ue(l().isAnswered));be(()=>{s(),_(x,l().isAnswered,!0),Q(l().isAnswered)}),be(()=>{s(),(()=>{var v=document.querySelectorAll("#questionText li");[].map.call(v,function(u){u.addEventListener("click",y,!1)})})()}),be(()=>{s(),s().answers.forEach((v,u)=>{v.badgeText="ABCDEFGHIJKLMN".charAt(u)}),s()&&s().type==="mc"&&e.settingsShuffleAnswers&&!l().isAnswered&&!Object.values(l().answerContext).some(v=>v.isSelectedAnswer)&&s(s().answers=Je.shuffle(s().answers),!0)});function y(v){const u=v.target;!u.classList.contains("bg-danger-subtle")&&!u.classList.contains("bg-warning-subtle")&&!u.classList.contains("bg-success-subtle")?u.classList.add("bg-success-subtle"):u.classList.contains("bg-success-subtle")?(u.classList.remove("bg-success-subtle"),u.classList.add("bg-danger-subtle")):u.classList.contains("bg-danger-subtle")?(u.classList.remove("bg-danger-subtle"),u.classList.add("bg-warning-subtle")):u.classList.contains("bg-warning-subtle")&&u.classList.remove("bg-warning-subtle")}function D(){const v=!O(T);v?e.updateCurrentQuestionData?e.updateCurrentQuestionData().then(()=>{_(T,v)}):_(T,v):_(T,v)}var g=Z(),k=E(g);{var C=v=>{var u=Z(),W=E(u);{var X=H=>{var j=Mt(),te=t(j);He(te,{toggleEditor:D,get question(){return s()},set question(G){s(G)}}),r(H,j)},le=H=>{var j=Bt(),te=t(j);{var G=n=>{var d=Tt();r(n,d)};f(te,n=>{s().is_invalid&&n(G)})}var b=c(te,2);{var m=n=>{var d=Et();r(n,d)};f(b,n=>{s().needs_review&&n(m)})}var q=c(b,2);{var M=n=>{var d=Qt(),p=c(t(d),2),A=t(p);ce(A,()=>ve.sanitize(s().case.text)),r(n,d)};f(q,n=>{s().case&&n(M)})}var re=c(q,2),K=t(re);{var Y=n=>{var d=zt(),p=t(d),A=t(p);ce(A,()=>ve.sanitize(s().text)),r(n,d)};f(K,n=>{s().text&&n(Y)})}var Ae=c(K,2);{var ye=n=>{xt(n,{get images(){return s().images},set images(d){s(s().images=d,!0)}})};f(Ae,n=>{s().images&&s().images.length>0&&n(ye)})}var fe=c(re,2);{var se=n=>{var d=Z(),p=E(d);{var A=L=>{var U=Nt(),V=t(U),ze=t(V);ce(ze,()=>ve.sanitize(s().hint)),r(L,U)},F=L=>{var U=Ft(),V=S(()=>B(()=>{_(x,!0),Q(!0)}));U.__click=function(...ze){a(V)?.apply(this,ze)},r(L,U)};f(p,L=>{O(x)?L(A):L(F,!1)})}r(n,d)};f(fe,n=>{!h()&&s().hint&&n(se)})}var oe=c(fe,2);{var Ce=n=>{var d=Z(),p=E(d);Me(p,19,()=>s().answers,A=>A.id,(A,F,L)=>{{let U=S(()=>a(L)+1);ct(A,{get submitAnswer(){return e.submitAnswer},get answerNumber(){return a(U)},get answer(){return s().answers[a(L)]},set answer(V){s(s().answers[a(L)]=V,!0)},get answerContext(){return l().answerContext[a(F).id]},set answerContext(V){l(l().answerContext[a(F).id]=V,!0)},get examMode(){return h()},set examMode(V){h(V)},get settingsShowAnswerStats(){return I()},set settingsShowAnswerStats(V){I(V)},get questionIsAnswered(){return l().isAnswered},set questionIsAnswered(V){l(l().isAnswered=V,!0)}})}}),r(n,d)},qe=n=>{var d=Z(),p=E(d);{var A=L=>{{let U=S(()=>!!e.answerChoice);wt(L,{get submitAnswer(){return e.submitAnswer},get hasAnswer(){return a(U)}})}},F=L=>{{let U=S(()=>!!e.answerChoice);_t(L,{get submitAnswer(){return e.submitAnswer},get hasAnswer(){return a(U)},get answer(){return s().answers[0]},set answer(V){s(s().answers[0]=V,!0)}})}};f(p,L=>{s().answers.length===0?L(A):L(F,!1)})}r(n,d)};f(oe,n=>{s().type==="mc"?n(Ce):n(qe,!1)})}var we=c(oe,2);{var ae=n=>{var d=Ot(),p=t(d),A=t(p),F=t(A);ce(F,()=>ve.sanitize(s().comment)),r(n,d)};f(we,n=>{!h()&&l().isAnswered&&s().comment&&n(ae)})}var de=c(we,2),Se=t(de),me=t(Se),i=c(t(me),2),w=t(i);{var P=n=>{var d=jt(),p=t(d),A=S(()=>B(e.deleteAnswer));p.__click=function(...F){a(A)?.apply(this,F)},r(n,d)};f(w,n=>{l().isAnswered&&e.answerChoice!==-1&&n(P)})}var ie=c(w,2),Le=t(ie),Ie=c(ie,4),Te=t(Ie),De=S(()=>B(D));Te.__click=function(...n){a(De)?.apply(this,n)};var Ee=c(Ie,2);{var Qe=n=>{var d=Ut(),p=c(E(d),2),A=t(p);$(()=>ue(A,"href",`/decks/${e.deckId??""}/questions/edit?question_id=${s().id??""}`)),r(n,d)};f(Ee,n=>{e.deckId&&n(Qe)})}var z=c(me,2);Ke(z,()=>s().id,n=>{Dt(n,{get questionId(){return s().id},get questionAddToDeckIncludedCount(){return s().add_to_deck_included_count},set questionAddToDeckIncludedCount(d){s(s().add_to_deck_included_count=d,!0)}})});var N=c(de,2);{var ne=n=>{var d=Vt(),p=t(d),A=S(()=>B(()=>e.submitAnswer()));p.__click=function(...F){a(A)?.apply(this,F)},r(n,d)};f(N,n=>{!l().isAnswered&&!h()&&s().type!=="card"&&n(ne)})}$(()=>{ue(j,"id",`question${s().id??""}`),ue(Le,"href",`/questions/${s().id??""}`)}),r(H,j)};f(W,H=>{O(T)?H(X):H(le,!1)})}r(v,u)},R=v=>{var u=Ht();r(v,u)};f(k,v=>{s()?v(C):v(R,!1)})}r(ee,g),ke()}he(["click"]);export{rs as S};
