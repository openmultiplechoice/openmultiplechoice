import{O as l,w as m,P as w,L as Y,Q as p,R as q,g as P,a as A,T as y,n as B,V as M,W as N,X as U,Y as $,S as z,Z as x,_ as Z,$ as C,a0 as G,a1 as Q,a2 as V,a3 as W}from"./if-BZUX_OG7.js";function L(e,r,t){if(e==null)return r(void 0),l;const n=m(()=>e.subscribe(r,t));return n.unsubscribe?()=>n.unsubscribe():n}const _=[];function H(e,r=l){let t=null;const n=new Set;function s(i){if(w(e,i)&&(e=i,t)){const o=!_.length;for(const u of n)u[1](),_.push(u,e);if(o){for(let u=0;u<_.length;u+=2)_[u][0](_[u+1]);_.length=0}}}function f(i){s(i(e))}function c(i,o=l){const u=[i,o];return n.add(u),n.size===1&&(t=r(s,f)||l),i(e),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:s,update:f,subscribe:c}}function X(e){let r;return L(e,t=>r=t)(),r}let S=!1,O=Symbol();function J(e,r,t){const n=t[r]??={store:null,source:q(void 0),unsubscribe:l};if(n.store!==e&&!(O in t))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=l;else{var s=!0;n.unsubscribe=L(e,f=>{s?n.source.v=f:A(n.source,f)}),s=!1}return e&&O in t?X(e):P(n.source)}function K(){const e={};function r(){Y(()=>{for(var t in e)e[t].unsubscribe();p(e,O,{enumerable:!1,value:!0})})}return[e,r]}function k(e,r,t){return e.set(t),r}function j(e){var r=S;try{return S=!1,[e(),S]}finally{S=r}}function ee(e,r,t,n){var s=(t&W)!==0,f=(t&V)!==0,c=n,i=!0,o=()=>(i&&(i=!1,c=f?m(n):n),c),u;if(s){var R=z in e||x in e;u=y(e,r)?.set??(R&&r in e?a=>e[r]=a:void 0)}var b,E=!1;s?[b,E]=j(()=>e[r]):b=e[r],b===void 0&&n!==void 0&&(b=o(),u&&(C(),u(b)));var d;if(d=()=>{var a=e[r];return a===void 0?o():(i=!0,a)},(t&G)===0)return d;if(u){var D=e.$$legacy;return(function(a,g){return arguments.length>0?((!g||D||E)&&u(g?d():a),a):d()})}var I=!1,v=((t&Q)!==0?U:Z)(()=>(I=!1,d()));s&&P(v);var h=M;return(function(a,g){if(arguments.length>0){const T=g?P(v):s?B(a):a;return A(v,T),I=!0,c!==void 0&&(c=T),a}return $&&I||(h.f&N)!==0?v.v:P(v)})}export{K as a,k as b,ee as p,J as s,H as w};
