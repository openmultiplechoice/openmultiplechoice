import{S as Ae,i as Ce,s as ge,c as d,a as q,f as c,E as he,o as ce,b as h,h as m,n as D,d as k,t as ye,q as Ve,l as Q,p as W,B as Ke,e as de,C as At,M as Ie,j as Ne,m as We,k as _e,y as R,z as ke,x as F,D as ve,r as we,u as Se,v as Le,w as pe,A as qe,O as Tt}from"./index-CW_84yAU.js";import{e as be,u as Ct,d as Ot,o as Kt}from"./each-23V_io8F.js";import{p as J,d as Ht}from"./purify.es-BMHaTOf2.js";import{_ as zt}from"./lodash-DBMh2b1a.js";import{Q as Dt}from"./QuestionForm-Cg9WuGt-.js";const Qe=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Ue(n,e,t,s){n.addEventListener?n.addEventListener(e,t,s):n.attachEvent&&n.attachEvent("on".concat(e),t)}function Me(n,e,t,s){n.removeEventListener?n.removeEventListener(e,t,s):n.detachEvent&&n.detachEvent("on".concat(e),t)}function St(n,e){const t=e.slice(0,e.length-1);for(let s=0;s<t.length;s++)t[s]=n[t[s].toLowerCase()];return t}function Lt(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function It(n,e){const t=n.length>=e.length?n:e,s=n.length>=e.length?e:n;let i=!0;for(let l=0;l<t.length;l++)s.indexOf(t[l])===-1&&(i=!1);return i}const Te={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Qe?173:189,"=":Qe?61:187,";":Qe?59:186,"'":222,"[":219,"]":221,"\\":220},ae={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},De={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},B={16:!1,18:!1,17:!1,91:!1},P={};for(let n=1;n<20;n++)Te["f".concat(n)]=111+n;let j=[],Ee=null,qt="all";const ue=new Map,He=n=>Te[n.toLowerCase()]||ae[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),Nt=n=>Object.keys(Te).find(e=>Te[e]===n),jt=n=>Object.keys(ae).find(e=>ae[e]===n);function Mt(n){qt=n||"all"}function Oe(){return qt||"all"}function Pt(){return j.slice(0)}function Qt(){return j.map(n=>Nt(n)||jt(n)||String.fromCharCode(n))}function Ut(){const n=[];return Object.keys(P).forEach(e=>{P[e].forEach(t=>{let{key:s,scope:i,mods:l,shortcut:r}=t;n.push({scope:i,shortcut:r,mods:l,keys:s.split("+").map(o=>He(o))})})}),n}function Ft(n){const e=n.target||n.srcElement,{tagName:t}=e;let s=!0;const i=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(s=!1),s}function Vt(n){return typeof n=="string"&&(n=He(n)),j.indexOf(n)!==-1}function Bt(n,e){let t,s;n||(n=Oe());for(const i in P)if(Object.prototype.hasOwnProperty.call(P,i))for(t=P[i],s=0;s<t.length;)t[s].scope===n?t.splice(s,1).forEach(r=>{let{element:o}=r;return Be(o)}):s++;Oe()===n&&Mt(e||"all")}function Rt(n){let e=n.keyCode||n.which||n.charCode;const t=j.indexOf(e);if(t>=0&&j.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&j.splice(0,j.length),(e===93||e===224)&&(e=91),e in B){B[e]=!1;for(const s in ae)ae[s]===e&&(le[s]=!1)}}function Et(n){if(typeof n>"u")Object.keys(P).forEach(i=>{Array.isArray(P[i])&&P[i].forEach(l=>ze(l)),delete P[i]}),Be(null);else if(Array.isArray(n))n.forEach(i=>{i.key&&ze(i)});else if(typeof n=="object")n.key&&ze(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];let[i,l]=t;typeof i=="function"&&(l=i,i=""),ze({key:n,scope:i,method:l,splitKey:"+"})}}const ze=n=>{let{key:e,scope:t,method:s,splitKey:i="+"}=n;Lt(e).forEach(r=>{const o=r.split(i),f=o.length,a=o[f-1],u=a==="*"?"*":He(a);if(!P[u])return;t||(t=Oe());const w=f>1?St(ae,o):[],A=[];P[u]=P[u].filter(y=>{const v=(s?y.method===s:!0)&&y.scope===t&&It(y.mods,w);return v&&A.push(y.element),!v}),A.forEach(y=>Be(y))})};function Xe(n,e,t,s){if(e.element!==s)return;let i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(const l in B)Object.prototype.hasOwnProperty.call(B,l)&&(!B[l]&&e.mods.indexOf(+l)>-1||B[l]&&e.mods.indexOf(+l)===-1)&&(i=!1);(e.mods.length===0&&!B[16]&&!B[18]&&!B[17]&&!B[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(j),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}function Ye(n,e){const t=P["*"];let s=n.keyCode||n.which||n.charCode;if(!le.filter.call(this,n))return;if((s===93||s===224)&&(s=91),j.indexOf(s)===-1&&s!==229&&j.push(s),["metaKey","ctrlKey","altKey","shiftKey"].forEach(o=>{const f=De[o];n[o]&&j.indexOf(f)===-1?j.push(f):!n[o]&&j.indexOf(f)>-1?j.splice(j.indexOf(f),1):o==="metaKey"&&n[o]&&(j=j.filter(a=>a in De||a===s))}),s in B){B[s]=!0;for(const o in ae)ae[o]===s&&(le[o]=!0);if(!t)return}for(const o in B)Object.prototype.hasOwnProperty.call(B,o)&&(B[o]=n[De[o]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(j.indexOf(17)===-1&&j.push(17),j.indexOf(18)===-1&&j.push(18),B[17]=!0,B[18]=!0);const i=Oe();if(t)for(let o=0;o<t.length;o++)t[o].scope===i&&(n.type==="keydown"&&t[o].keydown||n.type==="keyup"&&t[o].keyup)&&Xe(n,t[o],i,e);if(!(s in P))return;const l=P[s],r=l.length;for(let o=0;o<r;o++)if((n.type==="keydown"&&l[o].keydown||n.type==="keyup"&&l[o].keyup)&&l[o].key){const f=l[o],{splitKey:a}=f,u=f.key.split(a),w=[];for(let A=0;A<u.length;A++)w.push(He(u[A]));w.sort().join("")===j.sort().join("")&&Xe(n,f,i,e)}}function le(n,e,t){j=[];const s=Lt(n);let i=[],l="all",r=document,o=0,f=!1,a=!0,u="+",w=!1,A=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(l=e.scope),e.element&&(r=e.element),e.keyup&&(f=e.keyup),e.keydown!==void 0&&(a=e.keydown),e.capture!==void 0&&(w=e.capture),typeof e.splitKey=="string"&&(u=e.splitKey),e.single===!0&&(A=!0)),typeof e=="string"&&(l=e),A&&Et(n,l);o<s.length;o++)n=s[o].split(u),i=[],n.length>1&&(i=St(ae,n)),n=n[n.length-1],n=n==="*"?"*":He(n),n in P||(P[n]=[]),P[n].push({keyup:f,keydown:a,scope:l,mods:i,shortcut:s[o],method:t,key:s[o],splitKey:u,element:r});if(typeof r<"u"&&window){if(!ue.has(r)){const y=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return Ye(v,r)},p=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;Ye(v,r),Rt(v)};ue.set(r,{keydownListener:y,keyupListenr:p,capture:w}),Ue(r,"keydown",y,w),Ue(r,"keyup",p,w)}if(!Ee){const y=()=>{j=[]};Ee={listener:y,capture:w},Ue(window,"focus",y,w)}}}function Gt(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(P).forEach(t=>{P[t].filter(i=>i.scope===e&&i.shortcut===n).forEach(i=>{i&&i.method&&i.method()})})}function Be(n){const e=Object.values(P).flat();if(e.findIndex(s=>{let{element:i}=s;return i===n})<0){const{keydownListener:s,keyupListenr:i,capture:l}=ue.get(n)||{};s&&i&&(Me(n,"keyup",i,l),Me(n,"keydown",s,l),ue.delete(n))}if((e.length<=0||ue.size<=0)&&(Object.keys(ue).forEach(i=>{const{keydownListener:l,keyupListenr:r,capture:o}=ue.get(i)||{};l&&r&&(Me(i,"keyup",r,o),Me(i,"keydown",l,o),ue.delete(i))}),ue.clear(),Object.keys(P).forEach(i=>delete P[i]),Ee)){const{listener:i,capture:l}=Ee;Me(window,"focus",i,l),Ee=null}}const Fe={getPressedKeyString:Qt,setScope:Mt,getScope:Oe,deleteScope:Bt,getPressedKeyCodes:Pt,getAllKeyCodes:Ut,isPressed:Vt,filter:Ft,trigger:Gt,unbind:Et,keyMap:Te,modifier:ae,modifierMap:De};for(const n in Fe)Object.prototype.hasOwnProperty.call(Fe,n)&&(le[n]=Fe[n]);if(typeof window<"u"){const n=window.hotkeys;le.noConflict=e=>(e&&window.hotkeys===le&&(window.hotkeys=n),le),window.hotkeys=le}function Jt(n){let e,t;return{c(){e=d("div"),t=d("p"),t.textContent=`${n[8]}`,c(t,"class","badge text-dark my-0"),c(e,"class","col-1 border-start-3")},m(s,i){h(s,e,i),m(e,t)},p:D,d(s){s&&k(e)}}}function Wt(n){let e,t,s,i;return{c(){e=d("div"),t=d("p"),t.textContent=`${n[8]}`,c(t,"class","badge text-dark my-0"),c(e,"class","col-1 border-start-3 cursor-pointer svelte-12xdzqf")},m(l,r){h(l,e,r),m(e,t),s||(i=Q(e,"click",n[10]),s=!0)},p:D,d(l){l&&k(e),s=!1,i()}}}function Xt(n){let e,t,s=J.sanitize(n[0].text)+"";return{c(){e=d("div"),t=d("p"),c(t,"class","px-1 my-0"),c(e,"class","col-9")},m(i,l){h(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=J.sanitize(i[0].text)+"")&&(t.innerHTML=s)},d(i){i&&k(e)}}}function Yt(n){let e,t,s=J.sanitize(n[0].text)+"",i,l;return{c(){e=d("div"),t=d("p"),c(t,"class","px-1 my-0"),c(e,"class","col-9 cursor-pointer svelte-12xdzqf")},m(r,o){h(r,e,o),m(e,t),t.innerHTML=s,i||(l=Q(e,"click",n[11]),i=!0)},p(r,o){o&1&&s!==(s=J.sanitize(r[0].text)+"")&&(t.innerHTML=s)},d(r){r&&k(e),i=!1,l()}}}function Ze(n){let e,t=n[0].answer_percentage+"",s,i;return{c(){e=d("span"),s=ye(t),i=ye("%"),c(e,"class","badge text-muted"),c(e,"title","Percentage of users who chose this answer")},m(l,r){h(l,e,r),m(e,s),m(e,i)},p(l,r){r&1&&t!==(t=l[0].answer_percentage+"")&&Ve(s,t)},d(l){l&&k(e)}}}function Zt(n){let e;return{c(){e=d("span"),e.textContent="✓",c(e,"class","text-secondary fw-bold fs-3")},m(t,s){h(t,e,s)},p:D,d(t){t&&k(e)}}}function xt(n){let e;return{c(){e=d("span"),e.textContent="✗",c(e,"class","text-danger-dark fw-bold fs-3")},m(t,s){h(t,e,s)},p:D,d(t){t&&k(e)}}}function $t(n){let e;return{c(){e=d("span"),e.textContent="⇠",c(e,"class","text-success-dark fw-bold fs-3")},m(t,s){h(t,e,s)},p:D,d(t){t&&k(e)}}}function en(n){let e;return{c(){e=d("span"),e.textContent="✓",c(e,"class","text-success-dark fw-bold fs-3")},m(t,s){h(t,e,s)},p:D,d(t){t&&k(e)}}}function tn(n){let e,t,s,i,l,r,o,f;return{c(){e=d("div"),t=d("button"),t.innerHTML='<span class="text-secondary">✗</span>',s=q(),i=d("div"),l=q(),r=d("button"),r.innerHTML='<span class="text-secondary">✓</span>',c(t,"type","button"),c(t,"class","btn btn-sm p-0"),c(i,"class","vr mx-1"),c(r,"type","button"),c(r,"class","btn btn-sm p-0"),c(e,"class","d-flex justify-content-end align-items-center")},m(a,u){h(a,e,u),m(e,t),m(e,s),m(e,i),m(e,l),m(e,r),o||(f=[Q(t,"click",W(n[12])),Q(r,"click",W(n[13]))],o=!0)},p:D,d(a){a&&k(e),o=!1,Ke(f)}}}function xe(n){let e,t,s,i,l=J.sanitize(n[0].hint)+"";return{c(){e=d("div"),t=q(),s=d("div"),i=d("p"),c(e,"class","col-1 border-3 border-start border-secondary-subtle"),c(i,"class","p-1"),c(s,"class","col-11")},m(r,o){h(r,e,o),h(r,t,o),h(r,s,o),m(s,i),i.innerHTML=l},p(r,o){o&1&&l!==(l=J.sanitize(r[0].hint)+"")&&(i.innerHTML=l)},d(r){r&&(k(e),k(t),k(s))}}}function nn(n){let e,t,s,i,l,r,o,f,a,u,w,A;function y(_,L){return!_[2]&&!_[1].isSubmittedAnswer?Wt:Jt}let p=y(n),v=p(n);function K(_,L){return!_[2]&&!_[1].isSelectedAnswer?Yt:Xt}let H=K(n),T=H(n),O=n[2]&&!n[4]&&n[5]&&n[0].answer_percentage!=null&&Ze(n);function te(_,L){if(!_[2]&&!_[1].isSelectedAnswer)return tn;if(!_[4]&&_[1].isCorrectAnswer&&_[1].isSubmittedAnswer)return en;if(!_[4]&&_[1].isCorrectAnswer&&!_[1].isSubmittedAnswer&&_[2])return $t;if(!_[4]&&_[1].isSubmittedAnswer)return xt;if(_[4]&&_[1].isSubmittedAnswer)return Zt}let z=te(n),g=z&&z(n),E=!n[4]&&n[0].hint&&(n[2]||n[1].isSelectedAnswer)&&xe(n);return{c(){e=d("div"),v.c(),t=q(),T.c(),s=q(),i=d("div"),l=d("div"),r=d("div"),O&&O.c(),o=q(),f=d("div"),g&&g.c(),w=q(),A=d("div"),E&&E.c(),c(r,"class","col"),c(f,"class","col"),c(l,"class","row text-end d-flex align-items-center"),c(i,"class","col-2"),c(e,"id",a="answer"+n[0].id),he(e,"min-height","3rem"),c(e,"class",u="row border-start border-3 m-1 py-2 d-flex align-items-center "+n[6]+" svelte-12xdzqf"),ce(e,"bg-light",n[4]||!n[2]&&!n[1].isSelectedAnswer&&!n[1].isSubmittedAnswer||n[2]&&!n[1].isSubmittedAnswer&&!n[1].isCorrectAnswer),ce(e,"text-bg-success",!n[4]&&n[2]&&n[1].isCorrectAnswer),ce(e,"text-bg-danger",!n[4]&&n[1].isSelectedAnswer&&!n[1].isCorrectAnswer),ce(e,"bg-incorrect",n[7]==="incorrect"),ce(e,"bg-correct",n[7]==="correct"),c(A,"class","row ms-1 mb-2 me-1")},m(_,L){h(_,e,L),v.m(e,null),m(e,t),T.m(e,null),m(e,s),m(e,i),m(i,l),m(l,r),O&&O.m(r,null),m(l,o),m(l,f),g&&g.m(f,null),h(_,w,L),h(_,A,L),E&&E.m(A,null)},p(_,[L]){p===(p=y(_))&&v?v.p(_,L):(v.d(1),v=p(_),v&&(v.c(),v.m(e,t))),H===(H=K(_))&&T?T.p(_,L):(T.d(1),T=H(_),T&&(T.c(),T.m(e,s))),_[2]&&!_[4]&&_[5]&&_[0].answer_percentage!=null?O?O.p(_,L):(O=Ze(_),O.c(),O.m(r,null)):O&&(O.d(1),O=null),z===(z=te(_))&&g?g.p(_,L):(g&&g.d(1),g=z&&z(_),g&&(g.c(),g.m(f,null))),L&1&&a!==(a="answer"+_[0].id)&&c(e,"id",a),L&64&&u!==(u="row border-start border-3 m-1 py-2 d-flex align-items-center "+_[6]+" svelte-12xdzqf")&&c(e,"class",u),L&86&&ce(e,"bg-light",_[4]||!_[2]&&!_[1].isSelectedAnswer&&!_[1].isSubmittedAnswer||_[2]&&!_[1].isSubmittedAnswer&&!_[1].isCorrectAnswer),L&86&&ce(e,"text-bg-success",!_[4]&&_[2]&&_[1].isCorrectAnswer),L&82&&ce(e,"text-bg-danger",!_[4]&&_[1].isSelectedAnswer&&!_[1].isCorrectAnswer),L&192&&ce(e,"bg-incorrect",_[7]==="incorrect"),L&192&&ce(e,"bg-correct",_[7]==="correct"),!_[4]&&_[0].hint&&(_[2]||_[1].isSelectedAnswer)?E?E.p(_,L):(E=xe(_),E.c(),E.m(A,null)):E&&(E.d(1),E=null)},i:D,o:D,d(_){_&&(k(e),k(w),k(A)),v.d(),T.d(),O&&O.d(),g&&g.d(),E&&E.d()}}}function sn(n,e,t){let{answer:s}=e,{answerContext:i}=e,{answerNumber:l}=e,{questionIsAnswered:r}=e,{submitAnswer:o}=e,{examMode:f}=e,{settingsShowAnswerStats:a}=e;var u,w,A=s.badgeText;const y=()=>o(s.id),p=()=>o(s.id),v=()=>t(7,w=w==="incorrect"?"":"incorrect"),K=()=>t(7,w=w==="correct"?"":"correct");return n.$$set=H=>{"answer"in H&&t(0,s=H.answer),"answerContext"in H&&t(1,i=H.answerContext),"answerNumber"in H&&t(9,l=H.answerNumber),"questionIsAnswered"in H&&t(2,r=H.questionIsAnswered),"submitAnswer"in H&&t(3,o=H.submitAnswer),"examMode"in H&&t(4,f=H.examMode),"settingsShowAnswerStats"in H&&t(5,a=H.settingsShowAnswerStats)},n.$$.update=()=>{n.$$.dirty&521&&(le.unbind(`${A}, ${l}`,"questions"),le(`${A}, ${l}`,"questions",function(){o(s.id)})),n.$$.dirty&23&&s&&(t(7,w=""),t(6,u="border-secondary"),f||(r?i.isCorrectAnswer?t(6,u="border-success"):i.isSubmittedAnswer&&t(6,u="border-danger"):i.isSelectedAnswer&&t(6,u="border-danger")))},[s,i,r,o,f,a,u,w,A,l,y,p,v,K]}class ln extends Ae{constructor(e){super(),Ce(this,e,sn,nn,ge,{answer:0,answerContext:1,answerNumber:9,questionIsAnswered:2,submitAnswer:3,examMode:4,settingsShowAnswerStats:5})}}function rn(n){let e,t,s,i,l;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Show answer",c(s,"type","button"),c(s,"class","btn btn-warning btn-sm w-100"),c(t,"class","col-md"),c(e,"class","row")},m(r,o){h(r,e,o),m(e,t),m(t,s),i||(l=Q(s,"click",W(n[4])),i=!0)},p:D,d(r){r&&k(e),i=!1,l()}}}function on(n){let e,t,s=J.sanitize(n[0].text)+"",i,l,r=!n[1]&&$e(n);return{c(){e=d("div"),t=d("p"),i=q(),r&&r.c(),l=de(),c(t,"class","p-1"),c(e,"class","row border-light border-start border-3 m-1 p-2")},m(o,f){h(o,e,f),m(e,t),t.innerHTML=s,h(o,i,f),r&&r.m(o,f),h(o,l,f)},p(o,f){f&1&&s!==(s=J.sanitize(o[0].text)+"")&&(t.innerHTML=s),o[1]?r&&(r.d(1),r=null):r?r.p(o,f):(r=$e(o),r.c(),r.m(l.parentNode,l))},d(o){o&&(k(e),k(i),k(l)),r&&r.d(o)}}}function $e(n){let e,t,s,i,l,r,o,f;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Ask me again",i=q(),l=d("div"),r=d("button"),r.textContent="I got it!",c(s,"type","button"),c(s,"class","btn btn-danger btn-sm w-100"),c(t,"class","col-md-6 mb-1"),c(r,"type","button"),c(r,"class","btn btn-success btn-sm w-100"),c(l,"class","col-md-6 mb-1"),c(e,"class","row")},m(a,u){h(a,e,u),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),o||(f=[Q(s,"click",W(n[5])),Q(r,"click",W(n[6]))],o=!0)},p:D,d(a){a&&k(e),o=!1,Ke(f)}}}function fn(n){let e;function t(l,r){return l[3]?on:rn}let s=t(n),i=s(n);return{c(){i.c(),e=de()},m(l,r){i.m(l,r),h(l,e,r)},p(l,[r]){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:D,o:D,d(l){l&&k(e),i.d(l)}}}function cn(n,e,t){let{answer:s}=e,{hasAnswer:i}=e,{submitAnswer:l}=e;var r=!1;function o(){t(3,r=!r)}const f=()=>l(),a=()=>l(s.id);return n.$$set=u=>{"answer"in u&&t(0,s=u.answer),"hasAnswer"in u&&t(1,i=u.hasAnswer),"submitAnswer"in u&&t(2,l=u.submitAnswer)},n.$$.update=()=>{n.$$.dirty&2&&(i?t(3,r=!0):t(3,r=!1))},[s,i,l,r,o,f,a]}class an extends Ae{constructor(e){super(),Ce(this,e,cn,fn,ge,{answer:0,hasAnswer:1,submitAnswer:2})}}function et(n){let e,t,s,i,l,r,o,f;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Ask me again",i=q(),l=d("div"),r=d("button"),r.textContent="I got it!",c(s,"type","button"),c(s,"class","btn btn-danger btn-sm w-100"),c(t,"class","col-md-6 mb-1"),c(r,"type","button"),c(r,"class","btn btn-success btn-sm w-100"),c(l,"class","col-md-6 mb-1"),c(e,"class","row")},m(a,u){h(a,e,u),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),o||(f=[Q(s,"click",W(n[2])),Q(r,"click",W(n[3]))],o=!0)},p:D,d(a){a&&k(e),o=!1,Ke(f)}}}function un(n){let e,t=!n[0]&&et(n);return{c(){t&&t.c(),e=de()},m(s,i){t&&t.m(s,i),h(s,e,i)},p(s,[i]){s[0]?t&&(t.d(1),t=null):t?t.p(s,i):(t=et(s),t.c(),t.m(e.parentNode,e))},i:D,o:D,d(s){s&&k(e),t&&t.d(s)}}}function dn(n,e,t){let{hasAnswer:s}=e,{submitAnswer:i}=e;const l=()=>i(),r=()=>i(-1);return n.$$set=o=>{"hasAnswer"in o&&t(0,s=o.hasAnswer),"submitAnswer"in o&&t(1,i=o.submitAnswer)},[s,i,l,r]}class mn extends Ae{constructor(e){super(),Ce(this,e,dn,un,ge,{hasAnswer:0,submitAnswer:1})}}function tt(n,e,t){const s=n.slice();return s[7]=e[t],s}function _n(n){let e,t,s,i,l,r,o,f,a;return{c(){e=d("div"),t=d("p"),s=d("button"),i=q(),l=d("div"),r=d("img"),c(s,"type","button"),c(s,"class","btn-close"),c(t,"class","bg-white text-end"),c(r,"class","img-fluid border border-5 border-white"),Ie(r.src,o="/"+n[2].path)||c(r,"src",o),c(r,"alt",""),c(l,"class","text-center"),c(e,"class","img-fullscreen svelte-z0la5k")},m(u,w){h(u,e,w),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),f||(a=[Q(s,"click",W(n[5])),Q(e,"click",n[3])],f=!0)},p(u,w){w&4&&!Ie(r.src,o="/"+u[2].path)&&c(r,"src",o)},d(u){u&&k(e),f=!1,Ke(a)}}}function bn(n){let e,t,s=[],i=new Map,l=be(n[0]);const r=o=>o[7].id;for(let o=0;o<l.length;o+=1){let f=tt(n,l,o),a=r(f);i.set(a,s[o]=nt(a,f))}return{c(){e=d("div"),t=d("div");for(let o=0;o<s.length;o+=1)s[o].c();c(t,"class","row row-cols-1 row-cols-sm-3 g-4"),c(e,"class","col-lg")},m(o,f){h(o,e,f),m(e,t);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(t,null)},p(o,f){f&9&&(l=be(o[0]),s=Ct(s,f,r,1,o,l,i,t,Ot,nt,null,tt))},d(o){o&&k(e);for(let f=0;f<s.length;f+=1)s[f].d()}}}function nt(n,e){let t,s,i,l,r,o,f;function a(){return e[4](e[7])}return{key:n,first:null,c(){t=d("div"),s=d("div"),i=d("img"),r=q(),Ie(i.src,l="/"+e[7].path)||c(i,"src",l),c(i,"class","card-img-top"),c(i,"alt",""),c(s,"class","card"),he(s,"max-width","18rem"),he(s,"cursor","pointer"),c(t,"class","col"),this.first=t},m(u,w){h(u,t,w),m(t,s),m(s,i),m(t,r),o||(f=Q(i,"click",a),o=!0)},p(u,w){e=u,w&1&&!Ie(i.src,l="/"+e[7].path)&&c(i,"src",l)},d(u){u&&k(t),o=!1,f()}}}function wn(n){let e;function t(l,r){return l[1]?_n:bn}let s=t(n),i=s(n);return{c(){i.c(),e=de()},m(l,r){i.m(l,r),h(l,e,r)},p(l,[r]){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:D,o:D,d(l){l&&k(e),i.d(l)}}}function pn(n,e,t){let{images:s=[]}=e;var i=!1,l;At(()=>{le("esc","images",function(u,w){i&&t(1,i=!1)})});var r;function o(u){r&&r.cancel(),r=Ht(()=>{t(1,i=!i),t(2,l=s.find(w=>w.id===u))},100,{maxWait:200}),r()}const f=u=>o(u.id),a=()=>t(1,i=!i);return n.$$set=u=>{"images"in u&&t(0,s=u.images)},n.$$.update=()=>{n.$$.dirty&2&&(i?le.setScope("images"):le.setScope("questions"))},[s,i,l,o,f,a]}class gn extends Ae{constructor(e){super(),Ce(this,e,pn,wn,ge,{images:0})}}function st(n,e,t){const s=n.slice();return s[19]=e[t],s}function it(n,e,t){const s=n.slice();return s[19]=e[t],s}function lt(n){let e,t,s;return{c(){e=d("input"),c(e,"type","text"),c(e,"class","form-control mb-3"),c(e,"placeholder","Filter decks ...")},m(i,l){h(i,e,l),n[11](e),Ne(e,n[2]),t||(s=Q(e,"input",n[12]),t=!0)},p(i,l){l&4&&e.value!==i[2]&&Ne(e,i[2])},d(i){i&&k(e),n[11](null),t=!1,s()}}}function rt(n){let e,t,s,i=n[19].name+"",l,r,o,f,a,u,w;function A(){return n[13](n[19])}return{c(){e=d("div"),t=d("div"),s=d("a"),l=ye(i),o=q(),f=d("div"),a=d("button"),a.textContent="Remove",c(s,"href",r="/decks/"+n[19].id),c(s,"class","link-dark"),c(t,"class","col-9 text-overflow svelte-1gfmo48"),c(a,"class","btn btn-sm btn-outline-secondary float-end"),c(f,"class","col-3 d-grid gap-4"),c(e,"class","row mb-1")},m(y,p){h(y,e,p),m(e,t),m(t,s),m(s,l),m(e,o),m(e,f),m(f,a),u||(w=Q(a,"click",W(A)),u=!0)},p(y,p){n=y,p&8&&i!==(i=n[19].name+"")&&Ve(l,i),p&8&&r!==(r="/decks/"+n[19].id)&&c(s,"href",r)},d(y){y&&k(e),u=!1,w()}}}function ot(n){let e;return{c(){e=d("hr")},m(t,s){h(t,e,s)},d(t){t&&k(e)}}}function ft(n){let e,t,s,i=n[19].name+"",l,r,o,f,a,u,w;function A(){return n[14](n[19])}return{c(){e=d("div"),t=d("div"),s=d("a"),l=ye(i),o=q(),f=d("div"),a=d("button"),a.textContent="Add",c(s,"href",r="/decks/"+n[19].id),c(s,"class","link-dark"),c(t,"class","col-9 text-overflow svelte-1gfmo48"),c(a,"class","btn btn-sm btn-primary float-end"),c(f,"class","col-3 d-grid gap-4"),c(e,"class","row mb-1")},m(y,p){h(y,e,p),m(e,t),m(t,s),m(s,l),m(e,o),m(e,f),m(f,a),u||(w=Q(a,"click",W(A)),u=!0)},p(y,p){n=y,p&64&&i!==(i=n[19].name+"")&&Ve(l,i),p&64&&r!==(r="/decks/"+n[19].id)&&c(s,"href",r)},d(y){y&&k(e),u=!1,w()}}}function ct(n){let e;return{c(){e=d("p"),e.textContent="No decks found."},m(t,s){h(t,e,s)},d(t){t&&k(e)}}}function hn(n){let e,t,s,i,l,r,o,f,a,u,w,A,y,p,v,K,H,T,O,te,z,g,E,_=n[0].length+n[1].length>10&&lt(n),L=be(n[3]),b=[];for(let S=0;S<L.length;S+=1)b[S]=rt(it(n,L,S));let I=n[6].length>0&&n[3].length>0&&ot(),re=be(n[6]),N=[];for(let S=0;S<re.length;S+=1)N[S]=ft(st(n,re,S));let G=n[6].length===0&&n[3].length===0&&ct();return{c(){e=d("button"),e.innerHTML='<i class="bi bi-collection"></i> Add to deck',t=q(),s=d("div"),i=d("div"),i.innerHTML='<h5 id="offcanvasAddToDeckLabel">Add question to deck</h5> <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>',l=q(),r=d("div"),_&&_.c(),o=q();for(let S=0;S<b.length;S+=1)b[S].c();f=q(),I&&I.c(),a=q();for(let S=0;S<N.length;S+=1)N[S].c();u=q(),G&&G.c(),w=q(),A=d("hr"),y=q(),p=d("div"),v=d("div"),K=d("p"),K.textContent="Create new deck:",H=q(),T=d("div"),O=d("input"),te=q(),z=d("button"),z.textContent="Create deck and add question",c(e,"class","btn btn-outline-secondary btn-sm"),c(e,"type","button"),c(e,"data-bs-toggle","offcanvas"),c(e,"data-bs-target","#offcanvasAddToDeck"),c(e,"aria-controls","offcanvasAddToDeck"),c(i,"class","offcanvas-header"),c(O,"type","text"),c(O,"class","form-control"),c(O,"id","name"),c(O,"name","name"),c(O,"placeholder","My new deck ..."),c(T,"class","mb-2"),c(z,"class","btn btn-sm btn-primary mb-3"),c(v,"class","col"),c(p,"class","row sticky-bottom bg-white mt-3"),c(r,"class","offcanvas-body pb-0"),c(s,"class","offcanvas offcanvas-end"),c(s,"tabindex","-1"),c(s,"id","offcanvasAddToDeck"),c(s,"aria-labelledby","offcanvasAddToDeckLabel")},m(S,ne){h(S,e,ne),h(S,t,ne),h(S,s,ne),m(s,i),m(s,l),m(s,r),_&&_.m(r,null),m(r,o);for(let M=0;M<b.length;M+=1)b[M]&&b[M].m(r,null);m(r,f),I&&I.m(r,null),m(r,a);for(let M=0;M<N.length;M+=1)N[M]&&N[M].m(r,null);m(r,u),G&&G.m(r,null),m(r,w),m(r,A),m(r,y),m(r,p),m(p,v),m(v,K),m(v,H),m(v,T),m(T,O),Ne(O,n[4]),m(v,te),m(v,z),g||(E=[Q(O,"input",n[15]),Q(z,"click",W(n[16]))],g=!0)},p(S,[ne]){if(S[0].length+S[1].length>10?_?_.p(S,ne):(_=lt(S),_.c(),_.m(r,o)):_&&(_.d(1),_=null),ne&264){L=be(S[3]);let M;for(M=0;M<L.length;M+=1){const oe=it(S,L,M);b[M]?b[M].p(oe,ne):(b[M]=rt(oe),b[M].c(),b[M].m(r,f))}for(;M<b.length;M+=1)b[M].d(1);b.length=L.length}if(S[6].length>0&&S[3].length>0?I||(I=ot(),I.c(),I.m(r,a)):I&&(I.d(1),I=null),ne&192){re=be(S[6]);let M;for(M=0;M<re.length;M+=1){const oe=st(S,re,M);N[M]?N[M].p(oe,ne):(N[M]=ft(oe),N[M].c(),N[M].m(r,u))}for(;M<N.length;M+=1)N[M].d(1);N.length=re.length}S[6].length===0&&S[3].length===0?G||(G=ct(),G.c(),G.m(r,w)):G&&(G.d(1),G=null),ne&16&&O.value!==S[4]&&Ne(O,S[4])},i:D,o:D,d(S){S&&(k(e),k(t),k(s)),_&&_.d(),We(b,S),I&&I.d(),We(N,S),G&&G.d(),g=!1,Ke(E)}}}function kn(n,e,t){let{questionId:s}=e,i=[],l=[],r="",o,f="",a=[],u=[];At(()=>{const g=document.getElementById("offcanvasAddToDeck");g.addEventListener("show.bs.offcanvas",E=>{w()}),g.addEventListener("shown.bs.offcanvas",E=>{v()}),g.addEventListener("hidden.bs.offcanvas",E=>{t(0,i=[]),t(1,l=[]),t(2,f="")})});function w(){axios.get("/api/decks/withquestionids").then(function(g){var E=g.data;E.forEach(_=>{_.questions.some(L=>L.id===s)?t(0,i=[...i,{id:_.id,name:_.name}]):t(1,l=[...l,{id:_.id,name:_.name}])})}).catch(function(g){console.log(g),alert(g)})}function A(g){axios.post("/api/decks/"+g+"/addquestion",{question_id:s}).then(function(E){const _=l.find(L=>L.id===g);t(0,i=[...i,_]),t(1,l=l.filter(L=>L.id!==g))}).catch(function(E){alert(E)})}function y(g){axios.post("/api/decks/"+g+"/removequestion",{question_id:s}).then(function(E){const _=i.find(L=>L.id===g);t(1,l=[...l,_]),t(0,i=i.filter(L=>L.id!==g))}).catch(function(E){alert(E)})}function p(){r&&axios.post("/api/decks",{name:r}).then(function(g){const E=g.data;t(1,l=[...l,E]),A(E.id),t(4,r="")}).catch(function(g){alert(g)})}function v(){o&&o.focus()}function K(g){_e[g?"unshift":"push"](()=>{o=g,t(5,o)})}function H(){f=this.value,t(2,f)}const T=g=>y(g.id),O=g=>A(g.id);function te(){r=this.value,t(4,r)}const z=()=>p();return n.$$set=g=>{"questionId"in g&&t(10,s=g.questionId)},n.$$.update=()=>{n.$$.dirty&6&&t(6,a=l.filter(g=>g.name.toLowerCase().includes(f.toLowerCase()))),n.$$.dirty&5&&t(3,u=i.filter(g=>g.name.toLowerCase().includes(f.toLowerCase()))),n.$$.dirty&8&&v()},[i,l,f,u,r,o,a,A,y,p,s,K,H,T,O,te,z]}class vn extends Ae{constructor(e){super(),Ce(this,e,kn,hn,ge,{questionId:10})}}function at(n,e,t){const s=n.slice();return s[23]=e[t],s[24]=e,s[25]=t,s}function yn(n){let e;return{c(){e=d("p"),e.textContent="Loading ..."},m(t,s){h(t,e,s)},p:D,i:D,o:D,d(t){t&&k(e)}}}function An(n){let e,t,s,i,l;const r=[Sn,Cn],o=[];function f(u,w){return u[9]?0:1}e=f(n),t=o[e]=r[e](n);let a=!n[1].isAnswered&&!n[3]&&n[0].type!=="card"&&yt(n);return{c(){t.c(),s=q(),a&&a.c(),i=de()},m(u,w){o[e].m(u,w),h(u,s,w),a&&a.m(u,w),h(u,i,w),l=!0},p(u,w){let A=e;e=f(u),e===A?o[e].p(u,w):(ve(),R(o[A],1,1,()=>{o[A]=null}),ke(),t=o[e],t?t.p(u,w):(t=o[e]=r[e](u),t.c()),F(t,1),t.m(s.parentNode,s)),!u[1].isAnswered&&!u[3]&&u[0].type!=="card"?a?a.p(u,w):(a=yt(u),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(u){l||(F(t),l=!0)},o(u){R(t),l=!1},d(u){u&&(k(s),k(i)),o[e].d(u),a&&a.d(u)}}}function Cn(n){let e,t,s,i,l,r,o,f,a,u,w,A,y,p,v,K,H,T,O,te,z,g,E,_,L,b,I,re,N,G,S,ne=n[0].id,M,oe,je,Re,se=n[0].is_invalid&&ut(),ie=n[0].needs_review&&dt(),X=n[0].case&&mt(n),Y=n[0].text&&_t(n),U=n[0].images&&n[0].images.length>0&&bt(n),Z=!n[3]&&n[0].hint&&wt(n);const Ge=[Tn,En,Mn],me=[];function Je(C,V){return C[0].type==="mc"?0:C[0].answers.length===0?1:2}a=Je(n),u=me[a]=Ge[a](n);let x=!n[3]&&n[1].isAnswered&&n[0].comment&&gt(n),$=n[1].isAnswered&&n[6]!==-1&&ht(n),ee=n[5]&&kt(n),fe=vt(n);return{c(){e=d("div"),se&&se.c(),t=q(),ie&&ie.c(),s=q(),X&&X.c(),i=q(),l=d("div"),Y&&Y.c(),r=q(),U&&U.c(),o=q(),Z&&Z.c(),f=q(),u.c(),w=q(),x&&x.c(),A=q(),y=d("div"),p=d("div"),v=d("div"),K=d("button"),K.textContent="More",H=q(),T=d("ul"),$&&$.c(),O=q(),te=d("li"),z=d("a"),g=d("i"),E=ye(" Open in new tab"),L=q(),b=d("li"),b.innerHTML='<hr class="dropdown-divider"/>',I=q(),re=d("li"),N=d("button"),N.innerHTML='<i class="bi bi-pencil"></i> Edit question',G=q(),ee&&ee.c(),S=q(),fe.c(),c(l,"class","row border-start border-3 border-dark m-1 mb-3 pt-2"),c(K,"class","btn btn-outline-secondary btn-sm dropdown-toggle"),c(K,"type","button"),c(K,"data-bs-toggle","dropdown"),c(K,"aria-expanded","false"),c(g,"class","bi bi-box-arrow-up-right"),c(z,"class","dropdown-item btn btn-sm"),c(z,"href",_="/questions/"+n[0].id),c(z,"target","_blank"),c(z,"role","button"),c(N,"type","button"),c(N,"class","dropdown-item btn btn-sm"),c(T,"class","dropdown-menu"),c(v,"class","btn-group me-1"),c(p,"class","d-flex justify-content-end"),c(y,"class","row mt-1 mb-1 pt-2"),c(e,"id",M="question"+n[0].id)},m(C,V){h(C,e,V),se&&se.m(e,null),m(e,t),ie&&ie.m(e,null),m(e,s),X&&X.m(e,null),m(e,i),m(e,l),Y&&Y.m(l,null),m(l,r),U&&U.m(l,null),m(e,o),Z&&Z.m(e,null),m(e,f),me[a].m(e,null),m(e,w),x&&x.m(e,null),m(e,A),m(e,y),m(y,p),m(p,v),m(v,K),m(v,H),m(v,T),$&&$.m(T,null),m(T,O),m(T,te),m(te,z),m(z,g),m(z,E),m(T,L),m(T,b),m(T,I),m(T,re),m(re,N),m(T,G),ee&&ee.m(T,null),m(p,S),fe.m(p,null),oe=!0,je||(Re=Q(N,"click",W(n[11])),je=!0)},p(C,V){C[0].is_invalid?se||(se=ut(),se.c(),se.m(e,t)):se&&(se.d(1),se=null),C[0].needs_review?ie||(ie=dt(),ie.c(),ie.m(e,s)):ie&&(ie.d(1),ie=null),C[0].case?X?X.p(C,V):(X=mt(C),X.c(),X.m(e,i)):X&&(X.d(1),X=null),C[0].text?Y?Y.p(C,V):(Y=_t(C),Y.c(),Y.m(l,r)):Y&&(Y.d(1),Y=null),C[0].images&&C[0].images.length>0?U?(U.p(C,V),V&1&&F(U,1)):(U=bt(C),U.c(),F(U,1),U.m(l,null)):U&&(ve(),R(U,1,1,()=>{U=null}),ke()),!C[3]&&C[0].hint?Z?Z.p(C,V):(Z=wt(C),Z.c(),Z.m(e,f)):Z&&(Z.d(1),Z=null);let Pe=a;a=Je(C),a===Pe?me[a].p(C,V):(ve(),R(me[Pe],1,1,()=>{me[Pe]=null}),ke(),u=me[a],u?u.p(C,V):(u=me[a]=Ge[a](C),u.c()),F(u,1),u.m(e,w)),!C[3]&&C[1].isAnswered&&C[0].comment?x?x.p(C,V):(x=gt(C),x.c(),x.m(e,A)):x&&(x.d(1),x=null),C[1].isAnswered&&C[6]!==-1?$?$.p(C,V):($=ht(C),$.c(),$.m(T,O)):$&&($.d(1),$=null),(!oe||V&1&&_!==(_="/questions/"+C[0].id))&&c(z,"href",_),C[5]?ee?ee.p(C,V):(ee=kt(C),ee.c(),ee.m(T,null)):ee&&(ee.d(1),ee=null),V&1&&ge(ne,ne=C[0].id)?(ve(),R(fe,1,1,D),ke(),fe=vt(C),fe.c(),F(fe,1),fe.m(p,null)):fe.p(C,V),(!oe||V&1&&M!==(M="question"+C[0].id))&&c(e,"id",M)},i(C){oe||(F(U),F(u),F(fe),oe=!0)},o(C){R(U),R(u),R(fe),oe=!1},d(C){C&&k(e),se&&se.d(),ie&&ie.d(),X&&X.d(),Y&&Y.d(),U&&U.d(),Z&&Z.d(),me[a].d(),x&&x.d(),$&&$.d(),ee&&ee.d(),fe.d(C),je=!1,Re()}}}function Sn(n){let e,t,s,i;function l(o){n[14](o)}let r={toggleEditor:n[11]};return n[0]!==void 0&&(r.question=n[0]),t=new Dt({props:r}),_e.push(()=>we(t,"question",l)),{c(){e=d("div"),Se(t.$$.fragment),c(e,"class","my-5 pt-1 pb-3 border-dark"),he(e,"border-top","dotted"),he(e,"border-bottom","dotted"),he(e,"border-width","1px")},m(o,f){h(o,e,f),Le(t,e,null),i=!0},p(o,f){const a={};!s&&f&1&&(s=!0,a.question=o[0],pe(()=>s=!1)),t.$set(a)},i(o){i||(F(t.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),i=!1},d(o){o&&k(e),qe(t)}}}function ut(n){let e;return{c(){e=d("div"),e.innerHTML='<div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-cone-striped"></i> <strong>Question is marked invalid</strong> and safe to skip!</div></div>',c(e,"class","row")},m(t,s){h(t,e,s)},d(t){t&&k(e)}}}function dt(n){let e;return{c(){e=d("div"),e.innerHTML='<div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-eraser-fill"></i> <strong>Question needs review</strong> - Please review the question and answer choices and make sure they are correct and clear. Afterwards, remove the &quot;Needs review&quot; flag.</div></div>',c(e,"class","row")},m(t,s){h(t,e,s)},d(t){t&&k(e)}}}function mt(n){let e,t,s,i,l=J.sanitize(n[0].case.text)+"";return{c(){e=d("div"),t=d("p"),t.innerHTML='<i class="bi bi-clipboard2-pulse"></i> CASE',s=q(),i=d("p"),c(t,"class","small fw-bold"),c(e,"class","alert alert-light"),c(e,"role","alert")},m(r,o){h(r,e,o),m(e,t),m(e,s),m(e,i),i.innerHTML=l},p(r,o){o&1&&l!==(l=J.sanitize(r[0].case.text)+"")&&(i.innerHTML=l)},d(r){r&&k(e)}}}function _t(n){let e,t,s=J.sanitize(n[0].text)+"";return{c(){e=d("div"),t=d("p"),c(t,"id","questionText"),c(e,"class","col-lg")},m(i,l){h(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=J.sanitize(i[0].text)+"")&&(t.innerHTML=s)},d(i){i&&k(e)}}}function bt(n){let e,t,s;function i(r){n[15](r)}let l={};return n[0].images!==void 0&&(l.images=n[0].images),e=new gn({props:l}),_e.push(()=>we(e,"images",i)),{c(){Se(e.$$.fragment)},m(r,o){Le(e,r,o),s=!0},p(r,o){const f={};!t&&o&1&&(t=!0,f.images=r[0].images,pe(()=>t=!1)),e.$set(f)},i(r){s||(F(e.$$.fragment,r),s=!0)},o(r){R(e.$$.fragment,r),s=!1},d(r){qe(e,r)}}}function wt(n){let e;function t(l,r){return l[10]?qn:Ln}let s=t(n),i=s(n);return{c(){i.c(),e=de()},m(l,r){i.m(l,r),h(l,e,r)},p(l,r){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){l&&k(e),i.d(l)}}}function Ln(n){let e,t,s;return{c(){e=d("button"),e.innerHTML='<i class="bi bi-question"></i> Show hint',c(e,"type","button"),c(e,"class","btn btn-outline-secondary btn-sm mb-3")},m(i,l){h(i,e,l),t||(s=Q(e,"click",W(n[16])),t=!0)},p:D,d(i){i&&k(e),t=!1,s()}}}function qn(n){let e,t,s=J.sanitize(n[0].hint)+"";return{c(){e=d("div"),t=d("p"),c(e,"class","row border-start border-3 border-secondary-subtle m-1 mt-3 mb-3")},m(i,l){h(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=J.sanitize(i[0].hint)+"")&&(t.innerHTML=s)},d(i){i&&k(e)}}}function Mn(n){let e,t,s;function i(r){n[21](r)}let l={submitAnswer:n[7],hasAnswer:!!n[6]};return n[0].answers[0]!==void 0&&(l.answer=n[0].answers[0]),e=new an({props:l}),_e.push(()=>we(e,"answer",i)),{c(){Se(e.$$.fragment)},m(r,o){Le(e,r,o),s=!0},p(r,o){const f={};o&128&&(f.submitAnswer=r[7]),o&64&&(f.hasAnswer=!!r[6]),!t&&o&1&&(t=!0,f.answer=r[0].answers[0],pe(()=>t=!1)),e.$set(f)},i(r){s||(F(e.$$.fragment,r),s=!0)},o(r){R(e.$$.fragment,r),s=!1},d(r){qe(e,r)}}}function En(n){let e,t;return e=new mn({props:{submitAnswer:n[7],hasAnswer:!!n[6]}}),{c(){Se(e.$$.fragment)},m(s,i){Le(e,s,i),t=!0},p(s,i){const l={};i&128&&(l.submitAnswer=s[7]),i&64&&(l.hasAnswer=!!s[6]),e.$set(l)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){qe(e,s)}}}function Tn(n){let e=[],t=new Map,s,i,l=be(n[0].answers);const r=o=>o[23].id;for(let o=0;o<l.length;o+=1){let f=at(n,l,o),a=r(f);t.set(a,e[o]=pt(a,f))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();s=de()},m(o,f){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,f);h(o,s,f),i=!0},p(o,f){f&155&&(l=be(o[0].answers),ve(),e=Ct(e,f,r,1,o,l,t,s.parentNode,Kt,pt,s,at),ke())},i(o){if(!i){for(let f=0;f<l.length;f+=1)F(e[f]);i=!0}},o(o){for(let f=0;f<e.length;f+=1)R(e[f]);i=!1},d(o){o&&k(s);for(let f=0;f<e.length;f+=1)e[f].d(o)}}}function pt(n,e){let t,s,i,l,r,o,f;function a(p){e[17](p,e[23],e[24],e[25])}function u(p){e[18](p,e[23])}function w(p){e[19](p)}function A(p){e[20](p)}let y={submitAnswer:e[7],questionIsAnswered:e[1].isAnswered,answerNumber:e[25]+1};return e[23]!==void 0&&(y.answer=e[23]),e[1].answerContext[e[23].id]!==void 0&&(y.answerContext=e[1].answerContext[e[23].id]),e[3]!==void 0&&(y.examMode=e[3]),e[4]!==void 0&&(y.settingsShowAnswerStats=e[4]),s=new ln({props:y}),_e.push(()=>we(s,"answer",a)),_e.push(()=>we(s,"answerContext",u)),_e.push(()=>we(s,"examMode",w)),_e.push(()=>we(s,"settingsShowAnswerStats",A)),{key:n,first:null,c(){t=de(),Se(s.$$.fragment),this.first=t},m(p,v){h(p,t,v),Le(s,p,v),f=!0},p(p,v){e=p;const K={};v&128&&(K.submitAnswer=e[7]),v&2&&(K.questionIsAnswered=e[1].isAnswered),v&1&&(K.answerNumber=e[25]+1),!i&&v&1&&(i=!0,K.answer=e[23],pe(()=>i=!1)),!l&&v&3&&(l=!0,K.answerContext=e[1].answerContext[e[23].id],pe(()=>l=!1)),!r&&v&8&&(r=!0,K.examMode=e[3],pe(()=>r=!1)),!o&&v&16&&(o=!0,K.settingsShowAnswerStats=e[4],pe(()=>o=!1)),s.$set(K)},i(p){f||(F(s.$$.fragment,p),f=!0)},o(p){R(s.$$.fragment,p),f=!1},d(p){p&&k(t),qe(s,p)}}}function gt(n){let e,t,s,i=J.sanitize(n[0].comment)+"";return{c(){e=d("div"),t=d("div"),s=d("div"),c(s,"class","alert alert-light"),c(s,"role","alert"),c(t,"class","col"),c(e,"class","row")},m(l,r){h(l,e,r),m(e,t),m(t,s),s.innerHTML=i},p(l,r){r&1&&i!==(i=J.sanitize(l[0].comment)+"")&&(s.innerHTML=i)},d(l){l&&k(e)}}}function ht(n){let e,t,s,i;return{c(){e=d("li"),t=d("button"),t.innerHTML='<i class="bi bi-arrow-counterclockwise"></i> Reset answer',c(t,"type","button"),c(t,"class","dropdown-item btn btn-sm")},m(l,r){h(l,e,r),m(e,t),s||(i=Q(t,"click",W(function(){Tt(n[8])&&n[8].apply(this,arguments)})),s=!0)},p(l,r){n=l},d(l){l&&k(e),s=!1,i()}}}function kt(n){let e,t,s,i,l,r,o;return{c(){e=d("li"),e.innerHTML='<hr class="dropdown-divider"/>',t=q(),s=d("li"),i=d("a"),l=d("i"),r=ye(" Open in deck editor"),c(l,"class","bi bi-collection"),c(i,"class","dropdown-item btn btn-sm"),c(i,"href",o="/decks/"+n[5]+"/questions/edit?question_id="+n[0].id),c(i,"role","button")},m(f,a){h(f,e,a),h(f,t,a),h(f,s,a),m(s,i),m(i,l),m(i,r)},p(f,a){a&33&&o!==(o="/decks/"+f[5]+"/questions/edit?question_id="+f[0].id)&&c(i,"href",o)},d(f){f&&(k(e),k(t),k(s))}}}function vt(n){let e,t;return e=new vn({props:{questionId:n[0].id}}),{c(){Se(e.$$.fragment)},m(s,i){Le(e,s,i),t=!0},p(s,i){const l={};i&1&&(l.questionId=s[0].id),e.$set(l)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){qe(e,s)}}}function yt(n){let e,t,s,i;return{c(){e=d("div"),t=d("button"),t.textContent="→ Show answer",c(t,"type","button"),c(t,"class","btn btn-outline-secondary btn-sm"),c(e,"class","mt-3")},m(l,r){h(l,e,r),m(e,t),s||(i=Q(t,"click",W(n[22])),s=!0)},p:D,d(l){l&&k(e),s=!1,i()}}}function On(n){let e,t,s,i;const l=[An,yn],r=[];function o(f,a){return f[0]?0:1}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),s=de()},m(f,a){r[e].m(f,a),h(f,s,a),i=!0},p(f,[a]){let u=e;e=o(f),e===u?r[e].p(f,a):(ve(),R(r[u],1,1,()=>{r[u]=null}),ke(),t=r[e],t?t.p(f,a):(t=r[e]=l[e](f),t.c()),F(t,1),t.m(s.parentNode,s))},i(f){i||(F(t),i=!0)},o(f){R(t),i=!1},d(f){f&&k(s),r[e].d(f)}}}function Kn(n){const e=n.target;!e.classList.contains("bg-danger-subtle")&&!e.classList.contains("bg-warning-subtle")&&!e.classList.contains("bg-success-subtle")?e.classList.add("bg-success-subtle"):e.classList.contains("bg-success-subtle")?(e.classList.remove("bg-success-subtle"),e.classList.add("bg-danger-subtle")):e.classList.contains("bg-danger-subtle")?(e.classList.remove("bg-danger-subtle"),e.classList.add("bg-warning-subtle")):e.classList.contains("bg-warning-subtle")&&e.classList.remove("bg-warning-subtle")}function Hn(n,e,t){let{deckId:s}=e,{question:i}=e,{questionContext:l}=e,{helpUsed:r}=e,{answerChoice:o}=e,{submitAnswer:f}=e,{deleteAnswer:a}=e,{examMode:u}=e,{updateCurrentQuestionData:w}=e,{settingsShuffleAnswers:A}=e,{settingsShowAnswerStats:y}=e;var p=!1,v=l.isAnswered;function K(){const b=!p;b&&w?w().then(()=>{t(9,p=b)}):t(9,p=b)}function H(b){i=b,t(0,i),t(13,A),t(1,l)}function T(b){n.$$.not_equal(i.images,b)&&(i.images=b,t(0,i),t(13,A),t(1,l))}const O=()=>{t(10,v=!0),t(2,r=!0)};function te(b,I,re,N){re[N]=b,t(0,i),t(13,A),t(1,l)}function z(b,I){n.$$.not_equal(l.answerContext[I.id],b)&&(l.answerContext[I.id]=b,t(1,l))}function g(b){u=b,t(3,u)}function E(b){y=b,t(4,y)}function _(b){n.$$.not_equal(i.answers[0],b)&&(i.answers[0]=b,t(0,i),t(13,A),t(1,l))}const L=()=>f();return n.$$set=b=>{"deckId"in b&&t(5,s=b.deckId),"question"in b&&t(0,i=b.question),"questionContext"in b&&t(1,l=b.questionContext),"helpUsed"in b&&t(2,r=b.helpUsed),"answerChoice"in b&&t(6,o=b.answerChoice),"submitAnswer"in b&&t(7,f=b.submitAnswer),"deleteAnswer"in b&&t(8,a=b.deleteAnswer),"examMode"in b&&t(3,u=b.examMode),"updateCurrentQuestionData"in b&&t(12,w=b.updateCurrentQuestionData),"settingsShuffleAnswers"in b&&t(13,A=b.settingsShuffleAnswers),"settingsShowAnswerStats"in b&&t(4,y=b.settingsShowAnswerStats)},n.$$.update=()=>{n.$$.dirty&8195&&(i.answers.forEach((b,I)=>{b.badgeText="ABCDEFGHIJKLMN".charAt(I)}),i&&i.type==="mc"&&A&&!l.isAnswered&&!Object.values(l.answerContext).some(b=>b.isSelectedAnswer)&&t(0,i.answers=zt.shuffle(i.answers),i)),n.$$.dirty&3&&(t(10,v=l.isAnswered),t(2,r=l.isAnswered)),n.$$.dirty&1&&(()=>{var b=document.querySelectorAll("#questionText li");[].map.call(b,function(I){I.addEventListener("click",Kn,!1)})})()},[i,l,r,u,y,s,o,f,a,p,v,K,w,A,H,T,O,te,z,g,E,_,L]}class Pn extends Ae{constructor(e){super(),Ce(this,e,Hn,On,ge,{deckId:5,question:0,questionContext:1,helpUsed:2,answerChoice:6,submitAnswer:7,deleteAnswer:8,examMode:3,updateCurrentQuestionData:12,settingsShuffleAnswers:13,settingsShowAnswerStats:4})}}export{Pn as S,le as h};
