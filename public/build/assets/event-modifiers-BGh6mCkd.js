import{$ as D,y as Q,g as F,Q as U,a0 as L,A as X,a1 as R,a2 as $,a3 as O,J as G,a4 as K,a5 as P,a6 as W,a7 as z,C as Y,a8 as w,a9 as V,aa as B,ab as J,ac as H,ad as Z,ae as j,af as y,ag as ee,ah as re}from"./render-COO8opCt.js";function ie(r,n){return n}function ne(r,n,l){for(var t=[],g=n.length,u,s=n.length,c=0;c<g;c++){let h=n[c];J(h,()=>{if(u){if(u.pending.delete(h),u.done.add(h),u.pending.size===0){var o=r.outrogroups;k(z(u.done)),o.delete(u),o.size===0&&(r.outrogroups=null)}}else s-=1},!1)}if(s===0){var a=t.length===0&&l!==null;if(a){var v=l,f=v.parentNode;ee(f),f.append(v),r.items.clear()}k(n,!a)}else u={pending:new Set(n),done:new Set},(r.outrogroups??=new Set).add(u)}function k(r,n=!0){for(var l=0;l<r.length;l++)re(r[l],n)}var q;function ue(r,n,l,t,g,u=null){var s=r,c=new Map,a=(n&V)!==0;if(a){var v=r;s=v.appendChild(D())}var f=null,h=U(()=>{var i=l();return Y(i)?i:i==null?[]:z(i)}),o,d=!0;function S(){e.fallback=f,fe(e,o,s,n,t),f!==null&&(o.length===0?(f.f&w)===0?B(f):(f.f^=w,M(f,null,s)):J(f,()=>{f=null}))}var x=Q(()=>{o=F(h);for(var i=o.length,b=new Set,m=X,_=$(),C=0;C<i;C+=1){var T=o[C],E=t(T,C),p=d?null:c.get(E);p?(p.v&&L(p.v,T),p.i&&L(p.i,C),_&&m.skipped_effects.delete(p.e)):(p=ae(c,d?s:q??=D(),T,E,C,g,n,l),d||(p.e.f|=w),c.set(E,p)),b.add(E)}if(i===0&&u&&!f&&(d?f=R(()=>u(s)):(f=R(()=>u(q??=D())),f.f|=w)),!d)if(_){for(const[N,A]of c)b.has(N)||m.skipped_effects.add(A.e);m.oncommit(S),m.ondiscard(()=>{})}else S();F(h)}),e={effect:x,items:c,outrogroups:null,fallback:f};d=!1}function fe(r,n,l,t,g){var u=(t&y)!==0,s=n.length,c=r.items,a=r.effect.first,v,f=null,h,o=[],d=[],S,x,e,i;if(u)for(i=0;i<s;i+=1)S=n[i],x=g(S,i),e=c.get(x).e,(e.f&w)===0&&(e.nodes?.a?.measure(),(h??=new Set).add(e));for(i=0;i<s;i+=1){if(S=n[i],x=g(S,i),e=c.get(x).e,r.outrogroups!==null)for(const A of r.outrogroups)A.pending.delete(e),A.done.delete(e);if((e.f&w)!==0)if(e.f^=w,e===a)M(e,null,l);else{var b=f?f.next:a;e===r.effect.last&&(r.effect.last=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),I(r,f,e),I(r,e,b),M(e,b,l),f=e,o=[],d=[],a=f.next;continue}if((e.f&H)!==0&&(B(e),u&&(e.nodes?.a?.unfix(),(h??=new Set).delete(e))),e!==a){if(v!==void 0&&v.has(e)){if(o.length<d.length){var m=d[0],_;f=m.prev;var C=o[0],T=o[o.length-1];for(_=0;_<o.length;_+=1)M(o[_],m,l);for(_=0;_<d.length;_+=1)v.delete(d[_]);I(r,C.prev,T.next),I(r,f,C),I(r,T,m),a=m,f=T,i-=1,o=[],d=[]}else v.delete(e),M(e,a,l),I(r,e.prev,e.next),I(r,e,f===null?r.effect.first:f.next),I(r,f,e),f=e;continue}for(o=[],d=[];a!==null&&a!==e;)(v??=new Set).add(a),d.push(a),a=a.next;if(a===null)continue}(e.f&w)===0&&o.push(e),f=e,a=e.next}if(r.outrogroups!==null){for(const A of r.outrogroups)A.pending.size===0&&(k(z(A.done)),r.outrogroups?.delete(A));r.outrogroups.size===0&&(r.outrogroups=null)}if(a!==null||v!==void 0){var E=[];if(v!==void 0)for(e of v)(e.f&H)===0&&E.push(e);for(;a!==null;)(a.f&H)===0&&a!==r.fallback&&E.push(a),a=a.next;var p=E.length;if(p>0){var N=(t&V)!==0&&s===0?l:null;if(u){for(i=0;i<p;i+=1)E[i].nodes?.a?.measure();for(i=0;i<p;i+=1)E[i].nodes?.a?.fix()}ne(r,E,N)}}u&&Z(()=>{if(h!==void 0)for(e of h)e.nodes?.a?.apply()})}function ae(r,n,l,t,g,u,s,c){var a=(s&P)!==0?(s&W)===0?G(l,!1,!1):O(l):null,v=(s&K)!==0?O(g):null;return{v:a,i:v,e:R(()=>(u(n,a??l,v??g,c),()=>{r.delete(t)}))}}function M(r,n,l){if(r.nodes)for(var t=r.nodes.start,g=r.nodes.end,u=n&&(n.f&w)===0?n.nodes.start:l;t!==null;){var s=j(t);if(u.before(t),t===g)return;t=s}}function I(r,n,l){n===null?r.effect.first=l:n.next=l,l===null?r.effect.last=n:l.prev=n}function oe(r){return function(...n){var l=n[0];return l.preventDefault(),r?.apply(this,n)}}export{ue as e,ie as i,oe as p};
