import{M as l,w as m,N as w,J as M,O as N,P as Y,g as P,a as A,Q as p,n as q,R as y,T as B,V as U,W as $,S as z,X as x,Y as Z,Z as C,_ as G,$ as J,a0 as Q,a1 as V}from"./if-GZgNzgdl.js";function R(e,r,t){if(e==null)return r(void 0),l;const n=m(()=>e.subscribe(r,t));return n.unsubscribe?()=>n.unsubscribe():n}const _=[];function F(e,r=l){let t=null;const n=new Set;function s(i){if(w(e,i)&&(e=i,t)){const o=!_.length;for(const u of n)u[1](),_.push(u,e);if(o){for(let u=0;u<_.length;u+=2)_[u][0](_[u+1]);_.length=0}}}function f(i){s(i(e))}function c(i,o=l){const u=[i,o];return n.add(u),n.size===1&&(t=r(s,f)||l),i(e),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:s,update:f,subscribe:c}}function W(e){let r;return R(e,t=>r=t)(),r}let S=!1,O=Symbol();function H(e,r,t){const n=t[r]??={store:null,source:Y(void 0),unsubscribe:l};if(n.store!==e&&!(O in t))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=l;else{var s=!0;n.unsubscribe=R(e,f=>{s?n.source.v=f:A(n.source,f)}),s=!1}return e&&O in t?W(e):P(n.source)}function K(){const e={};function r(){M(()=>{for(var t in e)e[t].unsubscribe();N(e,O,{enumerable:!1,value:!0})})}return[e,r]}function k(e,r,t){return e.set(t),r}function X(e){var r=S;try{return S=!1,[e(),S]}finally{S=r}}function ee(e,r,t,n){var s=(t&V)!==0,f=(t&Q)!==0,c=n,i=!0,o=()=>(i&&(i=!1,c=f?m(n):n),c),u;if(s){var D=z in e||x in e;u=p(e,r)?.set??(D&&r in e?a=>e[r]=a:void 0)}var b,E=!1;s?[b,E]=X(()=>e[r]):b=e[r],b===void 0&&n!==void 0&&(b=o(),u&&(C(),u(b)));var d;if(d=()=>{var a=e[r];return a===void 0?o():(i=!0,a)},(t&G)===0)return d;if(u){var L=e.$$legacy;return(function(a,g){return arguments.length>0?((!g||L||E)&&u(g?d():a),a):d()})}var I=!1,v=((t&J)!==0?U:Z)(()=>(I=!1,d()));s&&P(v);var h=y;return(function(a,g){if(arguments.length>0){const T=g?P(v):s?q(a):a;return A(v,T),I=!0,c!==void 0&&(c=T),a}return $&&I||(h.f&B)!==0?v.v:P(v)})}export{K as a,k as b,ee as p,H as s,F as w};
