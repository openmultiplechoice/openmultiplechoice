import{S as F,i as R,s as Z,b as m,g as _,c as u,q as G,a as v,h as f,n as N,d as w,A as J,f as O,t as S,l as P,p as z,j as C,k as K}from"./index-DgDIGCFR.js";import{e as L}from"./each-CvUUWvvD.js";import{C as Q}from"./auto-C08LIDt6.js";import{f as U}from"./format-Dvme3Z7b.js";function A(i,e,o){const c=i.slice();return c[8]=e[o],c}function M(i,e,o){const c=i.slice();return c[8]=e[o],c}function H(i){let e,o,c,n=L(i[1]),l=[];for(let t=0;t<n.length;t+=1)l[t]=V(M(i,n,t));return{c(){e=m("div"),o=m("h6"),o.textContent="New decks",c=_();for(let t=0;t<l.length;t+=1)l[t].c();u(e,"class","col-md-6")},m(t,a){v(t,e,a),f(e,o),f(e,c);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(t,a){if(a&2){n=L(t[1]);let s;for(s=0;s<n.length;s+=1){const r=M(t,n,s);l[s]?l[s].p(r,a):(l[s]=V(r),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&w(e),O(l,t)}}}function T(i){let e,o,c,n=i[8].questions.length+"",l;return{c(){e=m("span"),o=m("i"),c=_(),l=S(n),u(o,"class","bi bi-collection"),u(e,"class","badge text-bg-light"),u(e,"title","Number of questions")},m(t,a){v(t,e,a),f(e,o),f(e,c),f(e,l)},p(t,a){a&2&&n!==(n=t[8].questions.length+"")&&C(l,n)},d(t){t&&w(e)}}}function V(i){let e,o,c,n,l,t=i[8].name+"",a,s,r,g,d,p=i[8].questions.length>0&&T(i);function b(){return i[5](i[8])}return{c(){e=m("div"),p&&p.c(),o=_(),c=m("button"),c.innerHTML='<i class="bi bi-rocket-takeoff"></i>',n=_(),l=m("a"),a=S(t),r=_(),u(c,"type","button"),u(c,"class","btn btn-sm btn-primary"),u(l,"href",s="/decks/"+i[8].id),u(l,"class","alert-link text-overflow svelte-1gfmo48"),u(e,"class","alert alert-light m-1 p-2 text-overflow svelte-1gfmo48"),u(e,"role","alert")},m(h,y){v(h,e,y),p&&p.m(e,null),f(e,o),f(e,c),f(e,n),f(e,l),f(l,a),f(e,r),g||(d=P(c,"click",z(b)),g=!0)},p(h,y){i=h,i[8].questions.length>0?p?p.p(i,y):(p=T(i),p.c(),p.m(e,o)):p&&(p.d(1),p=null),y&2&&t!==(t=i[8].name+"")&&C(a,t),y&2&&s!==(s="/decks/"+i[8].id)&&u(l,"href",s)},d(h){h&&w(e),p&&p.d(),g=!1,d()}}}function j(i){let e,o,c,n=L(i[2]),l=[];for(let t=0;t<n.length;t+=1)l[t]=D(A(i,n,t));return{c(){e=m("div"),o=m("h6"),o.textContent="Popular decks",c=_();for(let t=0;t<l.length;t+=1)l[t].c();u(e,"class","col-md-6")},m(t,a){v(t,e,a),f(e,o),f(e,c);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(t,a){if(a&4){n=L(t[2]);let s;for(s=0;s<n.length;s+=1){const r=A(t,n,s);l[s]?l[s].p(r,a):(l[s]=D(r),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(t){t&&w(e),O(l,t)}}}function I(i){let e,o,c,n=i[8].questions.length+"",l;return{c(){e=m("span"),o=m("i"),c=_(),l=S(n),u(o,"class","bi bi-collection"),u(e,"class","badge text-bg-light"),u(e,"title","Number of questions")},m(t,a){v(t,e,a),f(e,o),f(e,c),f(e,l)},p(t,a){a&4&&n!==(n=t[8].questions.length+"")&&C(l,n)},d(t){t&&w(e)}}}function B(i){let e,o,c,n=i[8].sessions.length+"",l;return{c(){e=m("span"),o=m("i"),c=_(),l=S(n),u(o,"class","bi bi-rocket"),u(e,"class","badge text-bg-light"),u(e,"title","Number of sessions")},m(t,a){v(t,e,a),f(e,o),f(e,c),f(e,l)},p(t,a){a&4&&n!==(n=t[8].sessions.length+"")&&C(l,n)},d(t){t&&w(e)}}}function D(i){let e,o,c,n,l,t,a=i[8].name+"",s,r,g,d,p,b=i[8].questions.length>0&&I(i),h=i[8].sessions.length>0&&B(i);function y(){return i[6](i[8])}return{c(){e=m("div"),b&&b.c(),o=_(),h&&h.c(),c=_(),n=m("button"),n.innerHTML='<i class="bi bi-rocket-takeoff"></i>',l=_(),t=m("a"),s=S(a),g=_(),u(n,"type","button"),u(n,"class","btn btn-sm btn-primary"),u(t,"href",r="/decks/"+i[8].id),u(t,"class","alert-link"),u(e,"class","alert alert-light m-1 p-2 text-overflow svelte-1gfmo48"),u(e,"role","alert")},m(q,k){v(q,e,k),b&&b.m(e,null),f(e,o),h&&h.m(e,null),f(e,c),f(e,n),f(e,l),f(e,t),f(t,s),f(e,g),d||(p=P(n,"click",z(y)),d=!0)},p(q,k){i=q,i[8].questions.length>0?b?b.p(i,k):(b=I(i),b.c(),b.m(e,o)):b&&(b.d(1),b=null),i[8].sessions.length>0?h?h.p(i,k):(h=B(i),h.c(),h.m(e,c)):h&&(h.d(1),h=null),k&4&&a!==(a=i[8].name+"")&&C(s,a),k&4&&r!==(r="/decks/"+i[8].id)&&u(t,"href",r)},d(q){q&&w(e),b&&b.d(),h&&h.d(),d=!1,p()}}}function W(i){let e,o,c,n,l,t,a=i[1].length>0&&H(i),s=i[2].length>0&&j(i);return{c(){e=m("div"),a&&a.c(),o=_(),s&&s.c(),c=_(),n=m("div"),l=m("div"),t=m("canvas"),u(e,"class","row mt-3"),G(t,"max-height","300px"),u(l,"class","col-md"),u(n,"class","row mt-3 p-3")},m(r,g){v(r,e,g),a&&a.m(e,null),f(e,o),s&&s.m(e,null),v(r,c,g),v(r,n,g),f(n,l),f(l,t),i[7](t)},p(r,[g]){r[1].length>0?a?a.p(r,g):(a=H(r),a.c(),a.m(e,o)):a&&(a.d(1),a=null),r[2].length>0?s?s.p(r,g):(s=j(r),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:N,o:N,d(r){r&&(w(e),w(c),w(n)),a&&a.d(),s&&s.d(),i[7](null)}}}function E(i){var e={deck_id:i};axios.post("/api/sessions",e).then(function(o){window.location.href="/sessions/"+o.data.id}).catch(function(o){alert(o)})}function X(i,e,o){let c,n,l=[],t=[],a=[];J(()=>{axios.get("/api/stats/answers/byhour").then(function(d){o(4,l=d.data)}).catch(function(d){console.log(d)}),axios.get("/api/stats/decks/new").then(function(d){o(1,t=d.data)}).catch(function(d){console.log(d)}),axios.get("/api/stats/decks/popular").then(function(d){o(2,a=d.data)}).catch(function(d){console.log(d)})});const s=d=>E(d.id),r=d=>E(d.id);function g(d){K[d?"unshift":"push"](()=>{c=d,o(0,c)})}return i.$$.update=()=>{i.$$.dirty&25&&c&&(()=>{const d=Object.keys(l),p=Object.values(l);if(p.reduce((q,k)=>q+k,0)===0)return;const h={type:"line",data:{labels:d,datasets:[{label:"Answers",data:p,backgroundColor:"rgba(255, 205, 86, 0.4)",borderColor:"rgba(255, 205, 86, 0.4)",fill:!0,showLine:!1,pointRadius:0,tension:.2}]},options:{plugins:{legend:{display:!1}},responsive:!0,interaction:{intersect:!1},scales:{x:{display:!0,title:{display:!1,text:"Hour of the day"},ticks:{autoSkip:!0,maxTicksLimit:3,callback(q){const k=this.getLabelForValue(q);return U(k,"dd.MM.yyyy")}},grid:{display:!1},border:{display:!1}},y:{display:!0,title:{display:!1,text:"Number of answers"},ticks:{beginAtZero:!0,stepSize:1,maxTicksLimit:5,autoSkip:!0},border:{display:!1}}}}};n&&n.destroy();var y=c.getContext("2d");o(3,n=new Q(y,h))})()},[c,t,a,n,l,s,r,g]}class Y extends F{constructor(e){super(),R(this,e,X,W,Z,{})}}const $=document.getElementById("IndexStatsView");new Y({target:$});
