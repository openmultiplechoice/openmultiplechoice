import{S as he,i as ke,s as be,n as K,d as k,g as c,o as Z,a as v,c as d,f as u,b as L,E as oe,q as Ue,t as ge,l as D,v as Te,p as V,e as le,D as St,M as ze,h as Ne,k as ae,m as Ye,w as U,x as P,z as we,A as pe,r as de,u as ve,y as me,B as ye,C as Ae,O as Ot}from"./index-C5hKwDc9.js";import{e as ue,u as Lt,d as Ht,o as zt}from"./each-JoEH9o9l.js";import{p as F,d as Nt}from"./purify.es-CzHI0FGf.js";import{_ as Dt}from"./lodash-DBMh2b1a.js";import{Q as It}from"./QuestionForm-BinLHkK1.js";const je=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Pe(n,e,t,s){n.addEventListener?n.addEventListener(e,t,s):n.attachEvent&&n.attachEvent("on".concat(e),t)}function Se(n,e,t,s){n.removeEventListener?n.removeEventListener(e,t,s):n.detachEvent&&n.detachEvent("on".concat(e),t)}function qt(n,e){const t=e.slice(0,e.length-1);for(let s=0;s<t.length;s++)t[s]=n[t[s].toLowerCase()];return t}function Mt(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function jt(n,e){const t=n.length>=e.length?n:e,s=n.length>=e.length?e:n;let i=!0;for(let l=0;l<t.length;l++)s.indexOf(t[l])===-1&&(i=!1);return i}const qe={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":je?173:189,"=":je?61:187,";":je?59:186,"'":222,"[":219,"]":221,"\\":220},ie={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},He={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Q={16:!1,18:!1,17:!1,91:!1},N={};for(let n=1;n<20;n++)qe["f".concat(n)]=111+n;let z=[],Le=null,Tt="all";const re=new Map,Ee=n=>qe[n.toLowerCase()]||ie[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),Pt=n=>Object.keys(qe).find(e=>qe[e]===n),Qt=n=>Object.keys(ie).find(e=>ie[e]===n);function Et(n){Tt=n||"all"}function Me(){return Tt||"all"}function Ut(){return z.slice(0)}function Ft(){return z.map(n=>Pt(n)||Qt(n)||String.fromCharCode(n))}function Vt(){const n=[];return Object.keys(N).forEach(e=>{N[e].forEach(t=>{let{key:s,scope:i,mods:l,shortcut:r}=t;n.push({scope:i,shortcut:r,mods:l,keys:s.split("+").map(o=>Ee(o))})})}),n}function Bt(n){const e=n.target||n.srcElement,{tagName:t}=e;let s=!0;const i=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(s=!1),s}function Rt(n){return typeof n=="string"&&(n=Ee(n)),z.indexOf(n)!==-1}function Gt(n,e){let t,s;n||(n=Me());for(const i in N)if(Object.prototype.hasOwnProperty.call(N,i))for(t=N[i],s=0;s<t.length;)t[s].scope===n?t.splice(s,1).forEach(r=>{let{element:o}=r;return Fe(o)}):s++;Me()===n&&Et(e||"all")}function Jt(n){let e=n.keyCode||n.which||n.charCode;const t=z.indexOf(e);if(t>=0&&z.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&z.splice(0,z.length),(e===93||e===224)&&(e=91),e in Q){Q[e]=!1;for(const s in ie)ie[s]===e&&(te[s]=!1)}}function Kt(n){if(typeof n>"u")Object.keys(N).forEach(i=>{Array.isArray(N[i])&&N[i].forEach(l=>Oe(l)),delete N[i]}),Fe(null);else if(Array.isArray(n))n.forEach(i=>{i.key&&Oe(i)});else if(typeof n=="object")n.key&&Oe(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];let[i,l]=t;typeof i=="function"&&(l=i,i=""),Oe({key:n,scope:i,method:l,splitKey:"+"})}}const Oe=n=>{let{key:e,scope:t,method:s,splitKey:i="+"}=n;Mt(e).forEach(r=>{const o=r.split(i),f=o.length,a=o[f-1],m=a==="*"?"*":Ee(a);if(!N[m])return;t||(t=Me());const p=f>1?qt(ie,o):[],y=[];N[m]=N[m].filter(b=>{const w=(s?b.method===s:!0)&&b.scope===t&&jt(b.mods,p);return w&&y.push(b.element),!w}),y.forEach(b=>Fe(b))})};function Ze(n,e,t,s){if(e.element!==s)return;let i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(const l in Q)Object.prototype.hasOwnProperty.call(Q,l)&&(!Q[l]&&e.mods.indexOf(+l)>-1||Q[l]&&e.mods.indexOf(+l)===-1)&&(i=!1);(e.mods.length===0&&!Q[16]&&!Q[18]&&!Q[17]&&!Q[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(z),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}function xe(n,e){const t=N["*"];let s=n.keyCode||n.which||n.charCode;if(!te.filter.call(this,n))return;if((s===93||s===224)&&(s=91),z.indexOf(s)===-1&&s!==229&&z.push(s),["metaKey","ctrlKey","altKey","shiftKey"].forEach(o=>{const f=He[o];n[o]&&z.indexOf(f)===-1?z.push(f):!n[o]&&z.indexOf(f)>-1?z.splice(z.indexOf(f),1):o==="metaKey"&&n[o]&&(z=z.filter(a=>a in He||a===s))}),s in Q){Q[s]=!0;for(const o in ie)ie[o]===s&&(te[o]=!0);if(!t)return}for(const o in Q)Object.prototype.hasOwnProperty.call(Q,o)&&(Q[o]=n[He[o]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(z.indexOf(17)===-1&&z.push(17),z.indexOf(18)===-1&&z.push(18),Q[17]=!0,Q[18]=!0);const i=Me();if(t)for(let o=0;o<t.length;o++)t[o].scope===i&&(n.type==="keydown"&&t[o].keydown||n.type==="keyup"&&t[o].keyup)&&Ze(n,t[o],i,e);if(!(s in N))return;const l=N[s],r=l.length;for(let o=0;o<r;o++)if((n.type==="keydown"&&l[o].keydown||n.type==="keyup"&&l[o].keyup)&&l[o].key){const f=l[o],{splitKey:a}=f,m=f.key.split(a),p=[];for(let y=0;y<m.length;y++)p.push(Ee(m[y]));p.sort().join("")===z.sort().join("")&&Ze(n,f,i,e)}}function te(n,e,t){z=[];const s=Mt(n);let i=[],l="all",r=document,o=0,f=!1,a=!0,m="+",p=!1,y=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(l=e.scope),e.element&&(r=e.element),e.keyup&&(f=e.keyup),e.keydown!==void 0&&(a=e.keydown),e.capture!==void 0&&(p=e.capture),typeof e.splitKey=="string"&&(m=e.splitKey),e.single===!0&&(y=!0)),typeof e=="string"&&(l=e),y&&Kt(n,l);o<s.length;o++)n=s[o].split(m),i=[],n.length>1&&(i=qt(ie,n)),n=n[n.length-1],n=n==="*"?"*":Ee(n),n in N||(N[n]=[]),N[n].push({keyup:f,keydown:a,scope:l,mods:i,shortcut:s[o],method:t,key:s[o],splitKey:m,element:r});if(typeof r<"u"&&window){if(!re.has(r)){const b=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return xe(w,r)},g=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;xe(w,r),Jt(w)};re.set(r,{keydownListener:b,keyupListenr:g,capture:p}),Pe(r,"keydown",b,p),Pe(r,"keyup",g,p)}if(!Le){const b=()=>{z=[]};Le={listener:b,capture:p},Pe(window,"focus",b,p)}}}function Wt(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(N).forEach(t=>{N[t].filter(i=>i.scope===e&&i.shortcut===n).forEach(i=>{i&&i.method&&i.method()})})}function Fe(n){const e=Object.values(N).flat();if(e.findIndex(s=>{let{element:i}=s;return i===n})<0){const{keydownListener:s,keyupListenr:i,capture:l}=re.get(n)||{};s&&i&&(Se(n,"keyup",i,l),Se(n,"keydown",s,l),re.delete(n))}if((e.length<=0||re.size<=0)&&(Object.keys(re).forEach(i=>{const{keydownListener:l,keyupListenr:r,capture:o}=re.get(i)||{};l&&r&&(Se(i,"keyup",r,o),Se(i,"keydown",l,o),re.delete(i))}),re.clear(),Object.keys(N).forEach(i=>delete N[i]),Le)){const{listener:i,capture:l}=Le;Se(window,"focus",i,l),Le=null}}const Qe={getPressedKeyString:Ft,setScope:Et,getScope:Me,deleteScope:Gt,getPressedKeyCodes:Ut,getAllKeyCodes:Vt,isPressed:Rt,filter:Bt,trigger:Wt,unbind:Kt,keyMap:qe,modifier:ie,modifierMap:He};for(const n in Qe)Object.prototype.hasOwnProperty.call(Qe,n)&&(te[n]=Qe[n]);if(typeof window<"u"){const n=window.hotkeys;te.noConflict=e=>(e&&window.hotkeys===te&&(window.hotkeys=n),te),window.hotkeys=te}function Xt(n){let e,t;return{c(){e=u("div"),t=u("p"),t.textContent=`${n[8]}`,c(t,"class","badge text-bg-light my-0"),c(e,"class","col-1 border-start-3")},m(s,i){v(s,e,i),d(e,t)},p:K,d(s){s&&k(e)}}}function Yt(n){let e,t,s,i;return{c(){e=u("div"),t=u("p"),t.textContent=`${n[8]}`,c(t,"class","badge text-bg-light my-0"),c(e,"class","col-1 border-start-3 cursor-pointer svelte-12xdzqf")},m(l,r){v(l,e,r),d(e,t),s||(i=D(e,"click",n[10]),s=!0)},p:K,d(l){l&&k(e),s=!1,i()}}}function Zt(n){let e,t,s=F.sanitize(n[0].text)+"";return{c(){e=u("div"),t=u("p"),c(t,"class","px-1 my-0 trix-content"),c(e,"class","col-9")},m(i,l){v(i,e,l),d(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=F.sanitize(i[0].text)+"")&&(t.innerHTML=s)},d(i){i&&k(e)}}}function xt(n){let e,t,s=F.sanitize(n[0].text)+"",i,l;return{c(){e=u("div"),t=u("p"),c(t,"class","px-1 my-0 trix-content"),c(e,"class","col-9 cursor-pointer svelte-12xdzqf")},m(r,o){v(r,e,o),d(e,t),t.innerHTML=s,i||(l=D(e,"click",n[11]),i=!0)},p(r,o){o&1&&s!==(s=F.sanitize(r[0].text)+"")&&(t.innerHTML=s)},d(r){r&&k(e),i=!1,l()}}}function $e(n){let e,t=n[0].answer_percentage+"",s,i;return{c(){e=u("span"),s=ge(t),i=ge("%"),c(e,"class","badge"),c(e,"title","Percentage of users who chose this answer"),Z(e,"text-dark",!n[1].isSubmittedAnswer&&!n[1].isCorrectAnswer)},m(l,r){v(l,e,r),d(e,s),d(e,i)},p(l,r){r&1&&t!==(t=l[0].answer_percentage+"")&&Ue(s,t),r&2&&Z(e,"text-dark",!l[1].isSubmittedAnswer&&!l[1].isCorrectAnswer)},d(l){l&&k(e)}}}function $t(n){let e;return{c(){e=u("span"),e.textContent="✓",c(e,"class","text-secondary fw-bold fs-4")},m(t,s){v(t,e,s)},p:K,d(t){t&&k(e)}}}function en(n){let e;return{c(){e=u("span"),e.textContent="✗",c(e,"class","text-light fw-bold fs-4")},m(t,s){v(t,e,s)},p:K,d(t){t&&k(e)}}}function tn(n){let e;return{c(){e=u("span"),e.textContent="⇠",c(e,"class","text-light fw-bold fs-4")},m(t,s){v(t,e,s)},p:K,d(t){t&&k(e)}}}function nn(n){let e;return{c(){e=u("span"),e.textContent="✓",c(e,"class","text-light fw-bold fs-4")},m(t,s){v(t,e,s)},p:K,d(t){t&&k(e)}}}function sn(n){let e,t,s,i,l,r,o,f;return{c(){e=u("div"),t=u("button"),t.innerHTML='<span class="text-secondary">✗</span>',s=L(),i=u("div"),l=L(),r=u("button"),r.innerHTML='<span class="text-secondary">✓</span>',c(t,"type","button"),c(t,"class","btn btn-sm p-0"),c(i,"class","vr mx-1"),c(r,"type","button"),c(r,"class","btn btn-sm p-0"),c(e,"class","d-flex justify-content-end align-items-center")},m(a,m){v(a,e,m),d(e,t),d(e,s),d(e,i),d(e,l),d(e,r),o||(f=[D(t,"click",V(n[12])),D(r,"click",V(n[13]))],o=!0)},p:K,d(a){a&&k(e),o=!1,Te(f)}}}function et(n){let e,t,s,i,l=F.sanitize(n[0].hint)+"";return{c(){e=u("div"),t=L(),s=u("div"),i=u("p"),c(e,"class","col-1 border-3"),c(i,"class","p-1 trix-content"),c(s,"class","col-9")},m(r,o){v(r,e,o),v(r,t,o),v(r,s,o),d(s,i),i.innerHTML=l},p(r,o){o&1&&l!==(l=F.sanitize(r[0].hint)+"")&&(i.innerHTML=l)},d(r){r&&(k(e),k(t),k(s))}}}function ln(n){let e,t,s,i,l,r,o,f,a,m,p,y;function b(_,q){return!_[2]&&!_[1].isSubmittedAnswer?Yt:Xt}let g=b(n),w=g(n);function M(_,q){return!_[2]&&!_[1].isSelectedAnswer?xt:Zt}let E=M(n),T=E(n),O=n[2]&&!n[4]&&n[5]&&n[0].answer_percentage!=null&&$e(n);function x(_,q){if(!_[2]&&!_[1].isSelectedAnswer)return sn;if(!_[4]&&_[1].isCorrectAnswer&&_[1].isSubmittedAnswer)return nn;if(!_[4]&&_[1].isCorrectAnswer&&!_[1].isSubmittedAnswer&&_[2])return tn;if(!_[4]&&_[1].isSubmittedAnswer)return en;if(_[4]&&_[1].isSubmittedAnswer)return $t}let H=x(n),h=H&&H(n),S=!n[4]&&n[0].hint&&(n[2]||n[1].isSelectedAnswer)&&et(n);return{c(){e=u("div"),w.c(),t=L(),T.c(),s=L(),i=u("div"),l=u("div"),r=u("div"),O&&O.c(),o=L(),f=u("div"),h&&h.c(),p=L(),y=u("div"),S&&S.c(),c(r,"class","col-md"),c(f,"class","col-md"),c(l,"class","row text-end d-flex align-items-center"),c(i,"class","col-2"),c(e,"id",a="answer"+n[0].id),oe(e,"min-height","3.6rem"),oe(e,"box-shadow","4px 4px rgba(0,0,0,.2)"),c(e,"class",m="row border border-3 rounded m-1 py-2 d-flex align-items-center "+n[6]+" svelte-12xdzqf"),Z(e,"bg-secondary-subtle",n[4]||!n[2]&&!n[1].isSelectedAnswer&&!n[1].isSubmittedAnswer||n[2]&&!n[1].isSubmittedAnswer&&!n[1].isCorrectAnswer),Z(e,"text-dark",n[4]||!n[2]&&!n[1].isSelectedAnswer&&!n[1].isSubmittedAnswer||n[2]&&!n[1].isSubmittedAnswer&&!n[1].isCorrectAnswer),Z(e,"text-bg-success",!n[4]&&n[2]&&n[1].isCorrectAnswer),Z(e,"text-bg-danger",!n[4]&&n[1].isSelectedAnswer&&!n[1].isCorrectAnswer),Z(e,"bg-incorrect",n[7]==="incorrect"),Z(e,"bg-correct",n[7]==="correct"),c(y,"class","row ms-1 mb-2 me-1")},m(_,q){v(_,e,q),w.m(e,null),d(e,t),T.m(e,null),d(e,s),d(e,i),d(i,l),d(l,r),O&&O.m(r,null),d(l,o),d(l,f),h&&h.m(f,null),v(_,p,q),v(_,y,q),S&&S.m(y,null)},p(_,[q]){g===(g=b(_))&&w?w.p(_,q):(w.d(1),w=g(_),w&&(w.c(),w.m(e,t))),E===(E=M(_))&&T?T.p(_,q):(T.d(1),T=E(_),T&&(T.c(),T.m(e,s))),_[2]&&!_[4]&&_[5]&&_[0].answer_percentage!=null?O?O.p(_,q):(O=$e(_),O.c(),O.m(r,null)):O&&(O.d(1),O=null),H===(H=x(_))&&h?h.p(_,q):(h&&h.d(1),h=H&&H(_),h&&(h.c(),h.m(f,null))),q&1&&a!==(a="answer"+_[0].id)&&c(e,"id",a),q&64&&m!==(m="row border border-3 rounded m-1 py-2 d-flex align-items-center "+_[6]+" svelte-12xdzqf")&&c(e,"class",m),q&86&&Z(e,"bg-secondary-subtle",_[4]||!_[2]&&!_[1].isSelectedAnswer&&!_[1].isSubmittedAnswer||_[2]&&!_[1].isSubmittedAnswer&&!_[1].isCorrectAnswer),q&86&&Z(e,"text-dark",_[4]||!_[2]&&!_[1].isSelectedAnswer&&!_[1].isSubmittedAnswer||_[2]&&!_[1].isSubmittedAnswer&&!_[1].isCorrectAnswer),q&86&&Z(e,"text-bg-success",!_[4]&&_[2]&&_[1].isCorrectAnswer),q&82&&Z(e,"text-bg-danger",!_[4]&&_[1].isSelectedAnswer&&!_[1].isCorrectAnswer),q&192&&Z(e,"bg-incorrect",_[7]==="incorrect"),q&192&&Z(e,"bg-correct",_[7]==="correct"),!_[4]&&_[0].hint&&(_[2]||_[1].isSelectedAnswer)?S?S.p(_,q):(S=et(_),S.c(),S.m(y,null)):S&&(S.d(1),S=null)},i:K,o:K,d(_){_&&(k(e),k(p),k(y)),w.d(),T.d(),O&&O.d(),h&&h.d(),S&&S.d()}}}function rn(n,e,t){let{answer:s}=e,{answerContext:i}=e,{answerNumber:l}=e,{questionIsAnswered:r}=e,{submitAnswer:o}=e,{examMode:f}=e,{settingsShowAnswerStats:a}=e;var m,p,y=s.badgeText;const b=()=>o(s.id),g=()=>o(s.id),w=()=>t(7,p=p==="incorrect"?"":"incorrect"),M=()=>t(7,p=p==="correct"?"":"correct");return n.$$set=E=>{"answer"in E&&t(0,s=E.answer),"answerContext"in E&&t(1,i=E.answerContext),"answerNumber"in E&&t(9,l=E.answerNumber),"questionIsAnswered"in E&&t(2,r=E.questionIsAnswered),"submitAnswer"in E&&t(3,o=E.submitAnswer),"examMode"in E&&t(4,f=E.examMode),"settingsShowAnswerStats"in E&&t(5,a=E.settingsShowAnswerStats)},n.$$.update=()=>{n.$$.dirty&521&&(te.unbind(`${y}, ${l}`,"questions"),te(`${y}, ${l}`,"questions",function(){o(s.id)})),n.$$.dirty&23&&s&&(t(6,m=""),f?t(7,p=""):r?(t(7,p=""),i.isCorrectAnswer?t(6,m="border-success"):i.isSubmittedAnswer&&t(6,m="border-danger")):i.isSelectedAnswer&&(t(7,p=""),t(6,m="border-danger")))},[s,i,r,o,f,a,m,p,y,l,b,g,w,M]}class on extends he{constructor(e){super(),ke(this,e,rn,ln,be,{answer:0,answerContext:1,answerNumber:9,questionIsAnswered:2,submitAnswer:3,examMode:4,settingsShowAnswerStats:5})}}function fn(n){let e,t,s,i,l;return{c(){e=u("div"),t=u("div"),s=u("button"),s.textContent="Show answer",c(s,"type","button"),c(s,"class","btn btn-warning btn-sm w-100"),c(t,"class","col-md"),c(e,"class","row")},m(r,o){v(r,e,o),d(e,t),d(t,s),i||(l=D(s,"click",V(n[4])),i=!0)},p:K,d(r){r&&k(e),i=!1,l()}}}function cn(n){let e,t,s=F.sanitize(n[0].text)+"",i,l,r=!n[1]&&tt(n);return{c(){e=u("div"),t=u("p"),i=L(),r&&r.c(),l=le(),c(t,"class","p-1"),oe(e,"box-shadow","4px 4px rgba(0,0,0,.2)"),c(e,"class","row border-start border-3 rounded bg-secondary-subtle m-1 mb-3 p-2")},m(o,f){v(o,e,f),d(e,t),t.innerHTML=s,v(o,i,f),r&&r.m(o,f),v(o,l,f)},p(o,f){f&1&&s!==(s=F.sanitize(o[0].text)+"")&&(t.innerHTML=s),o[1]?r&&(r.d(1),r=null):r?r.p(o,f):(r=tt(o),r.c(),r.m(l.parentNode,l))},d(o){o&&(k(e),k(i),k(l)),r&&r.d(o)}}}function tt(n){let e,t,s,i,l,r,o,f;return{c(){e=u("div"),t=u("div"),s=u("button"),s.textContent="✗ Ask me again",i=L(),l=u("div"),r=u("button"),r.textContent="✓ OK",c(s,"type","button"),c(s,"class","btn btn-danger btn-sm w-100"),c(t,"class","col-md-6 mb-1"),c(r,"type","button"),c(r,"class","btn btn-success btn-sm w-100"),c(l,"class","col-md-6 mb-1"),c(e,"class","row")},m(a,m){v(a,e,m),d(e,t),d(t,s),d(e,i),d(e,l),d(l,r),o||(f=[D(s,"click",V(n[5])),D(r,"click",V(n[6]))],o=!0)},p:K,d(a){a&&k(e),o=!1,Te(f)}}}function an(n){let e;function t(l,r){return l[3]?cn:fn}let s=t(n),i=s(n);return{c(){i.c(),e=le()},m(l,r){i.m(l,r),v(l,e,r)},p(l,[r]){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:K,o:K,d(l){l&&k(e),i.d(l)}}}function un(n,e,t){let{answer:s}=e,{hasAnswer:i}=e,{submitAnswer:l}=e;var r=!1;function o(){t(3,r=!r)}const f=()=>l(),a=()=>l(s.id);return n.$$set=m=>{"answer"in m&&t(0,s=m.answer),"hasAnswer"in m&&t(1,i=m.hasAnswer),"submitAnswer"in m&&t(2,l=m.submitAnswer)},n.$$.update=()=>{n.$$.dirty&2&&(i?t(3,r=!0):t(3,r=!1))},[s,i,l,r,o,f,a]}class dn extends he{constructor(e){super(),ke(this,e,un,an,be,{answer:0,hasAnswer:1,submitAnswer:2})}}function nt(n){let e,t,s,i,l,r,o,f;return{c(){e=u("div"),t=u("div"),s=u("button"),s.textContent="Ask me again",i=L(),l=u("div"),r=u("button"),r.textContent="I got it!",c(s,"type","button"),c(s,"class","btn btn-danger btn-sm w-100"),c(t,"class","col-md-6 mb-1"),c(r,"type","button"),c(r,"class","btn btn-success btn-sm w-100"),c(l,"class","col-md-6 mb-1"),c(e,"class","row")},m(a,m){v(a,e,m),d(e,t),d(t,s),d(e,i),d(e,l),d(l,r),o||(f=[D(s,"click",V(n[2])),D(r,"click",V(n[3]))],o=!0)},p:K,d(a){a&&k(e),o=!1,Te(f)}}}function mn(n){let e,t=!n[0]&&nt(n);return{c(){t&&t.c(),e=le()},m(s,i){t&&t.m(s,i),v(s,e,i)},p(s,[i]){s[0]?t&&(t.d(1),t=null):t?t.p(s,i):(t=nt(s),t.c(),t.m(e.parentNode,e))},i:K,o:K,d(s){s&&k(e),t&&t.d(s)}}}function bn(n,e,t){let{hasAnswer:s}=e,{submitAnswer:i}=e;const l=()=>i(),r=()=>i(-1);return n.$$set=o=>{"hasAnswer"in o&&t(0,s=o.hasAnswer),"submitAnswer"in o&&t(1,i=o.submitAnswer)},[s,i,l,r]}class _n extends he{constructor(e){super(),ke(this,e,bn,mn,be,{hasAnswer:0,submitAnswer:1})}}function st(n,e,t){const s=n.slice();return s[7]=e[t],s}function wn(n){let e,t,s,i,l,r,o,f,a;return{c(){e=u("div"),t=u("p"),s=u("button"),i=L(),l=u("div"),r=u("img"),c(s,"type","button"),c(s,"class","btn-close"),c(t,"class","bg-white text-end"),c(r,"class","img-fluid border border-5 border-white"),ze(r.src,o="/"+n[2].path)||c(r,"src",o),c(r,"alt",""),c(l,"class","text-center"),c(e,"class","img-fullscreen svelte-z0la5k")},m(m,p){v(m,e,p),d(e,t),d(t,s),d(e,i),d(e,l),d(l,r),f||(a=[D(s,"click",V(n[5])),D(e,"click",n[3])],f=!0)},p(m,p){p&4&&!ze(r.src,o="/"+m[2].path)&&c(r,"src",o)},d(m){m&&k(e),f=!1,Te(a)}}}function pn(n){let e,t,s=[],i=new Map,l=ue(n[0]);const r=o=>o[7].id;for(let o=0;o<l.length;o+=1){let f=st(n,l,o),a=r(f);i.set(a,s[o]=it(a,f))}return{c(){e=u("div"),t=u("div");for(let o=0;o<s.length;o+=1)s[o].c();c(t,"class","row row-cols-1 row-cols-sm-3 g-4"),c(e,"class","col-lg")},m(o,f){v(o,e,f),d(e,t);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(t,null)},p(o,f){f&9&&(l=ue(o[0]),s=Lt(s,f,r,1,o,l,i,t,Ht,it,null,st))},d(o){o&&k(e);for(let f=0;f<s.length;f+=1)s[f].d()}}}function it(n,e){let t,s,i,l,r,o,f;function a(){return e[4](e[7])}return{key:n,first:null,c(){t=u("div"),s=u("div"),i=u("img"),r=L(),ze(i.src,l="/"+e[7].path)||c(i,"src",l),c(i,"class","card-img-top"),c(i,"alt",""),c(s,"class","card"),oe(s,"max-width","18rem"),oe(s,"cursor","pointer"),c(t,"class","col"),this.first=t},m(m,p){v(m,t,p),d(t,s),d(s,i),d(t,r),o||(f=D(i,"click",a),o=!0)},p(m,p){e=m,p&1&&!ze(i.src,l="/"+e[7].path)&&c(i,"src",l)},d(m){m&&k(t),o=!1,f()}}}function gn(n){let e;function t(l,r){return l[1]?wn:pn}let s=t(n),i=s(n);return{c(){i.c(),e=le()},m(l,r){i.m(l,r),v(l,e,r)},p(l,[r]){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:K,o:K,d(l){l&&k(e),i.d(l)}}}function hn(n,e,t){let{images:s=[]}=e;var i=!1,l;St(()=>{te("esc","images",function(m,p){i&&t(1,i=!1)})});var r;function o(m){r&&r.cancel(),r=Nt(()=>{t(1,i=!i),t(2,l=s.find(p=>p.id===m))},100,{maxWait:200}),r()}const f=m=>o(m.id),a=()=>t(1,i=!i);return n.$$set=m=>{"images"in m&&t(0,s=m.images)},n.$$.update=()=>{n.$$.dirty&2&&(i?te.setScope("images"):te.setScope("questions"))},[s,i,l,o,f,a]}class kn extends he{constructor(e){super(),ke(this,e,hn,gn,be,{images:0})}}function lt(n,e,t){const s=n.slice();return s[19]=e[t],s}function rt(n,e,t){const s=n.slice();return s[19]=e[t],s}function vn(n){let e;return{c(){e=u("div"),e.innerHTML='<div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading decks ...</span></div>',c(e,"class","d-flex justify-content-center")},m(t,s){v(t,e,s)},p:K,d(t){t&&k(e)}}}function yn(n){let e,t,s,i,l,r=n[0].length+n[1].length>10&&ot(n),o=ue(n[3]),f=[];for(let b=0;b<o.length;b+=1)f[b]=ft(rt(n,o,b));let a=n[6].length>0&&n[3].length>0&&ct(),m=ue(n[6]),p=[];for(let b=0;b<m.length;b+=1)p[b]=at(lt(n,m,b));let y=n[6].length===0&&n[3].length===0&&ut();return{c(){r&&r.c(),e=L();for(let b=0;b<f.length;b+=1)f[b].c();t=L(),a&&a.c(),s=L();for(let b=0;b<p.length;b+=1)p[b].c();i=L(),y&&y.c(),l=le()},m(b,g){r&&r.m(b,g),v(b,e,g);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(b,g);v(b,t,g),a&&a.m(b,g),v(b,s,g);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(b,g);v(b,i,g),y&&y.m(b,g),v(b,l,g)},p(b,g){if(b[0].length+b[1].length>10?r?r.p(b,g):(r=ot(b),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),g&264){o=ue(b[3]);let w;for(w=0;w<o.length;w+=1){const M=rt(b,o,w);f[w]?f[w].p(M,g):(f[w]=ft(M),f[w].c(),f[w].m(t.parentNode,t))}for(;w<f.length;w+=1)f[w].d(1);f.length=o.length}if(b[6].length>0&&b[3].length>0?a||(a=ct(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),g&192){m=ue(b[6]);let w;for(w=0;w<m.length;w+=1){const M=lt(b,m,w);p[w]?p[w].p(M,g):(p[w]=at(M),p[w].c(),p[w].m(i.parentNode,i))}for(;w<p.length;w+=1)p[w].d(1);p.length=m.length}b[6].length===0&&b[3].length===0?y||(y=ut(),y.c(),y.m(l.parentNode,l)):y&&(y.d(1),y=null)},d(b){b&&(k(e),k(t),k(s),k(i),k(l)),r&&r.d(b),Ye(f,b),a&&a.d(b),Ye(p,b),y&&y.d(b)}}}function ot(n){let e,t,s;return{c(){e=u("input"),c(e,"type","text"),c(e,"class","form-control mb-3"),c(e,"placeholder","Filter decks ...")},m(i,l){v(i,e,l),n[11](e),Ne(e,n[2]),t||(s=D(e,"input",n[12]),t=!0)},p(i,l){l&4&&e.value!==i[2]&&Ne(e,i[2])},d(i){i&&k(e),n[11](null),t=!1,s()}}}function ft(n){let e,t,s,i=n[19].name+"",l,r,o,f,a,m,p;function y(){return n[13](n[19])}return{c(){e=u("div"),t=u("div"),s=u("a"),l=ge(i),o=L(),f=u("div"),a=u("button"),a.textContent="Remove",c(s,"href",r="/decks/"+n[19].id),c(s,"class","link-dark"),c(t,"class","col-9 text-truncate"),c(a,"class","btn btn-sm btn-outline-secondary float-end"),c(f,"class","col-3 d-grid gap-4"),c(e,"class","row mb-1")},m(b,g){v(b,e,g),d(e,t),d(t,s),d(s,l),d(e,o),d(e,f),d(f,a),m||(p=D(a,"click",V(y)),m=!0)},p(b,g){n=b,g&8&&i!==(i=n[19].name+"")&&Ue(l,i),g&8&&r!==(r="/decks/"+n[19].id)&&c(s,"href",r)},d(b){b&&k(e),m=!1,p()}}}function ct(n){let e;return{c(){e=u("hr")},m(t,s){v(t,e,s)},d(t){t&&k(e)}}}function at(n){let e,t,s,i=n[19].name+"",l,r,o,f,a,m,p;function y(){return n[14](n[19])}return{c(){e=u("div"),t=u("div"),s=u("a"),l=ge(i),o=L(),f=u("div"),a=u("button"),a.textContent="Add",c(s,"href",r="/decks/"+n[19].id),c(s,"class","link-dark"),c(t,"class","col-9 text-truncate"),c(a,"class","btn btn-sm btn-primary float-end"),c(f,"class","col-3 d-grid gap-4"),c(e,"class","row mb-1")},m(b,g){v(b,e,g),d(e,t),d(t,s),d(s,l),d(e,o),d(e,f),d(f,a),m||(p=D(a,"click",V(y)),m=!0)},p(b,g){n=b,g&64&&i!==(i=n[19].name+"")&&Ue(l,i),g&64&&r!==(r="/decks/"+n[19].id)&&c(s,"href",r)},d(b){b&&k(e),m=!1,p()}}}function ut(n){let e;return{c(){e=u("div"),e.textContent="No decks found",c(e,"class","alert alert-light text-center"),c(e,"role","alert")},m(t,s){v(t,e,s)},d(t){t&&k(e)}}}function An(n){let e,t,s,i,l,r,o,f,a,m,p,y,b,g,w,M,E,T,O;function x(S,_){return S[0]?yn:vn}let H=x(n),h=H(n);return{c(){e=u("button"),e.innerHTML='<i class="bi bi-collection"></i> Add to deck',t=L(),s=u("div"),i=u("div"),i.innerHTML='<h5 id="offcanvasAddToDeckLabel">Add question to deck</h5> <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>',l=L(),r=u("div"),h.c(),o=L(),f=u("hr"),a=L(),m=u("div"),p=u("div"),y=u("p"),y.textContent="Create new deck:",b=L(),g=u("div"),w=u("input"),M=L(),E=u("button"),E.textContent="Create deck and add question",c(e,"class","btn btn-outline-secondary btn-sm"),c(e,"type","button"),c(e,"data-bs-toggle","offcanvas"),c(e,"data-bs-target","#offcanvasAddToDeck"),c(e,"aria-controls","offcanvasAddToDeck"),c(i,"class","offcanvas-header"),c(w,"type","text"),c(w,"class","form-control"),c(w,"id","name"),c(w,"name","name"),c(w,"placeholder","My new deck ..."),c(g,"class","mb-2"),c(E,"class","btn btn-sm btn-primary mb-3"),c(p,"class","col"),c(m,"class","row sticky-bottom bg-white mt-3"),c(r,"class","offcanvas-body pb-0"),c(s,"class","offcanvas offcanvas-end"),c(s,"tabindex","-1"),c(s,"id","offcanvasAddToDeck"),c(s,"aria-labelledby","offcanvasAddToDeckLabel")},m(S,_){v(S,e,_),v(S,t,_),v(S,s,_),d(s,i),d(s,l),d(s,r),h.m(r,null),d(r,o),d(r,f),d(r,a),d(r,m),d(m,p),d(p,y),d(p,b),d(p,g),d(g,w),Ne(w,n[4]),d(p,M),d(p,E),T||(O=[D(w,"input",n[15]),D(E,"click",V(n[16]))],T=!0)},p(S,[_]){H===(H=x(S))&&h?h.p(S,_):(h.d(1),h=H(S),h&&(h.c(),h.m(r,o))),_&16&&w.value!==S[4]&&Ne(w,S[4])},i:K,o:K,d(S){S&&(k(e),k(t),k(s)),h.d(),T=!1,Te(O)}}}function Cn(n,e,t){let{questionId:s}=e,i,l,r="",o,f="",a=[],m=[];St(()=>{const h=document.getElementById("offcanvasAddToDeck");h.addEventListener("show.bs.offcanvas",S=>{p()}),h.addEventListener("shown.bs.offcanvas",S=>{w()}),h.addEventListener("hidden.bs.offcanvas",S=>{t(0,i=void 0),t(1,l=void 0),t(2,f="")})});function p(){axios.get("/api/decks/withquestionids").then(function(h){var S=h.data;t(0,i=[]),t(1,l=[]),S.forEach(_=>{_.questions.some(q=>q.id===s)?t(0,i=[...i,{id:_.id,name:_.name}]):t(1,l=[...l,{id:_.id,name:_.name}])})}).catch(function(h){console.log(h),alert(h)})}function y(h){axios.post("/api/decks/"+h+"/addquestion",{question_id:s}).then(function(S){const _=l.find(q=>q.id===h);t(0,i=[...i,_]),t(1,l=l.filter(q=>q.id!==h))}).catch(function(S){alert(S)})}function b(h){axios.post("/api/decks/"+h+"/removequestion",{question_id:s}).then(function(S){const _=i.find(q=>q.id===h);t(1,l=[...l,_]),t(0,i=i.filter(q=>q.id!==h))}).catch(function(S){alert(S)})}function g(){r&&axios.post("/api/decks",{name:r}).then(function(h){const S=h.data;t(1,l=[...l,S]),y(S.id),t(4,r="")}).catch(function(h){alert(h)})}function w(){o&&o.focus()}function M(h){ae[h?"unshift":"push"](()=>{o=h,t(5,o)})}function E(){f=this.value,t(2,f)}const T=h=>b(h.id),O=h=>y(h.id);function x(){r=this.value,t(4,r)}const H=()=>g();return n.$$set=h=>{"questionId"in h&&t(10,s=h.questionId)},n.$$.update=()=>{n.$$.dirty&6&&t(6,a=l==null?void 0:l.filter(h=>h.name.toLowerCase().includes(f.toLowerCase()))),n.$$.dirty&5&&t(3,m=i==null?void 0:i.filter(h=>h.name.toLowerCase().includes(f.toLowerCase()))),n.$$.dirty&8&&w()},[i,l,f,m,r,o,a,y,b,g,s,M,E,T,O,x,H]}class Sn extends he{constructor(e){super(),ke(this,e,Cn,An,be,{questionId:10})}}function dt(n,e,t){const s=n.slice();return s[23]=e[t],s[24]=e,s[25]=t,s}function Ln(n){let e;return{c(){e=u("p"),e.textContent="Loading ..."},m(t,s){v(t,e,s)},p:K,i:K,o:K,d(t){t&&k(e)}}}function qn(n){let e,t,s,i;const l=[Tn,Mn],r=[];function o(f,a){return f[9]?0:1}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),s=le()},m(f,a){r[e].m(f,a),v(f,s,a),i=!0},p(f,a){let m=e;e=o(f),e===m?r[e].p(f,a):(we(),U(r[m],1,1,()=>{r[m]=null}),pe(),t=r[e],t?t.p(f,a):(t=r[e]=l[e](f),t.c()),P(t,1),t.m(s.parentNode,s))},i(f){i||(P(t),i=!0)},o(f){U(t),i=!1},d(f){f&&k(s),r[e].d(f)}}}function Mn(n){let e,t,s,i,l,r,o,f,a,m,p,y,b,g,w,M,E,T,O,x,H,h,S,_,q,A,se,Ce,fe,Ve,Be,Re=n[0].id,Ge,Ke,_e,De,Je,$=n[0].is_invalid&&mt(),ee=n[0].needs_review&&bt(),B=n[0].case&&_t(n),R=n[0].text&&wt(n),I=n[0].images&&n[0].images.length>0&&pt(n),G=!n[3]&&n[0].hint&&gt(n);const We=[zn,Hn,On],ce=[];function Xe(C,j){return C[0].type==="mc"?0:C[0].answers.length===0?1:2}a=Xe(n),m=ce[a]=We[a](n);let J=!n[3]&&n[1].isAnswered&&n[0].comment&&kt(n),W=n[1].isAnswered&&n[6]!==-1&&vt(n),X=n[5]&&yt(n),ne=At(n),Y=!n[1].isAnswered&&!n[3]&&n[0].type!=="card"&&Ct(n);return{c(){e=u("div"),$&&$.c(),t=L(),ee&&ee.c(),s=L(),B&&B.c(),i=L(),l=u("div"),R&&R.c(),r=L(),I&&I.c(),o=L(),G&&G.c(),f=L(),m.c(),p=L(),J&&J.c(),y=L(),b=u("div"),g=u("div"),w=u("div"),M=u("button"),M.textContent="More",E=L(),T=u("ul"),W&&W.c(),O=L(),x=u("li"),H=u("a"),h=u("i"),S=ge(" Open in new tab"),q=L(),A=u("li"),A.innerHTML='<hr class="dropdown-divider"/>',se=L(),Ce=u("li"),fe=u("button"),fe.innerHTML='<i class="bi bi-pencil"></i> Edit question',Ve=L(),X&&X.c(),Be=L(),ne.c(),Ge=L(),Y&&Y.c(),c(l,"class","row border-start border-3 border-dark m-1 mb-3 pt-2"),c(M,"class","btn btn-outline-secondary btn-sm dropdown-toggle"),c(M,"type","button"),c(M,"data-bs-toggle","dropdown"),c(M,"aria-expanded","false"),c(h,"class","bi bi-box-arrow-up-right"),c(H,"class","dropdown-item btn btn-sm"),c(H,"href",_="/questions/"+n[0].id),c(H,"target","_blank"),c(H,"role","button"),c(fe,"type","button"),c(fe,"class","dropdown-item btn btn-sm"),c(T,"class","dropdown-menu"),c(w,"class","btn-group me-1"),c(g,"class","d-flex justify-content-end"),c(b,"class","row mt-1 mb-1 pt-2"),c(e,"id",Ke="question"+n[0].id),c(e,"class","px-2 py-2 border rounded-3 shadow-sm bg-light-subtle"),c(e,"style","")},m(C,j){v(C,e,j),$&&$.m(e,null),d(e,t),ee&&ee.m(e,null),d(e,s),B&&B.m(e,null),d(e,i),d(e,l),R&&R.m(l,null),d(l,r),I&&I.m(l,null),d(e,o),G&&G.m(e,null),d(e,f),ce[a].m(e,null),d(e,p),J&&J.m(e,null),d(e,y),d(e,b),d(b,g),d(g,w),d(w,M),d(w,E),d(w,T),W&&W.m(T,null),d(T,O),d(T,x),d(x,H),d(H,h),d(H,S),d(T,q),d(T,A),d(T,se),d(T,Ce),d(Ce,fe),d(T,Ve),X&&X.m(T,null),d(g,Be),ne.m(g,null),d(e,Ge),Y&&Y.m(e,null),_e=!0,De||(Je=D(fe,"click",V(n[11])),De=!0)},p(C,j){C[0].is_invalid?$||($=mt(),$.c(),$.m(e,t)):$&&($.d(1),$=null),C[0].needs_review?ee||(ee=bt(),ee.c(),ee.m(e,s)):ee&&(ee.d(1),ee=null),C[0].case?B?B.p(C,j):(B=_t(C),B.c(),B.m(e,i)):B&&(B.d(1),B=null),C[0].text?R?R.p(C,j):(R=wt(C),R.c(),R.m(l,r)):R&&(R.d(1),R=null),C[0].images&&C[0].images.length>0?I?(I.p(C,j),j&1&&P(I,1)):(I=pt(C),I.c(),P(I,1),I.m(l,null)):I&&(we(),U(I,1,1,()=>{I=null}),pe()),!C[3]&&C[0].hint?G?G.p(C,j):(G=gt(C),G.c(),G.m(e,f)):G&&(G.d(1),G=null);let Ie=a;a=Xe(C),a===Ie?ce[a].p(C,j):(we(),U(ce[Ie],1,1,()=>{ce[Ie]=null}),pe(),m=ce[a],m?m.p(C,j):(m=ce[a]=We[a](C),m.c()),P(m,1),m.m(e,p)),!C[3]&&C[1].isAnswered&&C[0].comment?J?J.p(C,j):(J=kt(C),J.c(),J.m(e,y)):J&&(J.d(1),J=null),C[1].isAnswered&&C[6]!==-1?W?W.p(C,j):(W=vt(C),W.c(),W.m(T,O)):W&&(W.d(1),W=null),(!_e||j&1&&_!==(_="/questions/"+C[0].id))&&c(H,"href",_),C[5]?X?X.p(C,j):(X=yt(C),X.c(),X.m(T,null)):X&&(X.d(1),X=null),j&1&&be(Re,Re=C[0].id)?(we(),U(ne,1,1,K),pe(),ne=At(C),ne.c(),P(ne,1),ne.m(g,null)):ne.p(C,j),!C[1].isAnswered&&!C[3]&&C[0].type!=="card"?Y?Y.p(C,j):(Y=Ct(C),Y.c(),Y.m(e,null)):Y&&(Y.d(1),Y=null),(!_e||j&1&&Ke!==(Ke="question"+C[0].id))&&c(e,"id",Ke)},i(C){_e||(P(I),P(m),P(ne),_e=!0)},o(C){U(I),U(m),U(ne),_e=!1},d(C){C&&k(e),$&&$.d(),ee&&ee.d(),B&&B.d(),R&&R.d(),I&&I.d(),G&&G.d(),ce[a].d(),J&&J.d(),W&&W.d(),X&&X.d(),ne.d(C),Y&&Y.d(),De=!1,Je()}}}function Tn(n){let e,t,s,i;function l(o){n[14](o)}let r={toggleEditor:n[11]};return n[0]!==void 0&&(r.question=n[0]),t=new It({props:r}),ae.push(()=>de(t,"question",l)),{c(){e=u("div"),Ae(t.$$.fragment),c(e,"class","my-5 pt-1 pb-3 border-dark"),oe(e,"border-top","dotted"),oe(e,"border-bottom","dotted"),oe(e,"border-width","1px")},m(o,f){v(o,e,f),ye(t,e,null),i=!0},p(o,f){const a={};!s&&f&1&&(s=!0,a.question=o[0],me(()=>s=!1)),t.$set(a)},i(o){i||(P(t.$$.fragment,o),i=!0)},o(o){U(t.$$.fragment,o),i=!1},d(o){o&&k(e),ve(t)}}}function mt(n){let e;return{c(){e=u("div"),e.innerHTML='<div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-cone-striped"></i> <strong>Question is marked invalid</strong> and safe to skip!</div></div>',c(e,"class","row")},m(t,s){v(t,e,s)},d(t){t&&k(e)}}}function bt(n){let e;return{c(){e=u("div"),e.innerHTML='<div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-eraser-fill"></i> <strong>Question needs review</strong> - Please review the question and answer choices and make sure they are correct and clear. Afterwards, remove the &quot;Needs review&quot; flag.</div></div>',c(e,"class","row")},m(t,s){v(t,e,s)},d(t){t&&k(e)}}}function _t(n){let e,t,s,i,l=F.sanitize(n[0].case.text)+"";return{c(){e=u("div"),t=u("p"),t.innerHTML='<i class="bi bi-clipboard2-pulse"></i> CASE',s=L(),i=u("p"),c(t,"class","small fw-bold"),c(i,"class","trix-content"),oe(e,"box-shadow","4px 4px rgba(0,0,0,.2)"),c(e,"class","alert alert-primary"),c(e,"role","alert")},m(r,o){v(r,e,o),d(e,t),d(e,s),d(e,i),i.innerHTML=l},p(r,o){o&1&&l!==(l=F.sanitize(r[0].case.text)+"")&&(i.innerHTML=l)},d(r){r&&k(e)}}}function wt(n){let e,t,s=F.sanitize(n[0].text)+"";return{c(){e=u("div"),t=u("p"),c(t,"id","questionText"),c(t,"class","trix-content"),c(e,"class","col-lg")},m(i,l){v(i,e,l),d(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=F.sanitize(i[0].text)+"")&&(t.innerHTML=s)},d(i){i&&k(e)}}}function pt(n){let e,t,s;function i(r){n[15](r)}let l={};return n[0].images!==void 0&&(l.images=n[0].images),e=new kn({props:l}),ae.push(()=>de(e,"images",i)),{c(){Ae(e.$$.fragment)},m(r,o){ye(e,r,o),s=!0},p(r,o){const f={};!t&&o&1&&(t=!0,f.images=r[0].images,me(()=>t=!1)),e.$set(f)},i(r){s||(P(e.$$.fragment,r),s=!0)},o(r){U(e.$$.fragment,r),s=!1},d(r){ve(e,r)}}}function gt(n){let e;function t(l,r){return l[10]?Kn:En}let s=t(n),i=s(n);return{c(){i.c(),e=le()},m(l,r){i.m(l,r),v(l,e,r)},p(l,r){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){l&&k(e),i.d(l)}}}function En(n){let e,t,s;return{c(){e=u("button"),e.innerHTML='<i class="bi bi-question-circle"></i> Show hint',c(e,"type","button"),c(e,"class","btn btn-outline-secondary btn-sm mb-3")},m(i,l){v(i,e,l),t||(s=D(e,"click",V(n[16])),t=!0)},p:K,d(i){i&&k(e),t=!1,s()}}}function Kn(n){let e,t,s=F.sanitize(n[0].hint)+"";return{c(){e=u("div"),t=u("p"),c(e,"class","row border-start border-3 border-secondary-subtle m-1 mt-3 mb-3")},m(i,l){v(i,e,l),d(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=F.sanitize(i[0].hint)+"")&&(t.innerHTML=s)},d(i){i&&k(e)}}}function On(n){let e,t,s;function i(r){n[21](r)}let l={submitAnswer:n[7],hasAnswer:!!n[6]};return n[0].answers[0]!==void 0&&(l.answer=n[0].answers[0]),e=new dn({props:l}),ae.push(()=>de(e,"answer",i)),{c(){Ae(e.$$.fragment)},m(r,o){ye(e,r,o),s=!0},p(r,o){const f={};o&128&&(f.submitAnswer=r[7]),o&64&&(f.hasAnswer=!!r[6]),!t&&o&1&&(t=!0,f.answer=r[0].answers[0],me(()=>t=!1)),e.$set(f)},i(r){s||(P(e.$$.fragment,r),s=!0)},o(r){U(e.$$.fragment,r),s=!1},d(r){ve(e,r)}}}function Hn(n){let e,t;return e=new _n({props:{submitAnswer:n[7],hasAnswer:!!n[6]}}),{c(){Ae(e.$$.fragment)},m(s,i){ye(e,s,i),t=!0},p(s,i){const l={};i&128&&(l.submitAnswer=s[7]),i&64&&(l.hasAnswer=!!s[6]),e.$set(l)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function zn(n){let e=[],t=new Map,s,i,l=ue(n[0].answers);const r=o=>o[23].id;for(let o=0;o<l.length;o+=1){let f=dt(n,l,o),a=r(f);t.set(a,e[o]=ht(a,f))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();s=le()},m(o,f){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,f);v(o,s,f),i=!0},p(o,f){f&155&&(l=ue(o[0].answers),we(),e=Lt(e,f,r,1,o,l,t,s.parentNode,zt,ht,s,dt),pe())},i(o){if(!i){for(let f=0;f<l.length;f+=1)P(e[f]);i=!0}},o(o){for(let f=0;f<e.length;f+=1)U(e[f]);i=!1},d(o){o&&k(s);for(let f=0;f<e.length;f+=1)e[f].d(o)}}}function ht(n,e){let t,s,i,l,r,o,f;function a(g){e[17](g,e[23],e[24],e[25])}function m(g){e[18](g,e[23])}function p(g){e[19](g)}function y(g){e[20](g)}let b={submitAnswer:e[7],questionIsAnswered:e[1].isAnswered,answerNumber:e[25]+1};return e[23]!==void 0&&(b.answer=e[23]),e[1].answerContext[e[23].id]!==void 0&&(b.answerContext=e[1].answerContext[e[23].id]),e[3]!==void 0&&(b.examMode=e[3]),e[4]!==void 0&&(b.settingsShowAnswerStats=e[4]),s=new on({props:b}),ae.push(()=>de(s,"answer",a)),ae.push(()=>de(s,"answerContext",m)),ae.push(()=>de(s,"examMode",p)),ae.push(()=>de(s,"settingsShowAnswerStats",y)),{key:n,first:null,c(){t=le(),Ae(s.$$.fragment),this.first=t},m(g,w){v(g,t,w),ye(s,g,w),f=!0},p(g,w){e=g;const M={};w&128&&(M.submitAnswer=e[7]),w&2&&(M.questionIsAnswered=e[1].isAnswered),w&1&&(M.answerNumber=e[25]+1),!i&&w&1&&(i=!0,M.answer=e[23],me(()=>i=!1)),!l&&w&3&&(l=!0,M.answerContext=e[1].answerContext[e[23].id],me(()=>l=!1)),!r&&w&8&&(r=!0,M.examMode=e[3],me(()=>r=!1)),!o&&w&16&&(o=!0,M.settingsShowAnswerStats=e[4],me(()=>o=!1)),s.$set(M)},i(g){f||(P(s.$$.fragment,g),f=!0)},o(g){U(s.$$.fragment,g),f=!1},d(g){g&&k(t),ve(s,g)}}}function kt(n){let e,t,s,i=F.sanitize(n[0].comment)+"";return{c(){e=u("div"),t=u("div"),s=u("div"),c(s,"class","alert alert-secondary mt-1 trix-content"),c(s,"role","alert"),c(t,"class","col"),c(e,"class","row")},m(l,r){v(l,e,r),d(e,t),d(t,s),s.innerHTML=i},p(l,r){r&1&&i!==(i=F.sanitize(l[0].comment)+"")&&(s.innerHTML=i)},d(l){l&&k(e)}}}function vt(n){let e,t,s,i;return{c(){e=u("li"),t=u("button"),t.innerHTML='<i class="bi bi-arrow-counterclockwise"></i> Reset answer',c(t,"type","button"),c(t,"class","dropdown-item btn btn-sm")},m(l,r){v(l,e,r),d(e,t),s||(i=D(t,"click",V(function(){Ot(n[8])&&n[8].apply(this,arguments)})),s=!0)},p(l,r){n=l},d(l){l&&k(e),s=!1,i()}}}function yt(n){let e,t,s,i,l,r,o;return{c(){e=u("li"),e.innerHTML='<hr class="dropdown-divider"/>',t=L(),s=u("li"),i=u("a"),l=u("i"),r=ge(" Open in deck editor"),c(l,"class","bi bi-collection"),c(i,"class","dropdown-item btn btn-sm"),c(i,"href",o="/decks/"+n[5]+"/questions/edit?question_id="+n[0].id),c(i,"role","button")},m(f,a){v(f,e,a),v(f,t,a),v(f,s,a),d(s,i),d(i,l),d(i,r)},p(f,a){a&33&&o!==(o="/decks/"+f[5]+"/questions/edit?question_id="+f[0].id)&&c(i,"href",o)},d(f){f&&(k(e),k(t),k(s))}}}function At(n){let e,t;return e=new Sn({props:{questionId:n[0].id}}),{c(){Ae(e.$$.fragment)},m(s,i){ye(e,s,i),t=!0},p(s,i){const l={};i&1&&(l.questionId=s[0].id),e.$set(l)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){ve(e,s)}}}function Ct(n){let e,t,s,i;return{c(){e=u("div"),t=u("button"),t.textContent="→ Show answer",c(t,"type","button"),c(t,"class","btn btn-outline-secondary btn-sm"),c(e,"class","mt-3")},m(l,r){v(l,e,r),d(e,t),s||(i=D(t,"click",V(n[22])),s=!0)},p:K,d(l){l&&k(e),s=!1,i()}}}function Nn(n){let e,t,s,i;const l=[qn,Ln],r=[];function o(f,a){return f[0]?0:1}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),s=le()},m(f,a){r[e].m(f,a),v(f,s,a),i=!0},p(f,[a]){let m=e;e=o(f),e===m?r[e].p(f,a):(we(),U(r[m],1,1,()=>{r[m]=null}),pe(),t=r[e],t?t.p(f,a):(t=r[e]=l[e](f),t.c()),P(t,1),t.m(s.parentNode,s))},i(f){i||(P(t),i=!0)},o(f){U(t),i=!1},d(f){f&&k(s),r[e].d(f)}}}function Dn(n){const e=n.target;!e.classList.contains("bg-danger-subtle")&&!e.classList.contains("bg-warning-subtle")&&!e.classList.contains("bg-success-subtle")?e.classList.add("bg-success-subtle"):e.classList.contains("bg-success-subtle")?(e.classList.remove("bg-success-subtle"),e.classList.add("bg-danger-subtle")):e.classList.contains("bg-danger-subtle")?(e.classList.remove("bg-danger-subtle"),e.classList.add("bg-warning-subtle")):e.classList.contains("bg-warning-subtle")&&e.classList.remove("bg-warning-subtle")}function In(n,e,t){let{deckId:s}=e,{question:i}=e,{questionContext:l}=e,{helpUsed:r}=e,{answerChoice:o}=e,{submitAnswer:f}=e,{deleteAnswer:a}=e,{examMode:m}=e,{updateCurrentQuestionData:p}=e,{settingsShuffleAnswers:y}=e,{settingsShowAnswerStats:b}=e;var g=!1,w=l.isAnswered;function M(){const A=!g;A&&p?p().then(()=>{t(9,g=A)}):t(9,g=A)}function E(A){i=A,t(0,i),t(13,y),t(1,l)}function T(A){n.$$.not_equal(i.images,A)&&(i.images=A,t(0,i),t(13,y),t(1,l))}const O=()=>{t(10,w=!0),t(2,r=!0)};function x(A,se,Ce,fe){Ce[fe]=A,t(0,i),t(13,y),t(1,l)}function H(A,se){n.$$.not_equal(l.answerContext[se.id],A)&&(l.answerContext[se.id]=A,t(1,l))}function h(A){m=A,t(3,m)}function S(A){b=A,t(4,b)}function _(A){n.$$.not_equal(i.answers[0],A)&&(i.answers[0]=A,t(0,i),t(13,y),t(1,l))}const q=()=>f();return n.$$set=A=>{"deckId"in A&&t(5,s=A.deckId),"question"in A&&t(0,i=A.question),"questionContext"in A&&t(1,l=A.questionContext),"helpUsed"in A&&t(2,r=A.helpUsed),"answerChoice"in A&&t(6,o=A.answerChoice),"submitAnswer"in A&&t(7,f=A.submitAnswer),"deleteAnswer"in A&&t(8,a=A.deleteAnswer),"examMode"in A&&t(3,m=A.examMode),"updateCurrentQuestionData"in A&&t(12,p=A.updateCurrentQuestionData),"settingsShuffleAnswers"in A&&t(13,y=A.settingsShuffleAnswers),"settingsShowAnswerStats"in A&&t(4,b=A.settingsShowAnswerStats)},n.$$.update=()=>{n.$$.dirty&8195&&(i.answers.forEach((A,se)=>{A.badgeText="ABCDEFGHIJKLMN".charAt(se)}),i&&i.type==="mc"&&y&&!l.isAnswered&&!Object.values(l.answerContext).some(A=>A.isSelectedAnswer)&&t(0,i.answers=Dt.shuffle(i.answers),i)),n.$$.dirty&3&&(t(10,w=l.isAnswered),t(2,r=l.isAnswered)),n.$$.dirty&1&&(()=>{var A=document.querySelectorAll("#questionText li");[].map.call(A,function(se){se.addEventListener("click",Dn,!1)})})()},[i,l,r,m,b,s,o,f,a,g,w,M,p,y,E,T,O,x,H,h,S,_,q]}class Vn extends he{constructor(e){super(),ke(this,e,In,Nn,be,{deckId:5,question:0,questionContext:1,helpUsed:2,answerChoice:6,submitAnswer:7,deleteAnswer:8,examMode:3,updateCurrentQuestionData:12,settingsShuffleAnswers:13,settingsShowAnswerStats:4})}}export{Vn as S,te as h};
