import{d as me,p as ge,a as v,s as Y,f as d,b as T,i as f,j as a,c as l,t as se,r as z,e as r,h as he,m as ke,g as s,u as L,k as Z,n as Ve}from"./if-BKKSZk4S.js";import{h as ye,Q as Be,k as He}from"./QuestionForm-DKpxFnZj.js";import{a as le,p as F,e as Ce,i as Ie}from"./event-modifiers-Dk_SUsNJ.js";import{h as de}from"./html-KMz9BxYn.js";import{p as fe}from"./props-CpDAvbNA.js";import{r as ce}from"./legacy-client-DxtlDGnO.js";import{p as ve,d as Ke}from"./purify.es-Dnvgf1Dd.js";import{_ as Pe}from"./lodash-DjGC5Q8M.js";import{s as Me}from"./class-BfJg_ovI.js";import{o as pe}from"./index-client-D4bTxURC.js";import{b as De}from"./input-5B9WpH3T.js";import{b as Re}from"./this-Dh2OgrC7.js";var Ue=(V,e)=>e.submitAnswer(e.answer.id),Ge=d('<div class="col-1 border-start-3 cursor-pointer svelte-1tl7wkh"><p class="badge text-bg-light my-0"> </p></div>'),Je=d('<div class="col-1 border-start-3"><p class="badge text-bg-light my-0"> </p></div>'),We=(V,e)=>e.submitAnswer(e.answer.id),Xe=d('<div class="col-9 cursor-pointer svelte-1tl7wkh"><p class="px-1 my-0 trix-content"><!></p></div>'),Ye=d('<div class="col-9"><p class="px-1 my-0 trix-content"><!></p></div>'),Ze=d('<span title="Percentage of users who chose this answer"> </span>'),$e=d('<div class="d-flex justify-content-end align-items-center"><button type="button" class="btn btn-sm p-0"><span class="text-secondary">&cross;</span></button> <div class="vr mx-1"></div> <button type="button" class="btn btn-sm p-0"><span class="text-secondary">&check;</span></button></div>'),et=d('<span class="text-light fw-bold fs-4">&check;</span>'),tt=d('<span class="text-light fw-bold fs-4">&#8672;</span>'),at=d('<span class="text-light fw-bold fs-4">&cross;</span>'),st=d('<span class="text-secondary fw-bold fs-4">&check;</span>'),nt=d('<div class="col-1 border-3"></div> <div class="col-9"><p class="p-1 trix-content"><!></p></div>',1),rt=d('<div style="min-height: 3.6rem; box-shadow: 4px 4px rgba(0,0,0,.2);"><!> <!> <div class="col-2"><div class="d-flex align-items-center justify-content-end"><!> <!></div></div></div> <div class="row ms-1 mb-2 me-1"><!></div>',1);function it(V,e){ge(e,!0);var t=Y(void 0),i=Y(void 0),y=e.answer.badgeText;ce(()=>{ye.unbind(`${y}, ${e.answerNumber}`,"questions"),ye(`${y}, ${e.answerNumber}`,"questions",function(){e.submitAnswer(e.answer.id)})}),ce(()=>{e.answer&&(v(t,""),e.examMode?v(i,""):e.questionIsAnswered?(v(i,""),e.answerContext.isCorrectAnswer?v(t,"border-success"):e.answerContext.isSubmittedAnswer&&v(t,"border-danger")):e.answerContext.isSelectedAnswer&&(v(i,""),v(t,"border-danger")))});var g=rt(),C=T(g);let p;var q=a(C);{var N=u=>{var m=Ge();m.__click=[Ue,e];var n=a(m),c=a(n);se(()=>ke(c,y)),r(u,m)},j=u=>{var m=Je(),n=a(m),c=a(n);se(()=>ke(c,y)),r(u,m)};f(q,u=>{!e.questionIsAnswered&&!e.answerContext.isSubmittedAnswer?u(N):u(j,!1)})}var h=l(q,2);{var x=u=>{var m=Xe();m.__click=[We,e];var n=a(m),c=a(n);de(c,()=>ve.sanitize(e.answer.text)),r(u,m)},S=u=>{var m=Ye(),n=a(m),c=a(n);de(c,()=>ve.sanitize(e.answer.text)),r(u,m)};f(h,u=>{!e.questionIsAnswered&&!e.answerContext.isSelectedAnswer?u(x):u(S,!1)})}var B=l(h,2),_=a(B),b=a(_);{var P=u=>{var m=Ze();let n;var c=a(m);se(A=>{n=Me(m,1,"badge",null,n,A),ke(c,`${e.answer.answer_percentage??""}%`)},[()=>({"text-dark":!e.answerContext.isSubmittedAnswer&&!e.answerContext.isCorrectAnswer})]),r(u,m)};f(b,u=>{e.questionIsAnswered&&!e.examMode&&e.settingsShowAnswerStats&&e.answer.answer_percentage!=null&&u(P)})}var G=l(b,2);{var ue=u=>{var m=$e(),n=a(m),c=L(()=>F(()=>v(i,z(i)==="incorrect"?"":"incorrect",!0)));n.__click=function(...R){s(c)?.apply(this,R)};var A=l(n,4),k=L(()=>F(()=>v(i,z(i)==="correct"?"":"correct",!0)));A.__click=function(...R){s(k)?.apply(this,R)},r(u,m)},J=u=>{var m=Z(),n=T(m);{var c=k=>{var R=et();r(k,R)},A=k=>{var R=Z(),we=T(R);{var xe=ae=>{var ne=tt();r(ae,ne)},be=ae=>{var ne=Z(),I=T(ne);{var M=K=>{var U=at();r(K,U)},H=K=>{var U=Z(),_e=T(U);{var ie=re=>{var oe=st();r(re,oe)};f(_e,re=>{e.examMode&&e.answerContext.isSubmittedAnswer&&re(ie)},!0)}r(K,U)};f(I,K=>{!e.examMode&&e.answerContext.isSubmittedAnswer?K(M):K(H,!1)},!0)}r(ae,ne)};f(we,ae=>{!e.examMode&&e.answerContext.isCorrectAnswer&&!e.answerContext.isSubmittedAnswer&&e.questionIsAnswered?ae(xe):ae(be,!1)},!0)}r(k,R)};f(n,k=>{!e.examMode&&e.answerContext.isCorrectAnswer&&e.answerContext.isSubmittedAnswer?k(c):k(A,!1)},!0)}r(u,m)};f(G,u=>{!e.questionIsAnswered&&!e.answerContext.isSelectedAnswer?u(ue):u(J,!1)})}var W=l(C,2),$=a(W);{var ee=u=>{var m=nt(),n=l(T(m),2),c=a(n),A=a(c);de(A,()=>ve.sanitize(e.answer.hint)),r(u,m)};f($,u=>{!e.examMode&&e.answer.hint&&(e.questionIsAnswered||e.answerContext.isSelectedAnswer)&&u(ee)})}se(u=>{le(C,"id",`answer${e.answer.id??""}`),p=Me(C,1,`row border border-3 rounded m-1 py-2 d-flex align-items-center ${z(t)??""}`,"svelte-1tl7wkh",p,u)},[()=>({"bg-secondary-subtle":e.examMode||!e.questionIsAnswered&&!e.answerContext.isSelectedAnswer&&!e.answerContext.isSubmittedAnswer||e.questionIsAnswered&&!e.answerContext.isSubmittedAnswer&&!e.answerContext.isCorrectAnswer,"text-dark":e.examMode||!e.questionIsAnswered&&!e.answerContext.isSelectedAnswer&&!e.answerContext.isSubmittedAnswer||e.questionIsAnswered&&!e.answerContext.isSubmittedAnswer&&!e.answerContext.isCorrectAnswer,"text-bg-success":!e.examMode&&e.questionIsAnswered&&e.answerContext.isCorrectAnswer,"text-bg-danger":!e.examMode&&e.answerContext.isSelectedAnswer&&!e.answerContext.isCorrectAnswer,"bg-incorrect":z(i)==="incorrect","bg-correct":z(i)==="correct"})]),r(V,g),he()}me(["click"]);var ot=d('<div class="row"><div class="col-md-6 mb-1"><button type="button" class="btn btn-danger btn-sm w-100">&cross; Ask me again</button></div> <div class="col-md-6 mb-1"><button type="button" class="btn btn-success btn-sm w-100">&check; OK</button></div></div>'),dt=d('<div style="box-shadow: 4px 4px rgba(0,0,0,.2);" class="row border-start border-3 rounded bg-secondary-subtle m-1 mb-3 p-2"><p class="p-1"><!></p></div> <!>',1),vt=d('<div class="row"><div class="col-md"><button type="button" class="btn btn-warning btn-sm w-100">Show answer</button></div></div>');function lt(V,e){ge(e,!0);var t=Y(!1);ce(()=>{e.hasAnswer?v(t,!0):v(t,!1)});function i(){v(t,!z(t))}var y=Z(),g=T(y);{var C=q=>{var N=dt(),j=T(N),h=a(j),x=a(h);de(x,()=>ve.sanitize(e.answer.text));var S=l(j,2);{var B=_=>{var b=ot(),P=a(b),G=a(P),ue=L(()=>F(()=>e.submitAnswer()));G.__click=function(...ee){s(ue)?.apply(this,ee)};var J=l(P,2),W=a(J),$=L(()=>F(()=>e.submitAnswer(e.answer.id)));W.__click=function(...ee){s($)?.apply(this,ee)},r(_,b)};f(S,_=>{e.hasAnswer||_(B)})}r(q,N)},p=q=>{var N=vt(),j=a(N),h=a(j),x=L(()=>F(i));h.__click=function(...S){s(x)?.apply(this,S)},r(q,N)};f(g,q=>{z(t)?q(C):q(p,!1)})}r(V,y),he()}me(["click"]);var ct=d('<div class="row"><div class="col-md-6 mb-1"><button type="button" class="btn btn-danger btn-sm w-100">Ask me again</button></div> <div class="col-md-6 mb-1"><button type="button" class="btn btn-success btn-sm w-100">I got it!</button></div></div>');function ut(V,e){ge(e,!0);var t=Z(),i=T(t);{var y=g=>{var C=ct(),p=a(C),q=a(p),N=L(()=>F(()=>e.submitAnswer()));q.__click=function(...S){s(N)?.apply(this,S)};var j=l(p,2),h=a(j),x=L(()=>F(()=>e.submitAnswer(-1)));h.__click=function(...S){s(x)?.apply(this,S)},r(g,C)};f(i,g=>{e.hasAnswer||g(y)})}r(V,t),he()}me(["click"]);var bt=(V,e,t)=>e(s(t).id),_t=d('<div class="col"><div class="card" style="max-width: 18rem; cursor: pointer;"><img class="card-img-top" alt=""/></div></div>'),wt=d('<div class="col-lg"><div class="row row-cols-1 row-cols-sm-3 g-4"></div></div>'),ft=d('<div class="img-fullscreen svelte-1kr8lcu"><p class="bg-white text-end"><button type="button" class="btn-close"></button></p> <div class="text-center"><img class="img-fluid border border-5 border-white" alt=""/></div></div>');function mt(V,e){ge(e,!0);let t=fe(e,"images",19,()=>[]);var i=Y(!1),y=Y(void 0);ce(()=>{z(i)?ye.setScope("images"):ye.setScope("questions")}),pe(()=>{ye("esc","images",function(h,x){z(i)&&v(i,!1)})});var g;function C(h){g&&g.cancel(),g=Ke(()=>{v(i,!z(i)),v(y,t().find(x=>x.id===h),!0)},100,{maxWait:200}),g()}var p=Z(),q=T(p);{var N=h=>{var x=wt(),S=a(x);Ce(S,21,t,B=>B.id,(B,_)=>{var b=_t(),P=a(b),G=a(P);G.__click=[bt,C,_],se(()=>le(G,"src",`/${s(_).path??""}`)),r(B,b)}),r(h,x)},j=h=>{var x=ft();x.__click=C;var S=a(x),B=a(S),_=L(()=>F(()=>v(i,!z(i))));B.__click=function(...G){s(_)?.apply(this,G)};var b=l(S,2),P=a(b);se(()=>le(P,"src",`/${z(y).path??""}`)),r(h,x)};f(q,h=>{z(i)?h(j,!1):h(N)})}r(V,p),he()}me(["click"]);var gt=d('<input type="text" class="form-control mb-3" placeholder="Filter decks ..."/>'),ht=d('<div class="row mb-1"><div class="col-9 text-truncate"><a class="link-dark"> </a></div> <div class="col-3 d-grid gap-4"><button class="btn btn-sm btn-outline-secondary float-end">Remove</button></div></div>'),xt=d("<hr/>"),At=d('<div class="row mb-1"><div class="col-9 text-truncate"><a class="link-dark"> </a></div> <div class="col-3 d-grid gap-4"><button class="btn btn-sm btn-primary float-end">Add</button></div></div>'),kt=d('<div class="alert alert-light text-center" role="alert">No decks found</div>'),yt=d("<!> <!> <!> <!> <!>",1),Ct=d('<div class="d-flex justify-content-center"><div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading decks ...</span></div></div>'),St=d('<button class="btn btn-outline-secondary btn-sm" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasAddToDeck" aria-controls="offcanvasAddToDeck"><i class="bi bi-collection"></i> Add to deck</button> <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasAddToDeck" aria-labelledby="offcanvasAddToDeckLabel"><div class="offcanvas-header"><h5 id="offcanvasAddToDeckLabel">Add question to deck</h5> <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button></div> <div class="offcanvas-body pb-0"><!> <hr/> <div class="row sticky-bottom bg-white mt-3"><div class="col"><p>Create new deck:</p> <div class="mb-2"><input type="text" class="form-control" id="name" name="name" placeholder="My new deck ..."/></div> <button class="btn btn-sm btn-primary mb-3">Create deck and add question</button></div></div></div></div>',1);function qt(V,e){ge(e,!0);let t=Y(void 0),i=Y(void 0),y=Y(""),g=Y(void 0),C=Y("");pe(()=>{const n=document.getElementById("offcanvasAddToDeck");n.addEventListener("show.bs.offcanvas",c=>{p()}),n.addEventListener("shown.bs.offcanvas",c=>{h()}),n.addEventListener("hidden.bs.offcanvas",c=>{v(t,void 0),v(i,void 0),v(C,"")})});function p(){axios.get("/api/decks/withquestionids").then(function(n){var c=n.data;v(t,[],!0),v(i,[],!0),c.forEach(A=>{A.questions.some(k=>k.id===e.questionId)?v(t,[...s(t),{id:A.id,name:A.name}],!0):v(i,[...s(i),{id:A.id,name:A.name}],!0)})}).catch(function(n){console.log(n),alert(n)})}function q(n){axios.post("/api/decks/"+n+"/addquestion",{question_id:e.questionId}).then(function(c){const A=s(i).find(k=>k.id===n);v(t,[...s(t),A],!0),v(i,s(i).filter(k=>k.id!==n),!0)}).catch(function(c){alert(c)})}function N(n){axios.post("/api/decks/"+n+"/removequestion",{question_id:e.questionId}).then(function(c){const A=s(t).find(k=>k.id===n);v(i,[...s(i),A],!0),v(t,s(t).filter(k=>k.id!==n),!0)}).catch(function(c){alert(c)})}function j(){s(y)&&axios.post("/api/decks",{name:s(y)}).then(function(n){const c=n.data;v(i,[...s(i),c],!0),q(c.id),v(y,"")}).catch(function(n){alert(n)})}function h(){s(g)&&s(g).focus()}let x=L(()=>s(i)?.filter(n=>n.name.toLowerCase().includes(s(C).toLowerCase()))),S=L(()=>s(t)?.filter(n=>n.name.toLowerCase().includes(s(C).toLowerCase())));ce(()=>{s(S),h()});var B=St(),_=l(T(B),2),b=l(a(_),2),P=a(b);{var G=n=>{var c=yt(),A=T(c);{var k=I=>{var M=gt();Re(M,H=>v(g,H),()=>s(g)),De(M,()=>s(C),H=>v(C,H)),r(I,M)};f(A,I=>{s(t).length+s(i).length>10&&I(k)})}var R=l(A,2);Ce(R,17,()=>s(S),Ie,(I,M)=>{var H=ht(),K=a(H),U=a(K),_e=a(U),ie=l(K,2),re=a(ie),oe=L(()=>F(()=>N(s(M).id)));re.__click=function(...Ae){s(oe)?.apply(this,Ae)},se(()=>{le(U,"href",`/decks/${s(M).id??""}`),ke(_e,s(M).name)}),r(I,H)});var we=l(R,2);{var xe=I=>{var M=xt();r(I,M)};f(we,I=>{s(x).length>0&&s(S).length>0&&I(xe)})}var be=l(we,2);Ce(be,17,()=>s(x),Ie,(I,M)=>{var H=At(),K=a(H),U=a(K),_e=a(U),ie=l(K,2),re=a(ie),oe=L(()=>F(()=>q(s(M).id)));re.__click=function(...Ae){s(oe)?.apply(this,Ae)},se(()=>{le(U,"href",`/decks/${s(M).id??""}`),ke(_e,s(M).name)}),r(I,H)});var ae=l(be,2);{var ne=I=>{var M=kt();r(I,M)};f(ae,I=>{s(x).length===0&&s(S).length===0&&I(ne)})}r(n,c)},ue=n=>{var c=Ct();r(n,c)};f(P,n=>{s(t)?n(G):n(ue,!1)})}var J=l(P,4),W=a(J),$=l(a(W),2),ee=a($),u=l($,2),m=L(()=>F(()=>j()));u.__click=function(...n){s(m)?.apply(this,n)},De(ee,()=>s(y),n=>v(y,n)),r(V,B),he()}me(["click"]);var Lt=d('<div class="my-4 pt-1 pb-1 border-dark" style="border-top: dotted; border-bottom: dotted; border-width: 1px;"><!></div>'),It=d('<div class="row"><div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-cone-striped"></i> <strong>Question is marked invalid</strong> and safe to skip!</div></div></div>'),Mt=d('<div class="row"><div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-eraser-fill"></i> <strong>Question needs review</strong> - Please review the question and answer choices and make sure they are correct and clear. Afterwards, remove the "Needs review" flag.</div></div></div>'),Dt=d('<div style="box-shadow: 4px 4px rgba(0,0,0,.2);" class="alert alert-secondary" role="alert"><p class="small fw-bold"><i class="bi bi-clipboard2-pulse"></i> CASE</p> <p class="trix-content"><!></p></div>'),pt=d('<div class="col-lg"><p id="questionText" class="trix-content"><!></p></div>'),Tt=d('<div class="row border-start border-3 border-secondary-subtle m-1 mt-3 mb-3"><p><!></p></div>'),Et=d('<button type="button" class="btn btn-outline-secondary btn-sm mb-3"><i class="bi bi-question-circle"></i> Show hint</button>'),Qt=d('<div class="row"><div class="col"><div class="alert alert-secondary mt-1 trix-content" role="alert"><!></div></div></div>'),zt=d('<li><button type="button" class="dropdown-item btn btn-sm"><i class="bi bi-arrow-counterclockwise"></i> Reset answer</button></li>'),Nt=d('<li><hr class="dropdown-divider"/></li> <li><a class="dropdown-item btn btn-sm" role="button"><i class="bi bi-collection"></i> Open in deck editor</a></li>',1),jt=d('<div class="mt-3"><button type="button" class="btn btn-outline-secondary btn-sm">&rightarrow; Show answer</button></div>'),Ot=d('<div class="px-2 py-2 border rounded-3 shadow-sm bg-light-subtle" style=""><!> <!> <!> <div class="row border-start border-3 border-dark m-1 mb-3 pt-2"><!> <!></div> <!> <!> <!> <div class="row mt-1 mb-1 pt-2"><div class="d-flex justify-content-end"><div class="btn-group me-1"><button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">More</button> <ul class="dropdown-menu"><!> <li><a class="dropdown-item btn btn-sm" target="_blank" role="button"><i class="bi bi-box-arrow-up-right"></i> Open in new tab</a></li> <li><hr class="dropdown-divider"/></li> <li><button type="button" class="dropdown-item btn btn-sm"><i class="bi bi-pencil"></i> Edit question</button></li> <!></ul></div> <!></div></div> <!></div>'),Ft=d("<p>Loading ...</p>");function Zt(V,e){ge(e,!0);let t=fe(e,"question",15),i=fe(e,"questionContext",15),y=fe(e,"helpUsed",15),g=fe(e,"examMode",15),C=fe(e,"settingsShowAnswerStats",15);var p=Y(!1),q=Y(Ve(i().isAnswered));ce(()=>{t(),v(q,i().isAnswered,!0),y(i().isAnswered)}),ce(()=>{t(),(()=>{var _=document.querySelectorAll("#questionText li");[].map.call(_,function(b){b.addEventListener("click",N,!1)})})()}),ce(()=>{t(),t().answers.forEach((_,b)=>{_.badgeText="ABCDEFGHIJKLMN".charAt(b)}),t()&&t().type==="mc"&&e.settingsShuffleAnswers&&!i().isAnswered&&!Object.values(i().answerContext).some(_=>_.isSelectedAnswer)&&t(t().answers=Pe.shuffle(t().answers),!0)});function N(_){const b=_.target;!b.classList.contains("bg-danger-subtle")&&!b.classList.contains("bg-warning-subtle")&&!b.classList.contains("bg-success-subtle")?b.classList.add("bg-success-subtle"):b.classList.contains("bg-success-subtle")?(b.classList.remove("bg-success-subtle"),b.classList.add("bg-danger-subtle")):b.classList.contains("bg-danger-subtle")?(b.classList.remove("bg-danger-subtle"),b.classList.add("bg-warning-subtle")):b.classList.contains("bg-warning-subtle")&&b.classList.remove("bg-warning-subtle")}function j(){const _=!z(p);_?e.updateCurrentQuestionData?e.updateCurrentQuestionData().then(()=>{v(p,_)}):v(p,_):v(p,_)}var h=Z(),x=T(h);{var S=_=>{var b=Z(),P=T(b);{var G=J=>{var W=Lt(),$=a(W);Be($,{toggleEditor:j,get question(){return t()},set question(ee){t(ee)}}),r(J,W)},ue=J=>{var W=Ot(),$=a(W);{var ee=o=>{var w=It();r(o,w)};f($,o=>{t().is_invalid&&o(ee)})}var u=l($,2);{var m=o=>{var w=Mt();r(o,w)};f(u,o=>{t().needs_review&&o(m)})}var n=l(u,2);{var c=o=>{var w=Dt(),E=l(a(w),2),D=a(E);de(D,()=>ve.sanitize(t().case.text)),r(o,w)};f(n,o=>{t().case&&o(c)})}var A=l(n,2),k=a(A);{var R=o=>{var w=pt(),E=a(w),D=a(E);de(D,()=>ve.sanitize(t().text)),r(o,w)};f(k,o=>{t().text&&o(R)})}var we=l(k,2);{var xe=o=>{mt(o,{get images(){return t().images},set images(w){t(t().images=w,!0)}})};f(we,o=>{t().images&&t().images.length>0&&o(xe)})}var be=l(A,2);{var ae=o=>{var w=Z(),E=T(w);{var D=Q=>{var te=Tt(),O=a(te),Se=a(O);de(Se,()=>ve.sanitize(t().hint)),r(Q,te)},X=Q=>{var te=Et(),O=L(()=>F(()=>{v(q,!0),y(!0)}));te.__click=function(...Se){s(O)?.apply(this,Se)},r(Q,te)};f(E,Q=>{z(q)?Q(D):Q(X,!1)})}r(o,w)};f(be,o=>{!g()&&t().hint&&o(ae)})}var ne=l(be,2);{var I=o=>{var w=Z(),E=T(w);Ce(E,19,()=>t().answers,D=>D.id,(D,X,Q)=>{{let te=L(()=>s(Q)+1);it(D,{get submitAnswer(){return e.submitAnswer},get answerNumber(){return s(te)},get answer(){return t().answers[s(Q)]},set answer(O){t(t().answers[s(Q)]=O,!0)},get answerContext(){return i().answerContext[s(X).id]},set answerContext(O){i(i().answerContext[s(X).id]=O,!0)},get examMode(){return g()},set examMode(O){g(O)},get settingsShowAnswerStats(){return C()},set settingsShowAnswerStats(O){C(O)},get questionIsAnswered(){return i().isAnswered},set questionIsAnswered(O){i(i().isAnswered=O,!0)}})}}),r(o,w)},M=o=>{var w=Z(),E=T(w);{var D=Q=>{{let te=L(()=>!!e.answerChoice);ut(Q,{get submitAnswer(){return e.submitAnswer},get hasAnswer(){return s(te)}})}},X=Q=>{{let te=L(()=>!!e.answerChoice);lt(Q,{get submitAnswer(){return e.submitAnswer},get hasAnswer(){return s(te)},get answer(){return t().answers[0]},set answer(O){t(t().answers[0]=O,!0)}})}};f(E,Q=>{t().answers.length===0?Q(D):Q(X,!1)})}r(o,w)};f(ne,o=>{t().type==="mc"?o(I):o(M,!1)})}var H=l(ne,2);{var K=o=>{var w=Qt(),E=a(w),D=a(E),X=a(D);de(X,()=>ve.sanitize(t().comment)),r(o,w)};f(H,o=>{!g()&&i().isAnswered&&t().comment&&o(K)})}var U=l(H,2),_e=a(U),ie=a(_e),re=l(a(ie),2),oe=a(re);{var Ae=o=>{var w=zt(),E=a(w),D=L(()=>F(e.deleteAnswer));E.__click=function(...X){s(D)?.apply(this,X)},r(o,w)};f(oe,o=>{i().isAnswered&&e.answerChoice!==-1&&o(Ae)})}var qe=l(oe,2),Te=a(qe),Le=l(qe,4),Ee=a(Le),Qe=L(()=>F(j));Ee.__click=function(...o){s(Qe)?.apply(this,o)};var ze=l(Le,2);{var Ne=o=>{var w=Nt(),E=l(T(w),2),D=a(E);se(()=>le(D,"href",`/decks/${e.deckId??""}/questions/edit?question_id=${t().id??""}`)),r(o,w)};f(ze,o=>{e.deckId&&o(Ne)})}var je=l(ie,2);He(je,()=>t().id,o=>{qt(o,{get questionId(){return t().id}})});var Oe=l(U,2);{var Fe=o=>{var w=jt(),E=a(w),D=L(()=>F(()=>e.submitAnswer()));E.__click=function(...X){s(D)?.apply(this,X)},r(o,w)};f(Oe,o=>{!i().isAnswered&&!g()&&t().type!=="card"&&o(Fe)})}se(()=>{le(W,"id",`question${t().id??""}`),le(Te,"href",`/questions/${t().id??""}`)}),r(J,W)};f(P,J=>{z(p)?J(G):J(ue,!1)})}r(_,b)},B=_=>{var b=Ft();r(_,b)};f(x,_=>{t()?_(S):_(B,!1)})}r(V,h),he()}me(["click"]);export{Zt as S};
