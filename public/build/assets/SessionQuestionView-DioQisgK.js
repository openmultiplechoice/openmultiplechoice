import{S as ge,i as he,s as de,n as K,d as v,g as c,o as ne,a as y,c as m,f as d,b as L,E as _e,q as Qe,t as pe,l as D,v as Me,p as V,e as ie,D as At,M as He,h as Ne,k as fe,m as We,w as U,x as j,z as be,A as we,r as ae,u as ke,y as ue,B as ve,C as ye,O as Et}from"./index-C5hKwDc9.js";import{e as ce,u as Ct,d as Kt,o as Ot}from"./each-JoEH9o9l.js";import{p as F,d as Ht}from"./purify.es-CzHI0FGf.js";import{_ as Nt}from"./lodash-DBMh2b1a.js";import{Q as zt}from"./QuestionForm-LRPWcbwj.js";const Ie=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function je(n,e,t,s){n.addEventListener?n.addEventListener(e,t,s):n.attachEvent&&n.attachEvent("on".concat(e),t)}function Ce(n,e,t,s){n.removeEventListener?n.removeEventListener(e,t,s):n.detachEvent&&n.detachEvent("on".concat(e),t)}function St(n,e){const t=e.slice(0,e.length-1);for(let s=0;s<t.length;s++)t[s]=n[t[s].toLowerCase()];return t}function Lt(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function Dt(n,e){const t=n.length>=e.length?n:e,s=n.length>=e.length?e:n;let i=!0;for(let l=0;l<t.length;l++)s.indexOf(t[l])===-1&&(i=!1);return i}const Le={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Ie?173:189,"=":Ie?61:187,";":Ie?59:186,"'":222,"[":219,"]":221,"\\":220},se={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Oe={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Q={16:!1,18:!1,17:!1,91:!1},z={};for(let n=1;n<20;n++)Le["f".concat(n)]=111+n;let N=[],Se=null,qt="all";const le=new Map,Te=n=>Le[n.toLowerCase()]||se[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),It=n=>Object.keys(Le).find(e=>Le[e]===n),jt=n=>Object.keys(se).find(e=>se[e]===n);function Mt(n){qt=n||"all"}function qe(){return qt||"all"}function Pt(){return N.slice(0)}function Qt(){return N.map(n=>It(n)||jt(n)||String.fromCharCode(n))}function Ut(){const n=[];return Object.keys(z).forEach(e=>{z[e].forEach(t=>{let{key:s,scope:i,mods:l,shortcut:r}=t;n.push({scope:i,shortcut:r,mods:l,keys:s.split("+").map(o=>Te(o))})})}),n}function Ft(n){const e=n.target||n.srcElement,{tagName:t}=e;let s=!0;const i=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(s=!1),s}function Vt(n){return typeof n=="string"&&(n=Te(n)),N.indexOf(n)!==-1}function Bt(n,e){let t,s;n||(n=qe());for(const i in z)if(Object.prototype.hasOwnProperty.call(z,i))for(t=z[i],s=0;s<t.length;)t[s].scope===n?t.splice(s,1).forEach(r=>{let{element:o}=r;return Ue(o)}):s++;qe()===n&&Mt(e||"all")}function Rt(n){let e=n.keyCode||n.which||n.charCode;const t=N.indexOf(e);if(t>=0&&N.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&N.splice(0,N.length),(e===93||e===224)&&(e=91),e in Q){Q[e]=!1;for(const s in se)se[s]===e&&($[s]=!1)}}function Tt(n){if(typeof n>"u")Object.keys(z).forEach(i=>{Array.isArray(z[i])&&z[i].forEach(l=>Ke(l)),delete z[i]}),Ue(null);else if(Array.isArray(n))n.forEach(i=>{i.key&&Ke(i)});else if(typeof n=="object")n.key&&Ke(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];let[i,l]=t;typeof i=="function"&&(l=i,i=""),Ke({key:n,scope:i,method:l,splitKey:"+"})}}const Ke=n=>{let{key:e,scope:t,method:s,splitKey:i="+"}=n;Lt(e).forEach(r=>{const o=r.split(i),f=o.length,a=o[f-1],u=a==="*"?"*":Te(a);if(!z[u])return;t||(t=qe());const p=f>1?St(se,o):[],k=[];z[u]=z[u].filter(_=>{const b=(s?_.method===s:!0)&&_.scope===t&&Dt(_.mods,p);return b&&k.push(_.element),!b}),k.forEach(_=>Ue(_))})};function Xe(n,e,t,s){if(e.element!==s)return;let i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(const l in Q)Object.prototype.hasOwnProperty.call(Q,l)&&(!Q[l]&&e.mods.indexOf(+l)>-1||Q[l]&&e.mods.indexOf(+l)===-1)&&(i=!1);(e.mods.length===0&&!Q[16]&&!Q[18]&&!Q[17]&&!Q[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(N),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}function Ye(n,e){const t=z["*"];let s=n.keyCode||n.which||n.charCode;if(!$.filter.call(this,n))return;if((s===93||s===224)&&(s=91),N.indexOf(s)===-1&&s!==229&&N.push(s),["metaKey","ctrlKey","altKey","shiftKey"].forEach(o=>{const f=Oe[o];n[o]&&N.indexOf(f)===-1?N.push(f):!n[o]&&N.indexOf(f)>-1?N.splice(N.indexOf(f),1):o==="metaKey"&&n[o]&&(N=N.filter(a=>a in Oe||a===s))}),s in Q){Q[s]=!0;for(const o in se)se[o]===s&&($[o]=!0);if(!t)return}for(const o in Q)Object.prototype.hasOwnProperty.call(Q,o)&&(Q[o]=n[Oe[o]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(N.indexOf(17)===-1&&N.push(17),N.indexOf(18)===-1&&N.push(18),Q[17]=!0,Q[18]=!0);const i=qe();if(t)for(let o=0;o<t.length;o++)t[o].scope===i&&(n.type==="keydown"&&t[o].keydown||n.type==="keyup"&&t[o].keyup)&&Xe(n,t[o],i,e);if(!(s in z))return;const l=z[s],r=l.length;for(let o=0;o<r;o++)if((n.type==="keydown"&&l[o].keydown||n.type==="keyup"&&l[o].keyup)&&l[o].key){const f=l[o],{splitKey:a}=f,u=f.key.split(a),p=[];for(let k=0;k<u.length;k++)p.push(Te(u[k]));p.sort().join("")===N.sort().join("")&&Xe(n,f,i,e)}}function $(n,e,t){N=[];const s=Lt(n);let i=[],l="all",r=document,o=0,f=!1,a=!0,u="+",p=!1,k=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(l=e.scope),e.element&&(r=e.element),e.keyup&&(f=e.keyup),e.keydown!==void 0&&(a=e.keydown),e.capture!==void 0&&(p=e.capture),typeof e.splitKey=="string"&&(u=e.splitKey),e.single===!0&&(k=!0)),typeof e=="string"&&(l=e),k&&Tt(n,l);o<s.length;o++)n=s[o].split(u),i=[],n.length>1&&(i=St(se,n)),n=n[n.length-1],n=n==="*"?"*":Te(n),n in z||(z[n]=[]),z[n].push({keyup:f,keydown:a,scope:l,mods:i,shortcut:s[o],method:t,key:s[o],splitKey:u,element:r});if(typeof r<"u"&&window){if(!le.has(r)){const _=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return Ye(b,r)},g=function(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;Ye(b,r),Rt(b)};le.set(r,{keydownListener:_,keyupListenr:g,capture:p}),je(r,"keydown",_,p),je(r,"keyup",g,p)}if(!Se){const _=()=>{N=[]};Se={listener:_,capture:p},je(window,"focus",_,p)}}}function Gt(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(z).forEach(t=>{z[t].filter(i=>i.scope===e&&i.shortcut===n).forEach(i=>{i&&i.method&&i.method()})})}function Ue(n){const e=Object.values(z).flat();if(e.findIndex(s=>{let{element:i}=s;return i===n})<0){const{keydownListener:s,keyupListenr:i,capture:l}=le.get(n)||{};s&&i&&(Ce(n,"keyup",i,l),Ce(n,"keydown",s,l),le.delete(n))}if((e.length<=0||le.size<=0)&&(Object.keys(le).forEach(i=>{const{keydownListener:l,keyupListenr:r,capture:o}=le.get(i)||{};l&&r&&(Ce(i,"keyup",r,o),Ce(i,"keydown",l,o),le.delete(i))}),le.clear(),Object.keys(z).forEach(i=>delete z[i]),Se)){const{listener:i,capture:l}=Se;Ce(window,"focus",i,l),Se=null}}const Pe={getPressedKeyString:Qt,setScope:Mt,getScope:qe,deleteScope:Bt,getPressedKeyCodes:Pt,getAllKeyCodes:Ut,isPressed:Vt,filter:Ft,trigger:Gt,unbind:Tt,keyMap:Le,modifier:se,modifierMap:Oe};for(const n in Pe)Object.prototype.hasOwnProperty.call(Pe,n)&&($[n]=Pe[n]);if(typeof window<"u"){const n=window.hotkeys;$.noConflict=e=>(e&&window.hotkeys===$&&(window.hotkeys=n),$),window.hotkeys=$}function Jt(n){let e,t;return{c(){e=d("div"),t=d("p"),t.textContent=`${n[8]}`,c(t,"class","badge text-dark my-0"),c(e,"class","col-1 border-start-3")},m(s,i){y(s,e,i),m(e,t)},p:K,d(s){s&&v(e)}}}function Wt(n){let e,t,s,i;return{c(){e=d("div"),t=d("p"),t.textContent=`${n[8]}`,c(t,"class","badge text-dark my-0"),c(e,"class","col-1 border-start-3 cursor-pointer svelte-12xdzqf")},m(l,r){y(l,e,r),m(e,t),s||(i=D(e,"click",n[10]),s=!0)},p:K,d(l){l&&v(e),s=!1,i()}}}function Xt(n){let e,t,s=F.sanitize(n[0].text)+"";return{c(){e=d("div"),t=d("p"),c(t,"class","px-1 my-0"),c(e,"class","col-9")},m(i,l){y(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=F.sanitize(i[0].text)+"")&&(t.innerHTML=s)},d(i){i&&v(e)}}}function Yt(n){let e,t,s=F.sanitize(n[0].text)+"",i,l;return{c(){e=d("div"),t=d("p"),c(t,"class","px-1 my-0"),c(e,"class","col-9 cursor-pointer svelte-12xdzqf")},m(r,o){y(r,e,o),m(e,t),t.innerHTML=s,i||(l=D(e,"click",n[11]),i=!0)},p(r,o){o&1&&s!==(s=F.sanitize(r[0].text)+"")&&(t.innerHTML=s)},d(r){r&&v(e),i=!1,l()}}}function Ze(n){let e,t=n[0].answer_percentage+"",s,i;return{c(){e=d("span"),s=pe(t),i=pe("%"),c(e,"class","badge text-muted"),c(e,"title","Percentage of users who chose this answer")},m(l,r){y(l,e,r),m(e,s),m(e,i)},p(l,r){r&1&&t!==(t=l[0].answer_percentage+"")&&Qe(s,t)},d(l){l&&v(e)}}}function Zt(n){let e;return{c(){e=d("span"),e.textContent="✓",c(e,"class","text-secondary fw-bold fs-3")},m(t,s){y(t,e,s)},p:K,d(t){t&&v(e)}}}function xt(n){let e;return{c(){e=d("span"),e.textContent="✗",c(e,"class","text-danger-dark fw-bold fs-3")},m(t,s){y(t,e,s)},p:K,d(t){t&&v(e)}}}function $t(n){let e;return{c(){e=d("span"),e.textContent="⇠",c(e,"class","text-success-dark fw-bold fs-3")},m(t,s){y(t,e,s)},p:K,d(t){t&&v(e)}}}function en(n){let e;return{c(){e=d("span"),e.textContent="✓",c(e,"class","text-success-dark fw-bold fs-3")},m(t,s){y(t,e,s)},p:K,d(t){t&&v(e)}}}function tn(n){let e,t,s,i,l,r,o,f;return{c(){e=d("div"),t=d("button"),t.innerHTML='<span class="text-secondary">✗</span>',s=L(),i=d("div"),l=L(),r=d("button"),r.innerHTML='<span class="text-secondary">✓</span>',c(t,"type","button"),c(t,"class","btn btn-sm p-0"),c(i,"class","vr mx-1"),c(r,"type","button"),c(r,"class","btn btn-sm p-0"),c(e,"class","d-flex justify-content-end align-items-center")},m(a,u){y(a,e,u),m(e,t),m(e,s),m(e,i),m(e,l),m(e,r),o||(f=[D(t,"click",V(n[12])),D(r,"click",V(n[13]))],o=!0)},p:K,d(a){a&&v(e),o=!1,Me(f)}}}function xe(n){let e,t,s,i,l=F.sanitize(n[0].hint)+"";return{c(){e=d("div"),t=L(),s=d("div"),i=d("p"),c(e,"class","col-1 border-3 border-start border-secondary-subtle"),c(i,"class","p-1"),c(s,"class","col-11")},m(r,o){y(r,e,o),y(r,t,o),y(r,s,o),m(s,i),i.innerHTML=l},p(r,o){o&1&&l!==(l=F.sanitize(r[0].hint)+"")&&(i.innerHTML=l)},d(r){r&&(v(e),v(t),v(s))}}}function nn(n){let e,t,s,i,l,r,o,f,a,u,p,k;function _(w,M){return!w[2]&&!w[1].isSubmittedAnswer?Wt:Jt}let g=_(n),b=g(n);function q(w,M){return!w[2]&&!w[1].isSelectedAnswer?Yt:Xt}let E=q(n),T=E(n),O=n[2]&&!n[4]&&n[5]&&n[0].answer_percentage!=null&&Ze(n);function Y(w,M){if(!w[2]&&!w[1].isSelectedAnswer)return tn;if(!w[4]&&w[1].isCorrectAnswer&&w[1].isSubmittedAnswer)return en;if(!w[4]&&w[1].isCorrectAnswer&&!w[1].isSubmittedAnswer&&w[2])return $t;if(!w[4]&&w[1].isSubmittedAnswer)return xt;if(w[4]&&w[1].isSubmittedAnswer)return Zt}let H=Y(n),h=H&&H(n),C=!n[4]&&n[0].hint&&(n[2]||n[1].isSelectedAnswer)&&xe(n);return{c(){e=d("div"),b.c(),t=L(),T.c(),s=L(),i=d("div"),l=d("div"),r=d("div"),O&&O.c(),o=L(),f=d("div"),h&&h.c(),p=L(),k=d("div"),C&&C.c(),c(r,"class","col"),c(f,"class","col"),c(l,"class","row text-end d-flex align-items-center"),c(i,"class","col-2"),c(e,"id",a="answer"+n[0].id),_e(e,"min-height","3rem"),c(e,"class",u="row border-start border-3 m-1 py-2 d-flex align-items-center "+n[6]+" svelte-12xdzqf"),ne(e,"bg-light",n[4]||!n[2]&&!n[1].isSelectedAnswer&&!n[1].isSubmittedAnswer||n[2]&&!n[1].isSubmittedAnswer&&!n[1].isCorrectAnswer),ne(e,"text-bg-success",!n[4]&&n[2]&&n[1].isCorrectAnswer),ne(e,"text-bg-danger",!n[4]&&n[1].isSelectedAnswer&&!n[1].isCorrectAnswer),ne(e,"bg-incorrect",n[7]==="incorrect"),ne(e,"bg-correct",n[7]==="correct"),c(k,"class","row ms-1 mb-2 me-1")},m(w,M){y(w,e,M),b.m(e,null),m(e,t),T.m(e,null),m(e,s),m(e,i),m(i,l),m(l,r),O&&O.m(r,null),m(l,o),m(l,f),h&&h.m(f,null),y(w,p,M),y(w,k,M),C&&C.m(k,null)},p(w,[M]){g===(g=_(w))&&b?b.p(w,M):(b.d(1),b=g(w),b&&(b.c(),b.m(e,t))),E===(E=q(w))&&T?T.p(w,M):(T.d(1),T=E(w),T&&(T.c(),T.m(e,s))),w[2]&&!w[4]&&w[5]&&w[0].answer_percentage!=null?O?O.p(w,M):(O=Ze(w),O.c(),O.m(r,null)):O&&(O.d(1),O=null),H===(H=Y(w))&&h?h.p(w,M):(h&&h.d(1),h=H&&H(w),h&&(h.c(),h.m(f,null))),M&1&&a!==(a="answer"+w[0].id)&&c(e,"id",a),M&64&&u!==(u="row border-start border-3 m-1 py-2 d-flex align-items-center "+w[6]+" svelte-12xdzqf")&&c(e,"class",u),M&86&&ne(e,"bg-light",w[4]||!w[2]&&!w[1].isSelectedAnswer&&!w[1].isSubmittedAnswer||w[2]&&!w[1].isSubmittedAnswer&&!w[1].isCorrectAnswer),M&86&&ne(e,"text-bg-success",!w[4]&&w[2]&&w[1].isCorrectAnswer),M&82&&ne(e,"text-bg-danger",!w[4]&&w[1].isSelectedAnswer&&!w[1].isCorrectAnswer),M&192&&ne(e,"bg-incorrect",w[7]==="incorrect"),M&192&&ne(e,"bg-correct",w[7]==="correct"),!w[4]&&w[0].hint&&(w[2]||w[1].isSelectedAnswer)?C?C.p(w,M):(C=xe(w),C.c(),C.m(k,null)):C&&(C.d(1),C=null)},i:K,o:K,d(w){w&&(v(e),v(p),v(k)),b.d(),T.d(),O&&O.d(),h&&h.d(),C&&C.d()}}}function sn(n,e,t){let{answer:s}=e,{answerContext:i}=e,{answerNumber:l}=e,{questionIsAnswered:r}=e,{submitAnswer:o}=e,{examMode:f}=e,{settingsShowAnswerStats:a}=e;var u,p,k=s.badgeText;const _=()=>o(s.id),g=()=>o(s.id),b=()=>t(7,p=p==="incorrect"?"":"incorrect"),q=()=>t(7,p=p==="correct"?"":"correct");return n.$$set=E=>{"answer"in E&&t(0,s=E.answer),"answerContext"in E&&t(1,i=E.answerContext),"answerNumber"in E&&t(9,l=E.answerNumber),"questionIsAnswered"in E&&t(2,r=E.questionIsAnswered),"submitAnswer"in E&&t(3,o=E.submitAnswer),"examMode"in E&&t(4,f=E.examMode),"settingsShowAnswerStats"in E&&t(5,a=E.settingsShowAnswerStats)},n.$$.update=()=>{n.$$.dirty&521&&($.unbind(`${k}, ${l}`,"questions"),$(`${k}, ${l}`,"questions",function(){o(s.id)})),n.$$.dirty&23&&s&&(t(7,p=""),t(6,u="border-secondary"),f||(r?i.isCorrectAnswer?t(6,u="border-success"):i.isSubmittedAnswer&&t(6,u="border-danger"):i.isSelectedAnswer&&t(6,u="border-danger")))},[s,i,r,o,f,a,u,p,k,l,_,g,b,q]}class ln extends ge{constructor(e){super(),he(this,e,sn,nn,de,{answer:0,answerContext:1,answerNumber:9,questionIsAnswered:2,submitAnswer:3,examMode:4,settingsShowAnswerStats:5})}}function rn(n){let e,t,s,i,l;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Show answer",c(s,"type","button"),c(s,"class","btn btn-warning btn-sm w-100"),c(t,"class","col-md"),c(e,"class","row")},m(r,o){y(r,e,o),m(e,t),m(t,s),i||(l=D(s,"click",V(n[4])),i=!0)},p:K,d(r){r&&v(e),i=!1,l()}}}function on(n){let e,t,s=F.sanitize(n[0].text)+"",i,l,r=!n[1]&&$e(n);return{c(){e=d("div"),t=d("p"),i=L(),r&&r.c(),l=ie(),c(t,"class","p-1"),c(e,"class","row border-light border-start border-3 m-1 p-2")},m(o,f){y(o,e,f),m(e,t),t.innerHTML=s,y(o,i,f),r&&r.m(o,f),y(o,l,f)},p(o,f){f&1&&s!==(s=F.sanitize(o[0].text)+"")&&(t.innerHTML=s),o[1]?r&&(r.d(1),r=null):r?r.p(o,f):(r=$e(o),r.c(),r.m(l.parentNode,l))},d(o){o&&(v(e),v(i),v(l)),r&&r.d(o)}}}function $e(n){let e,t,s,i,l,r,o,f;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Ask me again",i=L(),l=d("div"),r=d("button"),r.textContent="I got it!",c(s,"type","button"),c(s,"class","btn btn-danger btn-sm w-100"),c(t,"class","col-md-6 mb-1"),c(r,"type","button"),c(r,"class","btn btn-success btn-sm w-100"),c(l,"class","col-md-6 mb-1"),c(e,"class","row")},m(a,u){y(a,e,u),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),o||(f=[D(s,"click",V(n[5])),D(r,"click",V(n[6]))],o=!0)},p:K,d(a){a&&v(e),o=!1,Me(f)}}}function fn(n){let e;function t(l,r){return l[3]?on:rn}let s=t(n),i=s(n);return{c(){i.c(),e=ie()},m(l,r){i.m(l,r),y(l,e,r)},p(l,[r]){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:K,o:K,d(l){l&&v(e),i.d(l)}}}function cn(n,e,t){let{answer:s}=e,{hasAnswer:i}=e,{submitAnswer:l}=e;var r=!1;function o(){t(3,r=!r)}const f=()=>l(),a=()=>l(s.id);return n.$$set=u=>{"answer"in u&&t(0,s=u.answer),"hasAnswer"in u&&t(1,i=u.hasAnswer),"submitAnswer"in u&&t(2,l=u.submitAnswer)},n.$$.update=()=>{n.$$.dirty&2&&(i?t(3,r=!0):t(3,r=!1))},[s,i,l,r,o,f,a]}class an extends ge{constructor(e){super(),he(this,e,cn,fn,de,{answer:0,hasAnswer:1,submitAnswer:2})}}function et(n){let e,t,s,i,l,r,o,f;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Ask me again",i=L(),l=d("div"),r=d("button"),r.textContent="I got it!",c(s,"type","button"),c(s,"class","btn btn-danger btn-sm w-100"),c(t,"class","col-md-6 mb-1"),c(r,"type","button"),c(r,"class","btn btn-success btn-sm w-100"),c(l,"class","col-md-6 mb-1"),c(e,"class","row")},m(a,u){y(a,e,u),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),o||(f=[D(s,"click",V(n[2])),D(r,"click",V(n[3]))],o=!0)},p:K,d(a){a&&v(e),o=!1,Me(f)}}}function un(n){let e,t=!n[0]&&et(n);return{c(){t&&t.c(),e=ie()},m(s,i){t&&t.m(s,i),y(s,e,i)},p(s,[i]){s[0]?t&&(t.d(1),t=null):t?t.p(s,i):(t=et(s),t.c(),t.m(e.parentNode,e))},i:K,o:K,d(s){s&&v(e),t&&t.d(s)}}}function dn(n,e,t){let{hasAnswer:s}=e,{submitAnswer:i}=e;const l=()=>i(),r=()=>i(-1);return n.$$set=o=>{"hasAnswer"in o&&t(0,s=o.hasAnswer),"submitAnswer"in o&&t(1,i=o.submitAnswer)},[s,i,l,r]}class mn extends ge{constructor(e){super(),he(this,e,dn,un,de,{hasAnswer:0,submitAnswer:1})}}function tt(n,e,t){const s=n.slice();return s[7]=e[t],s}function _n(n){let e,t,s,i,l,r,o,f,a;return{c(){e=d("div"),t=d("p"),s=d("button"),i=L(),l=d("div"),r=d("img"),c(s,"type","button"),c(s,"class","btn-close"),c(t,"class","bg-white text-end"),c(r,"class","img-fluid border border-5 border-white"),He(r.src,o="/"+n[2].path)||c(r,"src",o),c(r,"alt",""),c(l,"class","text-center"),c(e,"class","img-fullscreen svelte-z0la5k")},m(u,p){y(u,e,p),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),f||(a=[D(s,"click",V(n[5])),D(e,"click",n[3])],f=!0)},p(u,p){p&4&&!He(r.src,o="/"+u[2].path)&&c(r,"src",o)},d(u){u&&v(e),f=!1,Me(a)}}}function bn(n){let e,t,s=[],i=new Map,l=ce(n[0]);const r=o=>o[7].id;for(let o=0;o<l.length;o+=1){let f=tt(n,l,o),a=r(f);i.set(a,s[o]=nt(a,f))}return{c(){e=d("div"),t=d("div");for(let o=0;o<s.length;o+=1)s[o].c();c(t,"class","row row-cols-1 row-cols-sm-3 g-4"),c(e,"class","col-lg")},m(o,f){y(o,e,f),m(e,t);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(t,null)},p(o,f){f&9&&(l=ce(o[0]),s=Ct(s,f,r,1,o,l,i,t,Kt,nt,null,tt))},d(o){o&&v(e);for(let f=0;f<s.length;f+=1)s[f].d()}}}function nt(n,e){let t,s,i,l,r,o,f;function a(){return e[4](e[7])}return{key:n,first:null,c(){t=d("div"),s=d("div"),i=d("img"),r=L(),He(i.src,l="/"+e[7].path)||c(i,"src",l),c(i,"class","card-img-top"),c(i,"alt",""),c(s,"class","card"),_e(s,"max-width","18rem"),_e(s,"cursor","pointer"),c(t,"class","col"),this.first=t},m(u,p){y(u,t,p),m(t,s),m(s,i),m(t,r),o||(f=D(i,"click",a),o=!0)},p(u,p){e=u,p&1&&!He(i.src,l="/"+e[7].path)&&c(i,"src",l)},d(u){u&&v(t),o=!1,f()}}}function wn(n){let e;function t(l,r){return l[1]?_n:bn}let s=t(n),i=s(n);return{c(){i.c(),e=ie()},m(l,r){i.m(l,r),y(l,e,r)},p(l,[r]){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:K,o:K,d(l){l&&v(e),i.d(l)}}}function pn(n,e,t){let{images:s=[]}=e;var i=!1,l;At(()=>{$("esc","images",function(u,p){i&&t(1,i=!1)})});var r;function o(u){r&&r.cancel(),r=Ht(()=>{t(1,i=!i),t(2,l=s.find(p=>p.id===u))},100,{maxWait:200}),r()}const f=u=>o(u.id),a=()=>t(1,i=!i);return n.$$set=u=>{"images"in u&&t(0,s=u.images)},n.$$.update=()=>{n.$$.dirty&2&&(i?$.setScope("images"):$.setScope("questions"))},[s,i,l,o,f,a]}class gn extends ge{constructor(e){super(),he(this,e,pn,wn,de,{images:0})}}function st(n,e,t){const s=n.slice();return s[19]=e[t],s}function it(n,e,t){const s=n.slice();return s[19]=e[t],s}function hn(n){let e;return{c(){e=d("div"),e.innerHTML='<div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading decks ...</span></div>',c(e,"class","d-flex justify-content-center")},m(t,s){y(t,e,s)},p:K,d(t){t&&v(e)}}}function kn(n){let e,t,s,i,l,r=n[0].length+n[1].length>10&&lt(n),o=ce(n[3]),f=[];for(let _=0;_<o.length;_+=1)f[_]=rt(it(n,o,_));let a=n[6].length>0&&n[3].length>0&&ot(),u=ce(n[6]),p=[];for(let _=0;_<u.length;_+=1)p[_]=ft(st(n,u,_));let k=n[6].length===0&&n[3].length===0&&ct();return{c(){r&&r.c(),e=L();for(let _=0;_<f.length;_+=1)f[_].c();t=L(),a&&a.c(),s=L();for(let _=0;_<p.length;_+=1)p[_].c();i=L(),k&&k.c(),l=ie()},m(_,g){r&&r.m(_,g),y(_,e,g);for(let b=0;b<f.length;b+=1)f[b]&&f[b].m(_,g);y(_,t,g),a&&a.m(_,g),y(_,s,g);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(_,g);y(_,i,g),k&&k.m(_,g),y(_,l,g)},p(_,g){if(_[0].length+_[1].length>10?r?r.p(_,g):(r=lt(_),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),g&264){o=ce(_[3]);let b;for(b=0;b<o.length;b+=1){const q=it(_,o,b);f[b]?f[b].p(q,g):(f[b]=rt(q),f[b].c(),f[b].m(t.parentNode,t))}for(;b<f.length;b+=1)f[b].d(1);f.length=o.length}if(_[6].length>0&&_[3].length>0?a||(a=ot(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),g&192){u=ce(_[6]);let b;for(b=0;b<u.length;b+=1){const q=st(_,u,b);p[b]?p[b].p(q,g):(p[b]=ft(q),p[b].c(),p[b].m(i.parentNode,i))}for(;b<p.length;b+=1)p[b].d(1);p.length=u.length}_[6].length===0&&_[3].length===0?k||(k=ct(),k.c(),k.m(l.parentNode,l)):k&&(k.d(1),k=null)},d(_){_&&(v(e),v(t),v(s),v(i),v(l)),r&&r.d(_),We(f,_),a&&a.d(_),We(p,_),k&&k.d(_)}}}function lt(n){let e,t,s;return{c(){e=d("input"),c(e,"type","text"),c(e,"class","form-control mb-3"),c(e,"placeholder","Filter decks ...")},m(i,l){y(i,e,l),n[11](e),Ne(e,n[2]),t||(s=D(e,"input",n[12]),t=!0)},p(i,l){l&4&&e.value!==i[2]&&Ne(e,i[2])},d(i){i&&v(e),n[11](null),t=!1,s()}}}function rt(n){let e,t,s,i=n[19].name+"",l,r,o,f,a,u,p;function k(){return n[13](n[19])}return{c(){e=d("div"),t=d("div"),s=d("a"),l=pe(i),o=L(),f=d("div"),a=d("button"),a.textContent="Remove",c(s,"href",r="/decks/"+n[19].id),c(s,"class","link-dark"),c(t,"class","col-9 text-overflow svelte-1gfmo48"),c(a,"class","btn btn-sm btn-outline-secondary float-end"),c(f,"class","col-3 d-grid gap-4"),c(e,"class","row mb-1")},m(_,g){y(_,e,g),m(e,t),m(t,s),m(s,l),m(e,o),m(e,f),m(f,a),u||(p=D(a,"click",V(k)),u=!0)},p(_,g){n=_,g&8&&i!==(i=n[19].name+"")&&Qe(l,i),g&8&&r!==(r="/decks/"+n[19].id)&&c(s,"href",r)},d(_){_&&v(e),u=!1,p()}}}function ot(n){let e;return{c(){e=d("hr")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function ft(n){let e,t,s,i=n[19].name+"",l,r,o,f,a,u,p;function k(){return n[14](n[19])}return{c(){e=d("div"),t=d("div"),s=d("a"),l=pe(i),o=L(),f=d("div"),a=d("button"),a.textContent="Add",c(s,"href",r="/decks/"+n[19].id),c(s,"class","link-dark"),c(t,"class","col-9 text-overflow svelte-1gfmo48"),c(a,"class","btn btn-sm btn-primary float-end"),c(f,"class","col-3 d-grid gap-4"),c(e,"class","row mb-1")},m(_,g){y(_,e,g),m(e,t),m(t,s),m(s,l),m(e,o),m(e,f),m(f,a),u||(p=D(a,"click",V(k)),u=!0)},p(_,g){n=_,g&64&&i!==(i=n[19].name+"")&&Qe(l,i),g&64&&r!==(r="/decks/"+n[19].id)&&c(s,"href",r)},d(_){_&&v(e),u=!1,p()}}}function ct(n){let e;return{c(){e=d("div"),e.textContent="No decks found",c(e,"class","alert alert-light text-center"),c(e,"role","alert")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function vn(n){let e,t,s,i,l,r,o,f,a,u,p,k,_,g,b,q,E,T,O;function Y(C,w){return C[0]?kn:hn}let H=Y(n),h=H(n);return{c(){e=d("button"),e.innerHTML='<i class="bi bi-collection"></i> Add to deck',t=L(),s=d("div"),i=d("div"),i.innerHTML='<h5 id="offcanvasAddToDeckLabel">Add question to deck</h5> <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>',l=L(),r=d("div"),h.c(),o=L(),f=d("hr"),a=L(),u=d("div"),p=d("div"),k=d("p"),k.textContent="Create new deck:",_=L(),g=d("div"),b=d("input"),q=L(),E=d("button"),E.textContent="Create deck and add question",c(e,"class","btn btn-outline-secondary btn-sm"),c(e,"type","button"),c(e,"data-bs-toggle","offcanvas"),c(e,"data-bs-target","#offcanvasAddToDeck"),c(e,"aria-controls","offcanvasAddToDeck"),c(i,"class","offcanvas-header"),c(b,"type","text"),c(b,"class","form-control"),c(b,"id","name"),c(b,"name","name"),c(b,"placeholder","My new deck ..."),c(g,"class","mb-2"),c(E,"class","btn btn-sm btn-primary mb-3"),c(p,"class","col"),c(u,"class","row sticky-bottom bg-white mt-3"),c(r,"class","offcanvas-body pb-0"),c(s,"class","offcanvas offcanvas-end"),c(s,"tabindex","-1"),c(s,"id","offcanvasAddToDeck"),c(s,"aria-labelledby","offcanvasAddToDeckLabel")},m(C,w){y(C,e,w),y(C,t,w),y(C,s,w),m(s,i),m(s,l),m(s,r),h.m(r,null),m(r,o),m(r,f),m(r,a),m(r,u),m(u,p),m(p,k),m(p,_),m(p,g),m(g,b),Ne(b,n[4]),m(p,q),m(p,E),T||(O=[D(b,"input",n[15]),D(E,"click",V(n[16]))],T=!0)},p(C,[w]){H===(H=Y(C))&&h?h.p(C,w):(h.d(1),h=H(C),h&&(h.c(),h.m(r,o))),w&16&&b.value!==C[4]&&Ne(b,C[4])},i:K,o:K,d(C){C&&(v(e),v(t),v(s)),h.d(),T=!1,Me(O)}}}function yn(n,e,t){let{questionId:s}=e,i,l,r="",o,f="",a=[],u=[];At(()=>{const h=document.getElementById("offcanvasAddToDeck");h.addEventListener("show.bs.offcanvas",C=>{p()}),h.addEventListener("shown.bs.offcanvas",C=>{b()}),h.addEventListener("hidden.bs.offcanvas",C=>{t(0,i=void 0),t(1,l=void 0),t(2,f="")})});function p(){axios.get("/api/decks/withquestionids").then(function(h){var C=h.data;t(0,i=[]),t(1,l=[]),C.forEach(w=>{w.questions.some(M=>M.id===s)?t(0,i=[...i,{id:w.id,name:w.name}]):t(1,l=[...l,{id:w.id,name:w.name}])})}).catch(function(h){console.log(h),alert(h)})}function k(h){axios.post("/api/decks/"+h+"/addquestion",{question_id:s}).then(function(C){const w=l.find(M=>M.id===h);t(0,i=[...i,w]),t(1,l=l.filter(M=>M.id!==h))}).catch(function(C){alert(C)})}function _(h){axios.post("/api/decks/"+h+"/removequestion",{question_id:s}).then(function(C){const w=i.find(M=>M.id===h);t(1,l=[...l,w]),t(0,i=i.filter(M=>M.id!==h))}).catch(function(C){alert(C)})}function g(){r&&axios.post("/api/decks",{name:r}).then(function(h){const C=h.data;t(1,l=[...l,C]),k(C.id),t(4,r="")}).catch(function(h){alert(h)})}function b(){o&&o.focus()}function q(h){fe[h?"unshift":"push"](()=>{o=h,t(5,o)})}function E(){f=this.value,t(2,f)}const T=h=>_(h.id),O=h=>k(h.id);function Y(){r=this.value,t(4,r)}const H=()=>g();return n.$$set=h=>{"questionId"in h&&t(10,s=h.questionId)},n.$$.update=()=>{n.$$.dirty&6&&t(6,a=l==null?void 0:l.filter(h=>h.name.toLowerCase().includes(f.toLowerCase()))),n.$$.dirty&5&&t(3,u=i==null?void 0:i.filter(h=>h.name.toLowerCase().includes(f.toLowerCase()))),n.$$.dirty&8&&b()},[i,l,f,u,r,o,a,k,_,g,s,q,E,T,O,Y,H]}class An extends ge{constructor(e){super(),he(this,e,yn,vn,de,{questionId:10})}}function at(n,e,t){const s=n.slice();return s[23]=e[t],s[24]=e,s[25]=t,s}function Cn(n){let e;return{c(){e=d("p"),e.textContent="Loading ..."},m(t,s){y(t,e,s)},p:K,i:K,o:K,d(t){t&&v(e)}}}function Sn(n){let e,t,s,i,l;const r=[qn,Ln],o=[];function f(u,p){return u[9]?0:1}e=f(n),t=o[e]=r[e](n);let a=!n[1].isAnswered&&!n[3]&&n[0].type!=="card"&&yt(n);return{c(){t.c(),s=L(),a&&a.c(),i=ie()},m(u,p){o[e].m(u,p),y(u,s,p),a&&a.m(u,p),y(u,i,p),l=!0},p(u,p){let k=e;e=f(u),e===k?o[e].p(u,p):(be(),U(o[k],1,1,()=>{o[k]=null}),we(),t=o[e],t?t.p(u,p):(t=o[e]=r[e](u),t.c()),j(t,1),t.m(s.parentNode,s)),!u[1].isAnswered&&!u[3]&&u[0].type!=="card"?a?a.p(u,p):(a=yt(u),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(u){l||(j(t),l=!0)},o(u){U(t),l=!1},d(u){u&&(v(s),v(i)),o[e].d(u),a&&a.d(u)}}}function Ln(n){let e,t,s,i,l,r,o,f,a,u,p,k,_,g,b,q,E,T,O,Y,H,h,C,w,M,A,te,Ae,re,Fe,Ve,Be=n[0].id,Ee,me,ze,Re,Z=n[0].is_invalid&&ut(),x=n[0].needs_review&&dt(),B=n[0].case&&mt(n),R=n[0].text&&_t(n),I=n[0].images&&n[0].images.length>0&&bt(n),G=!n[3]&&n[0].hint&&wt(n);const Ge=[On,Kn,En],oe=[];function Je(S,P){return S[0].type==="mc"?0:S[0].answers.length===0?1:2}a=Je(n),u=oe[a]=Ge[a](n);let J=!n[3]&&n[1].isAnswered&&n[0].comment&&gt(n),W=n[1].isAnswered&&n[6]!==-1&&ht(n),X=n[5]&&kt(n),ee=vt(n);return{c(){e=d("div"),Z&&Z.c(),t=L(),x&&x.c(),s=L(),B&&B.c(),i=L(),l=d("div"),R&&R.c(),r=L(),I&&I.c(),o=L(),G&&G.c(),f=L(),u.c(),p=L(),J&&J.c(),k=L(),_=d("div"),g=d("div"),b=d("div"),q=d("button"),q.textContent="More",E=L(),T=d("ul"),W&&W.c(),O=L(),Y=d("li"),H=d("a"),h=d("i"),C=pe(" Open in new tab"),M=L(),A=d("li"),A.innerHTML='<hr class="dropdown-divider"/>',te=L(),Ae=d("li"),re=d("button"),re.innerHTML='<i class="bi bi-pencil"></i> Edit question',Fe=L(),X&&X.c(),Ve=L(),ee.c(),c(l,"class","row border-start border-3 border-dark m-1 mb-3 pt-2"),c(q,"class","btn btn-outline-secondary btn-sm dropdown-toggle"),c(q,"type","button"),c(q,"data-bs-toggle","dropdown"),c(q,"aria-expanded","false"),c(h,"class","bi bi-box-arrow-up-right"),c(H,"class","dropdown-item btn btn-sm"),c(H,"href",w="/questions/"+n[0].id),c(H,"target","_blank"),c(H,"role","button"),c(re,"type","button"),c(re,"class","dropdown-item btn btn-sm"),c(T,"class","dropdown-menu"),c(b,"class","btn-group me-1"),c(g,"class","d-flex justify-content-end"),c(_,"class","row mt-1 mb-1 pt-2"),c(e,"id",Ee="question"+n[0].id)},m(S,P){y(S,e,P),Z&&Z.m(e,null),m(e,t),x&&x.m(e,null),m(e,s),B&&B.m(e,null),m(e,i),m(e,l),R&&R.m(l,null),m(l,r),I&&I.m(l,null),m(e,o),G&&G.m(e,null),m(e,f),oe[a].m(e,null),m(e,p),J&&J.m(e,null),m(e,k),m(e,_),m(_,g),m(g,b),m(b,q),m(b,E),m(b,T),W&&W.m(T,null),m(T,O),m(T,Y),m(Y,H),m(H,h),m(H,C),m(T,M),m(T,A),m(T,te),m(T,Ae),m(Ae,re),m(T,Fe),X&&X.m(T,null),m(g,Ve),ee.m(g,null),me=!0,ze||(Re=D(re,"click",V(n[11])),ze=!0)},p(S,P){S[0].is_invalid?Z||(Z=ut(),Z.c(),Z.m(e,t)):Z&&(Z.d(1),Z=null),S[0].needs_review?x||(x=dt(),x.c(),x.m(e,s)):x&&(x.d(1),x=null),S[0].case?B?B.p(S,P):(B=mt(S),B.c(),B.m(e,i)):B&&(B.d(1),B=null),S[0].text?R?R.p(S,P):(R=_t(S),R.c(),R.m(l,r)):R&&(R.d(1),R=null),S[0].images&&S[0].images.length>0?I?(I.p(S,P),P&1&&j(I,1)):(I=bt(S),I.c(),j(I,1),I.m(l,null)):I&&(be(),U(I,1,1,()=>{I=null}),we()),!S[3]&&S[0].hint?G?G.p(S,P):(G=wt(S),G.c(),G.m(e,f)):G&&(G.d(1),G=null);let De=a;a=Je(S),a===De?oe[a].p(S,P):(be(),U(oe[De],1,1,()=>{oe[De]=null}),we(),u=oe[a],u?u.p(S,P):(u=oe[a]=Ge[a](S),u.c()),j(u,1),u.m(e,p)),!S[3]&&S[1].isAnswered&&S[0].comment?J?J.p(S,P):(J=gt(S),J.c(),J.m(e,k)):J&&(J.d(1),J=null),S[1].isAnswered&&S[6]!==-1?W?W.p(S,P):(W=ht(S),W.c(),W.m(T,O)):W&&(W.d(1),W=null),(!me||P&1&&w!==(w="/questions/"+S[0].id))&&c(H,"href",w),S[5]?X?X.p(S,P):(X=kt(S),X.c(),X.m(T,null)):X&&(X.d(1),X=null),P&1&&de(Be,Be=S[0].id)?(be(),U(ee,1,1,K),we(),ee=vt(S),ee.c(),j(ee,1),ee.m(g,null)):ee.p(S,P),(!me||P&1&&Ee!==(Ee="question"+S[0].id))&&c(e,"id",Ee)},i(S){me||(j(I),j(u),j(ee),me=!0)},o(S){U(I),U(u),U(ee),me=!1},d(S){S&&v(e),Z&&Z.d(),x&&x.d(),B&&B.d(),R&&R.d(),I&&I.d(),G&&G.d(),oe[a].d(),J&&J.d(),W&&W.d(),X&&X.d(),ee.d(S),ze=!1,Re()}}}function qn(n){let e,t,s,i;function l(o){n[14](o)}let r={toggleEditor:n[11]};return n[0]!==void 0&&(r.question=n[0]),t=new zt({props:r}),fe.push(()=>ae(t,"question",l)),{c(){e=d("div"),ye(t.$$.fragment),c(e,"class","my-5 pt-1 pb-3 border-dark"),_e(e,"border-top","dotted"),_e(e,"border-bottom","dotted"),_e(e,"border-width","1px")},m(o,f){y(o,e,f),ve(t,e,null),i=!0},p(o,f){const a={};!s&&f&1&&(s=!0,a.question=o[0],ue(()=>s=!1)),t.$set(a)},i(o){i||(j(t.$$.fragment,o),i=!0)},o(o){U(t.$$.fragment,o),i=!1},d(o){o&&v(e),ke(t)}}}function ut(n){let e;return{c(){e=d("div"),e.innerHTML='<div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-cone-striped"></i> <strong>Question is marked invalid</strong> and safe to skip!</div></div>',c(e,"class","row")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function dt(n){let e;return{c(){e=d("div"),e.innerHTML='<div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-eraser-fill"></i> <strong>Question needs review</strong> - Please review the question and answer choices and make sure they are correct and clear. Afterwards, remove the &quot;Needs review&quot; flag.</div></div>',c(e,"class","row")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function mt(n){let e,t,s,i,l=F.sanitize(n[0].case.text)+"";return{c(){e=d("div"),t=d("p"),t.innerHTML='<i class="bi bi-clipboard2-pulse"></i> CASE',s=L(),i=d("p"),c(t,"class","small fw-bold"),c(e,"class","alert alert-light"),c(e,"role","alert")},m(r,o){y(r,e,o),m(e,t),m(e,s),m(e,i),i.innerHTML=l},p(r,o){o&1&&l!==(l=F.sanitize(r[0].case.text)+"")&&(i.innerHTML=l)},d(r){r&&v(e)}}}function _t(n){let e,t,s=F.sanitize(n[0].text)+"";return{c(){e=d("div"),t=d("p"),c(t,"id","questionText"),c(e,"class","col-lg")},m(i,l){y(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=F.sanitize(i[0].text)+"")&&(t.innerHTML=s)},d(i){i&&v(e)}}}function bt(n){let e,t,s;function i(r){n[15](r)}let l={};return n[0].images!==void 0&&(l.images=n[0].images),e=new gn({props:l}),fe.push(()=>ae(e,"images",i)),{c(){ye(e.$$.fragment)},m(r,o){ve(e,r,o),s=!0},p(r,o){const f={};!t&&o&1&&(t=!0,f.images=r[0].images,ue(()=>t=!1)),e.$set(f)},i(r){s||(j(e.$$.fragment,r),s=!0)},o(r){U(e.$$.fragment,r),s=!1},d(r){ke(e,r)}}}function wt(n){let e;function t(l,r){return l[10]?Tn:Mn}let s=t(n),i=s(n);return{c(){i.c(),e=ie()},m(l,r){i.m(l,r),y(l,e,r)},p(l,r){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){l&&v(e),i.d(l)}}}function Mn(n){let e,t,s;return{c(){e=d("button"),e.innerHTML='<i class="bi bi-question"></i> Show hint',c(e,"type","button"),c(e,"class","btn btn-outline-secondary btn-sm mb-3")},m(i,l){y(i,e,l),t||(s=D(e,"click",V(n[16])),t=!0)},p:K,d(i){i&&v(e),t=!1,s()}}}function Tn(n){let e,t,s=F.sanitize(n[0].hint)+"";return{c(){e=d("div"),t=d("p"),c(e,"class","row border-start border-3 border-secondary-subtle m-1 mt-3 mb-3")},m(i,l){y(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=F.sanitize(i[0].hint)+"")&&(t.innerHTML=s)},d(i){i&&v(e)}}}function En(n){let e,t,s;function i(r){n[21](r)}let l={submitAnswer:n[7],hasAnswer:!!n[6]};return n[0].answers[0]!==void 0&&(l.answer=n[0].answers[0]),e=new an({props:l}),fe.push(()=>ae(e,"answer",i)),{c(){ye(e.$$.fragment)},m(r,o){ve(e,r,o),s=!0},p(r,o){const f={};o&128&&(f.submitAnswer=r[7]),o&64&&(f.hasAnswer=!!r[6]),!t&&o&1&&(t=!0,f.answer=r[0].answers[0],ue(()=>t=!1)),e.$set(f)},i(r){s||(j(e.$$.fragment,r),s=!0)},o(r){U(e.$$.fragment,r),s=!1},d(r){ke(e,r)}}}function Kn(n){let e,t;return e=new mn({props:{submitAnswer:n[7],hasAnswer:!!n[6]}}),{c(){ye(e.$$.fragment)},m(s,i){ve(e,s,i),t=!0},p(s,i){const l={};i&128&&(l.submitAnswer=s[7]),i&64&&(l.hasAnswer=!!s[6]),e.$set(l)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){ke(e,s)}}}function On(n){let e=[],t=new Map,s,i,l=ce(n[0].answers);const r=o=>o[23].id;for(let o=0;o<l.length;o+=1){let f=at(n,l,o),a=r(f);t.set(a,e[o]=pt(a,f))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();s=ie()},m(o,f){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(o,f);y(o,s,f),i=!0},p(o,f){f&155&&(l=ce(o[0].answers),be(),e=Ct(e,f,r,1,o,l,t,s.parentNode,Ot,pt,s,at),we())},i(o){if(!i){for(let f=0;f<l.length;f+=1)j(e[f]);i=!0}},o(o){for(let f=0;f<e.length;f+=1)U(e[f]);i=!1},d(o){o&&v(s);for(let f=0;f<e.length;f+=1)e[f].d(o)}}}function pt(n,e){let t,s,i,l,r,o,f;function a(g){e[17](g,e[23],e[24],e[25])}function u(g){e[18](g,e[23])}function p(g){e[19](g)}function k(g){e[20](g)}let _={submitAnswer:e[7],questionIsAnswered:e[1].isAnswered,answerNumber:e[25]+1};return e[23]!==void 0&&(_.answer=e[23]),e[1].answerContext[e[23].id]!==void 0&&(_.answerContext=e[1].answerContext[e[23].id]),e[3]!==void 0&&(_.examMode=e[3]),e[4]!==void 0&&(_.settingsShowAnswerStats=e[4]),s=new ln({props:_}),fe.push(()=>ae(s,"answer",a)),fe.push(()=>ae(s,"answerContext",u)),fe.push(()=>ae(s,"examMode",p)),fe.push(()=>ae(s,"settingsShowAnswerStats",k)),{key:n,first:null,c(){t=ie(),ye(s.$$.fragment),this.first=t},m(g,b){y(g,t,b),ve(s,g,b),f=!0},p(g,b){e=g;const q={};b&128&&(q.submitAnswer=e[7]),b&2&&(q.questionIsAnswered=e[1].isAnswered),b&1&&(q.answerNumber=e[25]+1),!i&&b&1&&(i=!0,q.answer=e[23],ue(()=>i=!1)),!l&&b&3&&(l=!0,q.answerContext=e[1].answerContext[e[23].id],ue(()=>l=!1)),!r&&b&8&&(r=!0,q.examMode=e[3],ue(()=>r=!1)),!o&&b&16&&(o=!0,q.settingsShowAnswerStats=e[4],ue(()=>o=!1)),s.$set(q)},i(g){f||(j(s.$$.fragment,g),f=!0)},o(g){U(s.$$.fragment,g),f=!1},d(g){g&&v(t),ke(s,g)}}}function gt(n){let e,t,s,i=F.sanitize(n[0].comment)+"";return{c(){e=d("div"),t=d("div"),s=d("div"),c(s,"class","alert alert-light"),c(s,"role","alert"),c(t,"class","col"),c(e,"class","row")},m(l,r){y(l,e,r),m(e,t),m(t,s),s.innerHTML=i},p(l,r){r&1&&i!==(i=F.sanitize(l[0].comment)+"")&&(s.innerHTML=i)},d(l){l&&v(e)}}}function ht(n){let e,t,s,i;return{c(){e=d("li"),t=d("button"),t.innerHTML='<i class="bi bi-arrow-counterclockwise"></i> Reset answer',c(t,"type","button"),c(t,"class","dropdown-item btn btn-sm")},m(l,r){y(l,e,r),m(e,t),s||(i=D(t,"click",V(function(){Et(n[8])&&n[8].apply(this,arguments)})),s=!0)},p(l,r){n=l},d(l){l&&v(e),s=!1,i()}}}function kt(n){let e,t,s,i,l,r,o;return{c(){e=d("li"),e.innerHTML='<hr class="dropdown-divider"/>',t=L(),s=d("li"),i=d("a"),l=d("i"),r=pe(" Open in deck editor"),c(l,"class","bi bi-collection"),c(i,"class","dropdown-item btn btn-sm"),c(i,"href",o="/decks/"+n[5]+"/questions/edit?question_id="+n[0].id),c(i,"role","button")},m(f,a){y(f,e,a),y(f,t,a),y(f,s,a),m(s,i),m(i,l),m(i,r)},p(f,a){a&33&&o!==(o="/decks/"+f[5]+"/questions/edit?question_id="+f[0].id)&&c(i,"href",o)},d(f){f&&(v(e),v(t),v(s))}}}function vt(n){let e,t;return e=new An({props:{questionId:n[0].id}}),{c(){ye(e.$$.fragment)},m(s,i){ve(e,s,i),t=!0},p(s,i){const l={};i&1&&(l.questionId=s[0].id),e.$set(l)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){ke(e,s)}}}function yt(n){let e,t,s,i;return{c(){e=d("div"),t=d("button"),t.textContent="→ Show answer",c(t,"type","button"),c(t,"class","btn btn-outline-secondary btn-sm"),c(e,"class","mt-3")},m(l,r){y(l,e,r),m(e,t),s||(i=D(t,"click",V(n[22])),s=!0)},p:K,d(l){l&&v(e),s=!1,i()}}}function Hn(n){let e,t,s,i;const l=[Sn,Cn],r=[];function o(f,a){return f[0]?0:1}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),s=ie()},m(f,a){r[e].m(f,a),y(f,s,a),i=!0},p(f,[a]){let u=e;e=o(f),e===u?r[e].p(f,a):(be(),U(r[u],1,1,()=>{r[u]=null}),we(),t=r[e],t?t.p(f,a):(t=r[e]=l[e](f),t.c()),j(t,1),t.m(s.parentNode,s))},i(f){i||(j(t),i=!0)},o(f){U(t),i=!1},d(f){f&&v(s),r[e].d(f)}}}function Nn(n){const e=n.target;!e.classList.contains("bg-danger-subtle")&&!e.classList.contains("bg-warning-subtle")&&!e.classList.contains("bg-success-subtle")?e.classList.add("bg-success-subtle"):e.classList.contains("bg-success-subtle")?(e.classList.remove("bg-success-subtle"),e.classList.add("bg-danger-subtle")):e.classList.contains("bg-danger-subtle")?(e.classList.remove("bg-danger-subtle"),e.classList.add("bg-warning-subtle")):e.classList.contains("bg-warning-subtle")&&e.classList.remove("bg-warning-subtle")}function zn(n,e,t){let{deckId:s}=e,{question:i}=e,{questionContext:l}=e,{helpUsed:r}=e,{answerChoice:o}=e,{submitAnswer:f}=e,{deleteAnswer:a}=e,{examMode:u}=e,{updateCurrentQuestionData:p}=e,{settingsShuffleAnswers:k}=e,{settingsShowAnswerStats:_}=e;var g=!1,b=l.isAnswered;function q(){const A=!g;A&&p?p().then(()=>{t(9,g=A)}):t(9,g=A)}function E(A){i=A,t(0,i),t(13,k),t(1,l)}function T(A){n.$$.not_equal(i.images,A)&&(i.images=A,t(0,i),t(13,k),t(1,l))}const O=()=>{t(10,b=!0),t(2,r=!0)};function Y(A,te,Ae,re){Ae[re]=A,t(0,i),t(13,k),t(1,l)}function H(A,te){n.$$.not_equal(l.answerContext[te.id],A)&&(l.answerContext[te.id]=A,t(1,l))}function h(A){u=A,t(3,u)}function C(A){_=A,t(4,_)}function w(A){n.$$.not_equal(i.answers[0],A)&&(i.answers[0]=A,t(0,i),t(13,k),t(1,l))}const M=()=>f();return n.$$set=A=>{"deckId"in A&&t(5,s=A.deckId),"question"in A&&t(0,i=A.question),"questionContext"in A&&t(1,l=A.questionContext),"helpUsed"in A&&t(2,r=A.helpUsed),"answerChoice"in A&&t(6,o=A.answerChoice),"submitAnswer"in A&&t(7,f=A.submitAnswer),"deleteAnswer"in A&&t(8,a=A.deleteAnswer),"examMode"in A&&t(3,u=A.examMode),"updateCurrentQuestionData"in A&&t(12,p=A.updateCurrentQuestionData),"settingsShuffleAnswers"in A&&t(13,k=A.settingsShuffleAnswers),"settingsShowAnswerStats"in A&&t(4,_=A.settingsShowAnswerStats)},n.$$.update=()=>{n.$$.dirty&8195&&(i.answers.forEach((A,te)=>{A.badgeText="ABCDEFGHIJKLMN".charAt(te)}),i&&i.type==="mc"&&k&&!l.isAnswered&&!Object.values(l.answerContext).some(A=>A.isSelectedAnswer)&&t(0,i.answers=Nt.shuffle(i.answers),i)),n.$$.dirty&3&&(t(10,b=l.isAnswered),t(2,r=l.isAnswered)),n.$$.dirty&1&&(()=>{var A=document.querySelectorAll("#questionText li");[].map.call(A,function(te){te.addEventListener("click",Nn,!1)})})()},[i,l,r,u,_,s,o,f,a,g,b,q,p,k,E,T,O,Y,H,h,C,w,M]}class Un extends ge{constructor(e){super(),he(this,e,zn,Hn,de,{deckId:5,question:0,questionContext:1,helpUsed:2,answerChoice:6,submitAnswer:7,deleteAnswer:8,examMode:3,updateCurrentQuestionData:12,settingsShuffleAnswers:13,settingsShowAnswerStats:4})}}export{Un as S,$ as h};
