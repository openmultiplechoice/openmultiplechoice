import{S as ke,i as ve,s as be,c as d,a as M,f,o as ue,b as y,h as m,n as O,d as A,l as D,p as Y,e as re,B as De,C as qt,I as ze,E as Le,j as xe,m as $e,t as Ie,q as Lt,y as V,z as _e,x as j,D as we,k as pe,r as ge,u as ye,v as Ae,w as he,A as Ce,K as Ht}from"./index-BBxbQYOu.js";import{e as de,u as Mt,d as zt,o as It}from"./each-DRTt0YH0.js";import{p as B,d as Dt}from"./purify.es-DfBF0len.js";import{_ as Nt}from"./lodash-D0JQdfhu.js";import{Q as jt}from"./QuestionForm-DL-Tikwj.js";const Ue=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Ve(n,e,t,s){n.addEventListener?n.addEventListener(e,t,s):n.attachEvent&&n.attachEvent("on".concat(e),t)}function qe(n,e,t,s){n.removeEventListener?n.removeEventListener(e,t,s):n.detachEvent&&n.detachEvent("on".concat(e),t)}function St(n,e){const t=e.slice(0,e.length-1);for(let s=0;s<t.length;s++)t[s]=n[t[s].toLowerCase()];return t}function Et(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");const e=n.split(",");let t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function Pt(n,e){const t=n.length>=e.length?n:e,s=n.length>=e.length?e:n;let i=!0;for(let l=0;l<t.length;l++)s.indexOf(t[l])===-1&&(i=!1);return i}const Se={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Ue?173:189,"=":Ue?61:187,";":Ue?59:186,"'":222,"[":219,"]":221,"\\":220},ie={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Fe={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},U={16:!1,18:!1,17:!1,91:!1},z={};for(let n=1;n<20;n++)Se["f".concat(n)]=111+n;let K=[],Me=null,Tt="all";const le=new Map,Te=n=>Se[n.toLowerCase()]||ie[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),Qt=n=>Object.keys(Se).find(e=>Se[e]===n),Ut=n=>Object.keys(ie).find(e=>ie[e]===n);function Kt(n){Tt=n||"all"}function Ee(){return Tt||"all"}function Vt(){return K.slice(0)}function Bt(){return K.map(n=>Qt(n)||Ut(n)||String.fromCharCode(n))}function Ft(){const n=[];return Object.keys(z).forEach(e=>{z[e].forEach(t=>{let{key:s,scope:i,mods:l,shortcut:r}=t;n.push({scope:i,shortcut:r,mods:l,keys:s.split("+").map(o=>Te(o))})})}),n}function Rt(n){const e=n.target||n.srcElement,{tagName:t}=e;let s=!0;const i=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(s=!1),s}function Gt(n){return typeof n=="string"&&(n=Te(n)),K.indexOf(n)!==-1}function Jt(n,e){let t,s;n||(n=Ee());for(const i in z)if(Object.prototype.hasOwnProperty.call(z,i))for(t=z[i],s=0;s<t.length;)t[s].scope===n?t.splice(s,1).forEach(r=>{let{element:o}=r;return Re(o)}):s++;Ee()===n&&Kt(e||"all")}function Wt(n){let e=n.keyCode||n.which||n.charCode;const t=K.indexOf(e);if(t>=0&&K.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&K.splice(0,K.length),(e===93||e===224)&&(e=91),e in U){U[e]=!1;for(const s in ie)ie[s]===e&&($[s]=!1)}}function Ot(n){if(typeof n>"u")Object.keys(z).forEach(i=>{Array.isArray(z[i])&&z[i].forEach(l=>He(l)),delete z[i]}),Re(null);else if(Array.isArray(n))n.forEach(i=>{i.key&&He(i)});else if(typeof n=="object")n.key&&He(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];let[i,l]=t;typeof i=="function"&&(l=i,i=""),He({key:n,scope:i,method:l,splitKey:"+"})}}const He=n=>{let{key:e,scope:t,method:s,splitKey:i="+"}=n;Et(e).forEach(r=>{const o=r.split(i),c=o.length,u=o[c-1],a=u==="*"?"*":Te(u);if(!z[a])return;t||(t=Ee());const b=c>1?St(ie,o):[],h=[];z[a]=z[a].filter(g=>{const p=(s?g.method===s:!0)&&g.scope===t&&Pt(g.mods,b);return p&&h.push(g.element),!p}),h.forEach(g=>Re(g))})};function et(n,e,t,s){if(e.element!==s)return;let i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(const l in U)Object.prototype.hasOwnProperty.call(U,l)&&(!U[l]&&e.mods.indexOf(+l)>-1||U[l]&&e.mods.indexOf(+l)===-1)&&(i=!1);(e.mods.length===0&&!U[16]&&!U[18]&&!U[17]&&!U[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(K),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}function tt(n,e){const t=z["*"];let s=n.keyCode||n.which||n.charCode;if(!$.filter.call(this,n))return;if((s===93||s===224)&&(s=91),K.indexOf(s)===-1&&s!==229&&K.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(o=>{const c=Fe[o];n[o]&&K.indexOf(c)===-1?K.push(c):!n[o]&&K.indexOf(c)>-1?K.splice(K.indexOf(c),1):o==="metaKey"&&n[o]&&K.length===3&&(n.ctrlKey||n.shiftKey||n.altKey||(K=K.slice(K.indexOf(c))))}),s in U){U[s]=!0;for(const o in ie)ie[o]===s&&($[o]=!0);if(!t)return}for(const o in U)Object.prototype.hasOwnProperty.call(U,o)&&(U[o]=n[Fe[o]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(K.indexOf(17)===-1&&K.push(17),K.indexOf(18)===-1&&K.push(18),U[17]=!0,U[18]=!0);const i=Ee();if(t)for(let o=0;o<t.length;o++)t[o].scope===i&&(n.type==="keydown"&&t[o].keydown||n.type==="keyup"&&t[o].keyup)&&et(n,t[o],i,e);if(!(s in z))return;const l=z[s],r=l.length;for(let o=0;o<r;o++)if((n.type==="keydown"&&l[o].keydown||n.type==="keyup"&&l[o].keyup)&&l[o].key){const c=l[o],{splitKey:u}=c,a=c.key.split(u),b=[];for(let h=0;h<a.length;h++)b.push(Te(a[h]));b.sort().join("")===K.sort().join("")&&et(n,c,i,e)}}function $(n,e,t){K=[];const s=Et(n);let i=[],l="all",r=document,o=0,c=!1,u=!0,a="+",b=!1,h=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(l=e.scope),e.element&&(r=e.element),e.keyup&&(c=e.keyup),e.keydown!==void 0&&(u=e.keydown),e.capture!==void 0&&(b=e.capture),typeof e.splitKey=="string"&&(a=e.splitKey),e.single===!0&&(h=!0)),typeof e=="string"&&(l=e),h&&Ot(n,l);o<s.length;o++)n=s[o].split(a),i=[],n.length>1&&(i=St(ie,n)),n=n[n.length-1],n=n==="*"?"*":Te(n),n in z||(z[n]=[]),z[n].push({keyup:c,keydown:u,scope:l,mods:i,shortcut:s[o],method:t,key:s[o],splitKey:a,element:r});if(typeof r<"u"&&window){if(!le.has(r)){const g=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return tt(p,r)},k=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;tt(p,r),Wt(p)};le.set(r,{keydownListener:g,keyupListenr:k,capture:b}),Ve(r,"keydown",g,b),Ve(r,"keyup",k,b)}if(!Me){const g=()=>{K=[]};Me={listener:g,capture:b},Ve(window,"focus",g,b)}}}function Xt(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(z).forEach(t=>{z[t].filter(i=>i.scope===e&&i.shortcut===n).forEach(i=>{i&&i.method&&i.method()})})}function Re(n){const e=Object.values(z).flat();if(e.findIndex(s=>{let{element:i}=s;return i===n})<0){const{keydownListener:s,keyupListenr:i,capture:l}=le.get(n)||{};s&&i&&(qe(n,"keyup",i,l),qe(n,"keydown",s,l),le.delete(n))}if((e.length<=0||le.size<=0)&&(Object.keys(le).forEach(i=>{const{keydownListener:l,keyupListenr:r,capture:o}=le.get(i)||{};l&&r&&(qe(i,"keyup",r,o),qe(i,"keydown",l,o),le.delete(i))}),le.clear(),Object.keys(z).forEach(i=>delete z[i]),Me)){const{listener:i,capture:l}=Me;qe(window,"focus",i,l),Me=null}}const Be={getPressedKeyString:Bt,setScope:Kt,getScope:Ee,deleteScope:Jt,getPressedKeyCodes:Vt,getAllKeyCodes:Ft,isPressed:Gt,filter:Rt,trigger:Xt,unbind:Ot,keyMap:Se,modifier:ie,modifierMap:Fe};for(const n in Be)Object.prototype.hasOwnProperty.call(Be,n)&&($[n]=Be[n]);if(typeof window<"u"){const n=window.hotkeys;$.noConflict=e=>(e&&window.hotkeys===$&&(window.hotkeys=n),$),window.hotkeys=$}function Yt(n){let e,t;return{c(){e=d("div"),t=d("p"),t.textContent=`${n[7]}`,f(t,"class","badge text-dark"),f(e,"class","col-1 border-start-3")},m(s,i){y(s,e,i),m(e,t)},p:O,d(s){s&&A(e)}}}function Zt(n){let e,t,s,i;return{c(){e=d("div"),t=d("p"),t.textContent=`${n[7]}`,f(t,"class","badge text-dark"),f(e,"class","col-1 border-start-3 cursor-pointer svelte-12xdzqf")},m(l,r){y(l,e,r),m(e,t),s||(i=D(e,"click",n[9]),s=!0)},p:O,d(l){l&&A(e),s=!1,i()}}}function xt(n){let e,t,s=B.sanitize(n[0].text)+"";return{c(){e=d("div"),t=d("p"),f(t,"class","p-1"),f(e,"class","col-10")},m(i,l){y(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=B.sanitize(i[0].text)+"")&&(t.innerHTML=s)},d(i){i&&A(e)}}}function $t(n){let e,t,s=B.sanitize(n[0].text)+"",i,l;return{c(){e=d("div"),t=d("p"),f(t,"class","p-1"),f(e,"class","col-10 cursor-pointer svelte-12xdzqf")},m(r,o){y(r,e,o),m(e,t),t.innerHTML=s,i||(l=D(e,"click",n[10]),i=!0)},p(r,o){o&1&&s!==(s=B.sanitize(r[0].text)+"")&&(t.innerHTML=s)},d(r){r&&A(e),i=!1,l()}}}function en(n){let e;return{c(){e=d("span"),e.textContent="✓",f(e,"class","text-secondary fw-bold fs-3")},m(t,s){y(t,e,s)},p:O,d(t){t&&A(e)}}}function tn(n){let e;return{c(){e=d("span"),e.textContent="✗",f(e,"class","text-danger-dark fw-bold fs-3")},m(t,s){y(t,e,s)},p:O,d(t){t&&A(e)}}}function nn(n){let e;return{c(){e=d("span"),e.textContent="⇠",f(e,"class","text-success-dark fw-bold fs-3")},m(t,s){y(t,e,s)},p:O,d(t){t&&A(e)}}}function sn(n){let e;return{c(){e=d("span"),e.textContent="✓",f(e,"class","text-success-dark fw-bold fs-3")},m(t,s){y(t,e,s)},p:O,d(t){t&&A(e)}}}function ln(n){let e,t,s;return{c(){e=d("button"),f(e,"type","button"),f(e,"class","btn-close")},m(i,l){y(i,e,l),t||(s=D(e,"click",Y(n[11])),t=!0)},p:O,d(i){i&&A(e),t=!1,s()}}}function nt(n){let e,t,s,i,l=B.sanitize(n[0].hint)+"";return{c(){e=d("div"),t=M(),s=d("div"),i=d("p"),f(e,"class","col-1 border-3 border-start border-secondary-subtle"),f(i,"class","p-1"),f(s,"class","col-11")},m(r,o){y(r,e,o),y(r,t,o),y(r,s,o),m(s,i),i.innerHTML=l},p(r,o){o&1&&l!==(l=B.sanitize(r[0].hint)+"")&&(i.innerHTML=l)},d(r){r&&(A(e),A(t),A(s))}}}function rn(n){let e,t,s,i,l,r,o,c;function u(_,T){return!_[2]&&!_[1].isSubmittedAnswer?Zt:Yt}let a=u(n),b=a(n);function h(_,T){return!_[2]&&!_[1].isSelectedAnswer?$t:xt}let g=h(n),k=g(n);function p(_,T){if(!_[2]&&!_[1].isSelectedAnswer)return ln;if(!_[4]&&_[1].isCorrectAnswer&&_[1].isSubmittedAnswer)return sn;if(!_[4]&&_[1].isCorrectAnswer&&!_[1].isSubmittedAnswer&&_[2])return nn;if(!_[4]&&_[1].isSubmittedAnswer)return tn;if(_[4]&&_[1].isSubmittedAnswer)return en}let E=p(n),S=E&&E(n),v=!n[4]&&n[0].hint&&(n[2]||n[1].isSelectedAnswer)&&nt(n);return{c(){e=d("div"),b.c(),t=M(),k.c(),s=M(),i=d("div"),S&&S.c(),o=M(),c=d("div"),v&&v.c(),f(i,"class","col-1 ps-1"),f(e,"id",l="answer"+n[0].id),f(e,"class",r="row border-start border-3 m-1 pt-2 "+n[5]+" svelte-12xdzqf"),ue(e,"bg-light",n[4]||!n[2]&&!n[1].isSelectedAnswer&&!n[1].isSubmittedAnswer||n[2]&&!n[1].isSubmittedAnswer&&!n[1].isCorrectAnswer),ue(e,"text-bg-success",!n[6]&&!n[4]&&n[2]&&n[1].isCorrectAnswer),ue(e,"text-bg-danger",!n[6]&&!n[4]&&n[1].isSelectedAnswer&&!n[1].isCorrectAnswer),ue(e,"bg-cancelled",n[6]),f(c,"class","row ms-1 mb-2 me-1")},m(_,T){y(_,e,T),b.m(e,null),m(e,t),k.m(e,null),m(e,s),m(e,i),S&&S.m(i,null),y(_,o,T),y(_,c,T),v&&v.m(c,null)},p(_,[T]){a===(a=u(_))&&b?b.p(_,T):(b.d(1),b=a(_),b&&(b.c(),b.m(e,t))),g===(g=h(_))&&k?k.p(_,T):(k.d(1),k=g(_),k&&(k.c(),k.m(e,s))),E===(E=p(_))&&S?S.p(_,T):(S&&S.d(1),S=E&&E(_),S&&(S.c(),S.m(i,null))),T&1&&l!==(l="answer"+_[0].id)&&f(e,"id",l),T&32&&r!==(r="row border-start border-3 m-1 pt-2 "+_[5]+" svelte-12xdzqf")&&f(e,"class",r),T&54&&ue(e,"bg-light",_[4]||!_[2]&&!_[1].isSelectedAnswer&&!_[1].isSubmittedAnswer||_[2]&&!_[1].isSubmittedAnswer&&!_[1].isCorrectAnswer),T&118&&ue(e,"text-bg-success",!_[6]&&!_[4]&&_[2]&&_[1].isCorrectAnswer),T&114&&ue(e,"text-bg-danger",!_[6]&&!_[4]&&_[1].isSelectedAnswer&&!_[1].isCorrectAnswer),T&96&&ue(e,"bg-cancelled",_[6]),!_[4]&&_[0].hint&&(_[2]||_[1].isSelectedAnswer)?v?v.p(_,T):(v=nt(_),v.c(),v.m(c,null)):v&&(v.d(1),v=null)},i:O,o:O,d(_){_&&(A(e),A(o),A(c)),b.d(),k.d(),S&&S.d(),v&&v.d()}}}function on(n,e,t){let{answer:s}=e,{answerContext:i}=e,{answerNumber:l}=e,{questionIsAnswered:r}=e,{submitAnswer:o}=e,{examMode:c}=e;var u,a,b=s.badgeText;const h=()=>o(s.id),g=()=>o(s.id),k=()=>t(6,a=!a);return n.$$set=p=>{"answer"in p&&t(0,s=p.answer),"answerContext"in p&&t(1,i=p.answerContext),"answerNumber"in p&&t(8,l=p.answerNumber),"questionIsAnswered"in p&&t(2,r=p.questionIsAnswered),"submitAnswer"in p&&t(3,o=p.submitAnswer),"examMode"in p&&t(4,c=p.examMode)},n.$$.update=()=>{n.$$.dirty&265&&($.unbind(`${b}, ${l}`,"questions"),$(`${b}, ${l}`,"questions",function(){o(s.id)})),n.$$.dirty&23&&s&&(t(6,a=!1),t(5,u="border-secondary"),c||(r?i.isCorrectAnswer?t(5,u="border-success"):i.isSubmittedAnswer&&t(5,u="border-danger"):i.isSelectedAnswer&&t(5,u="border-danger")))},[s,i,r,o,c,u,a,b,l,h,g,k]}class cn extends ke{constructor(e){super(),ve(this,e,on,rn,be,{answer:0,answerContext:1,answerNumber:8,questionIsAnswered:2,submitAnswer:3,examMode:4})}}function fn(n){let e,t,s,i,l;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Show answer",f(s,"type","button"),f(s,"class","btn btn-warning btn-sm w-100"),f(t,"class","col-md"),f(e,"class","row")},m(r,o){y(r,e,o),m(e,t),m(t,s),i||(l=D(s,"click",Y(n[4])),i=!0)},p:O,d(r){r&&A(e),i=!1,l()}}}function an(n){let e,t,s=B.sanitize(n[0].text)+"",i,l,r=!n[1]&&st(n);return{c(){e=d("div"),t=d("p"),i=M(),r&&r.c(),l=re(),f(t,"class","p-1"),f(e,"class","row border-light border-start border-3 m-1 p-2")},m(o,c){y(o,e,c),m(e,t),t.innerHTML=s,y(o,i,c),r&&r.m(o,c),y(o,l,c)},p(o,c){c&1&&s!==(s=B.sanitize(o[0].text)+"")&&(t.innerHTML=s),o[1]?r&&(r.d(1),r=null):r?r.p(o,c):(r=st(o),r.c(),r.m(l.parentNode,l))},d(o){o&&(A(e),A(i),A(l)),r&&r.d(o)}}}function st(n){let e,t,s,i,l,r,o,c;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Ask me again",i=M(),l=d("div"),r=d("button"),r.textContent="I got it!",f(s,"type","button"),f(s,"class","btn btn-danger btn-sm w-100"),f(t,"class","col-md-6 mb-1"),f(r,"type","button"),f(r,"class","btn btn-success btn-sm w-100"),f(l,"class","col-md-6 mb-1"),f(e,"class","row")},m(u,a){y(u,e,a),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),o||(c=[D(s,"click",Y(n[5])),D(r,"click",Y(n[6]))],o=!0)},p:O,d(u){u&&A(e),o=!1,De(c)}}}function un(n){let e;function t(l,r){return l[3]?an:fn}let s=t(n),i=s(n);return{c(){i.c(),e=re()},m(l,r){i.m(l,r),y(l,e,r)},p(l,[r]){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:O,o:O,d(l){l&&A(e),i.d(l)}}}function dn(n,e,t){let{answer:s}=e,{hasAnswer:i}=e,{submitAnswer:l}=e;var r=!1;function o(){t(3,r=!r)}const c=()=>l(),u=()=>l(s.id);return n.$$set=a=>{"answer"in a&&t(0,s=a.answer),"hasAnswer"in a&&t(1,i=a.hasAnswer),"submitAnswer"in a&&t(2,l=a.submitAnswer)},n.$$.update=()=>{n.$$.dirty&2&&(i?t(3,r=!0):t(3,r=!1))},[s,i,l,r,o,c,u]}class mn extends ke{constructor(e){super(),ve(this,e,dn,un,be,{answer:0,hasAnswer:1,submitAnswer:2})}}function it(n){let e,t,s,i,l,r,o,c;return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent="Ask me again",i=M(),l=d("div"),r=d("button"),r.textContent="I got it!",f(s,"type","button"),f(s,"class","btn btn-danger btn-sm w-100"),f(t,"class","col-md-6 mb-1"),f(r,"type","button"),f(r,"class","btn btn-success btn-sm w-100"),f(l,"class","col-md-6 mb-1"),f(e,"class","row")},m(u,a){y(u,e,a),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),o||(c=[D(s,"click",Y(n[2])),D(r,"click",Y(n[3]))],o=!0)},p:O,d(u){u&&A(e),o=!1,De(c)}}}function bn(n){let e,t=!n[0]&&it(n);return{c(){t&&t.c(),e=re()},m(s,i){t&&t.m(s,i),y(s,e,i)},p(s,[i]){s[0]?t&&(t.d(1),t=null):t?t.p(s,i):(t=it(s),t.c(),t.m(e.parentNode,e))},i:O,o:O,d(s){s&&A(e),t&&t.d(s)}}}function _n(n,e,t){let{hasAnswer:s}=e,{submitAnswer:i}=e;const l=()=>i(),r=()=>i(-1);return n.$$set=o=>{"hasAnswer"in o&&t(0,s=o.hasAnswer),"submitAnswer"in o&&t(1,i=o.submitAnswer)},[s,i,l,r]}class wn extends ke{constructor(e){super(),ve(this,e,_n,bn,be,{hasAnswer:0,submitAnswer:1})}}function lt(n,e,t){const s=n.slice();return s[7]=e[t],s}function pn(n){let e,t,s,i,l,r,o,c,u;return{c(){e=d("div"),t=d("p"),s=d("button"),i=M(),l=d("div"),r=d("img"),f(s,"type","button"),f(s,"class","btn-close"),f(t,"class","bg-white text-end"),f(r,"class","img-fluid border border-5 border-white"),ze(r.src,o="/"+n[2].path)||f(r,"src",o),f(r,"alt",""),f(l,"class","text-center"),f(e,"class","img-fullscreen svelte-z0la5k")},m(a,b){y(a,e,b),m(e,t),m(t,s),m(e,i),m(e,l),m(l,r),c||(u=[D(s,"click",Y(n[5])),D(e,"click",n[3])],c=!0)},p(a,b){b&4&&!ze(r.src,o="/"+a[2].path)&&f(r,"src",o)},d(a){a&&A(e),c=!1,De(u)}}}function gn(n){let e,t,s=[],i=new Map,l=de(n[0]);const r=o=>o[7].id;for(let o=0;o<l.length;o+=1){let c=lt(n,l,o),u=r(c);i.set(u,s[o]=rt(u,c))}return{c(){e=d("div"),t=d("div");for(let o=0;o<s.length;o+=1)s[o].c();f(t,"class","row row-cols-1 row-cols-sm-3 g-4"),f(e,"class","col-lg")},m(o,c){y(o,e,c),m(e,t);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(t,null)},p(o,c){c&9&&(l=de(o[0]),s=Mt(s,c,r,1,o,l,i,t,zt,rt,null,lt))},d(o){o&&A(e);for(let c=0;c<s.length;c+=1)s[c].d()}}}function rt(n,e){let t,s,i,l,r,o,c;function u(){return e[4](e[7])}return{key:n,first:null,c(){t=d("div"),s=d("div"),i=d("img"),r=M(),ze(i.src,l="/"+e[7].path)||f(i,"src",l),f(i,"class","card-img-top"),f(i,"alt",""),f(s,"class","card"),Le(s,"max-width","18rem"),Le(s,"cursor","pointer"),f(t,"class","col"),this.first=t},m(a,b){y(a,t,b),m(t,s),m(s,i),m(t,r),o||(c=D(i,"click",u),o=!0)},p(a,b){e=a,b&1&&!ze(i.src,l="/"+e[7].path)&&f(i,"src",l)},d(a){a&&A(t),o=!1,c()}}}function hn(n){let e;function t(l,r){return l[1]?pn:gn}let s=t(n),i=s(n);return{c(){i.c(),e=re()},m(l,r){i.m(l,r),y(l,e,r)},p(l,[r]){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:O,o:O,d(l){l&&A(e),i.d(l)}}}function kn(n,e,t){let{images:s=[]}=e;var i=!1,l;qt(()=>{$("esc","images",function(a,b){i&&t(1,i=!1)})});var r;function o(a){r&&r.cancel(),r=Dt(()=>{t(1,i=!i),t(2,l=s.find(b=>b.id===a))},100,{maxWait:200}),r()}const c=a=>o(a.id),u=()=>t(1,i=!i);return n.$$set=a=>{"images"in a&&t(0,s=a.images)},n.$$.update=()=>{n.$$.dirty&2&&(i?$.setScope("images"):$.setScope("questions"))},[s,i,l,o,c,u]}class vn extends ke{constructor(e){super(),ve(this,e,kn,hn,be,{images:0})}}function ot(n,e,t){const s=n.slice();return s[12]=e[t],s}function ct(n,e,t){const s=n.slice();return s[12]=e[t],s}function ft(n){let e,t,s,i=n[12].name+"",l,r,o,c,u,a,b;function h(){return n[7](n[12])}return{c(){e=d("div"),t=d("div"),s=d("a"),l=Ie(i),o=M(),c=d("div"),u=d("button"),u.textContent="Add",f(s,"href",r="/decks/"+n[12].id),f(s,"class","link-dark"),f(t,"class","col-9 text-overflow svelte-1gfmo48"),f(u,"class","btn btn-sm btn-primary float-end"),f(c,"class","col-3 d-grid gap-4"),f(e,"class","row mb-1")},m(g,k){y(g,e,k),m(e,t),m(t,s),m(s,l),m(e,o),m(e,c),m(c,u),a||(b=D(u,"click",Y(h)),a=!0)},p(g,k){n=g,k&2&&i!==(i=n[12].name+"")&&Lt(l,i),k&2&&r!==(r="/decks/"+n[12].id)&&f(s,"href",r)},d(g){g&&A(e),a=!1,b()}}}function at(n){let e;return{c(){e=d("hr")},m(t,s){y(t,e,s)},d(t){t&&A(e)}}}function ut(n){let e,t,s,i=n[12].name+"",l,r,o,c,u,a,b;function h(){return n[8](n[12])}return{c(){e=d("div"),t=d("div"),s=d("a"),l=Ie(i),o=M(),c=d("div"),u=d("button"),u.textContent="Remove",f(s,"href",r="/decks/"+n[12].id),f(s,"class","link-dark"),f(t,"class","col-9 text-overflow svelte-1gfmo48"),f(u,"class","btn btn-sm btn-outline-secondary float-end"),f(c,"class","col-3 d-grid gap-4"),f(e,"class","row mb-1")},m(g,k){y(g,e,k),m(e,t),m(t,s),m(s,l),m(e,o),m(e,c),m(c,u),a||(b=D(u,"click",Y(h)),a=!0)},p(g,k){n=g,k&1&&i!==(i=n[12].name+"")&&Lt(l,i),k&1&&r!==(r="/decks/"+n[12].id)&&f(s,"href",r)},d(g){g&&A(e),a=!1,b()}}}function dt(n){let e;return{c(){e=d("p"),e.textContent="You don't have any decks yet."},m(t,s){y(t,e,s)},d(t){t&&A(e)}}}function yn(n){let e,t,s,i,l,r,o,c,u,a,b,h,g,k,p,E,S,v,_,T,F,oe,ne=de(n[1]),w=[];for(let q=0;q<ne.length;q+=1)w[q]=ft(ct(n,ne,q));let H=n[1].length>0&&n[0].length>0&&at(),ee=de(n[0]),I=[];for(let q=0;q<ee.length;q+=1)I[q]=ut(ot(n,ee,q));let P=n[1].length===0&&n[0].length===0&&dt();return{c(){e=d("button"),e.innerHTML='<i class="bi bi-collection"></i> Add to deck',t=M(),s=d("div"),i=d("div"),i.innerHTML='<h5 id="offcanvasAddToDeckLabel">Add question to deck</h5> <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>',l=M(),r=d("div");for(let q=0;q<w.length;q+=1)w[q].c();o=M(),H&&H.c(),c=M();for(let q=0;q<I.length;q+=1)I[q].c();u=M(),P&&P.c(),a=M(),b=d("hr"),h=M(),g=d("div"),k=d("div"),p=d("p"),p.textContent="Create new deck:",E=M(),S=d("div"),v=d("input"),_=M(),T=d("button"),T.textContent="Create deck and add question",f(e,"class","btn btn-outline-secondary btn-sm"),f(e,"type","button"),f(e,"data-bs-toggle","offcanvas"),f(e,"data-bs-target","#offcanvasAddToDeck"),f(e,"aria-controls","offcanvasAddToDeck"),f(i,"class","offcanvas-header"),f(v,"type","text"),f(v,"class","form-control"),f(v,"id","name"),f(v,"name","name"),f(v,"placeholder","My new deck ..."),f(S,"class","mb-3"),f(T,"class","btn btn-sm btn-primary"),f(k,"class","col"),f(g,"class","row"),f(r,"class","offcanvas-body"),f(s,"class","offcanvas offcanvas-end"),f(s,"tabindex","-1"),f(s,"id","offcanvasAddToDeck"),f(s,"aria-labelledby","offcanvasAddToDeckLabel")},m(q,te){y(q,e,te),y(q,t,te),y(q,s,te),m(s,i),m(s,l),m(s,r);for(let L=0;L<w.length;L+=1)w[L]&&w[L].m(r,null);m(r,o),H&&H.m(r,null),m(r,c);for(let L=0;L<I.length;L+=1)I[L]&&I[L].m(r,null);m(r,u),P&&P.m(r,null),m(r,a),m(r,b),m(r,h),m(r,g),m(g,k),m(k,p),m(k,E),m(k,S),m(S,v),xe(v,n[2]),m(k,_),m(k,T),F||(oe=[D(v,"input",n[9]),D(T,"click",Y(n[10]))],F=!0)},p(q,[te]){if(te&10){ne=de(q[1]);let L;for(L=0;L<ne.length;L+=1){const ce=ct(q,ne,L);w[L]?w[L].p(ce,te):(w[L]=ft(ce),w[L].c(),w[L].m(r,o))}for(;L<w.length;L+=1)w[L].d(1);w.length=ne.length}if(q[1].length>0&&q[0].length>0?H||(H=at(),H.c(),H.m(r,c)):H&&(H.d(1),H=null),te&17){ee=de(q[0]);let L;for(L=0;L<ee.length;L+=1){const ce=ot(q,ee,L);I[L]?I[L].p(ce,te):(I[L]=ut(ce),I[L].c(),I[L].m(r,u))}for(;L<I.length;L+=1)I[L].d(1);I.length=ee.length}q[1].length===0&&q[0].length===0?P||(P=dt(),P.c(),P.m(r,a)):P&&(P.d(1),P=null),te&4&&v.value!==q[2]&&xe(v,q[2])},i:O,o:O,d(q){q&&(A(e),A(t),A(s)),$e(w,q),H&&H.d(),$e(I,q),P&&P.d(),F=!1,De(oe)}}}function An(n,e,t){let{questionId:s}=e,i=[],l=[],r="";qt(()=>{const p=document.getElementById("offcanvasAddToDeck");p.addEventListener("show.bs.offcanvas",E=>{o()}),p.addEventListener("hidden.bs.offcanvas",E=>{t(0,i=[]),t(1,l=[])})});function o(){axios.get("/api/decks/withquestionids").then(function(p){var E=p.data;E.forEach(S=>{S.questions.some(v=>v.id===s)?t(0,i=[...i,{id:S.id,name:S.name}]):t(1,l=[...l,{id:S.id,name:S.name}])})}).catch(function(p){console.log(p),alert(p)})}function c(p){axios.post("/api/decks/"+p+"/addquestion",{question_id:s}).then(function(E){const S=l.find(v=>v.id===p);t(0,i=[...i,S]),t(1,l=l.filter(v=>v.id!==p))}).catch(function(E){alert(E)})}function u(p){axios.post("/api/decks/"+p+"/removequestion",{question_id:s}).then(function(E){const S=i.find(v=>v.id===p);t(1,l=[...l,S]),t(0,i=i.filter(v=>v.id!==p))}).catch(function(E){alert(E)})}function a(){r&&axios.post("/api/decks",{name:r}).then(function(p){const E=p.data;t(1,l=[...l,E]),c(E.id),t(2,r="")}).catch(function(p){alert(p)})}const b=p=>c(p.id),h=p=>u(p.id);function g(){r=this.value,t(2,r)}const k=()=>a();return n.$$set=p=>{"questionId"in p&&t(6,s=p.questionId)},[i,l,r,c,u,a,s,b,h,g,k]}class Cn extends ke{constructor(e){super(),ve(this,e,An,yn,be,{questionId:6})}}function mt(n,e,t){const s=n.slice();return s[21]=e[t],s[22]=e,s[23]=t,s}function qn(n){let e;return{c(){e=d("p"),e.textContent="Loading ..."},m(t,s){y(t,e,s)},p:O,i:O,o:O,d(t){t&&A(e)}}}function Ln(n){let e,t,s,i,l;const r=[Sn,Mn],o=[];function c(a,b){return a[8]?0:1}e=c(n),t=o[e]=r[e](n);let u=!n[1].isAnswered&&!n[3]&&n[0].type!=="card"&&Ct(n);return{c(){t.c(),s=M(),u&&u.c(),i=re()},m(a,b){o[e].m(a,b),y(a,s,b),u&&u.m(a,b),y(a,i,b),l=!0},p(a,b){let h=e;e=c(a),e===h?o[e].p(a,b):(we(),V(o[h],1,1,()=>{o[h]=null}),_e(),t=o[e],t?t.p(a,b):(t=o[e]=r[e](a),t.c()),j(t,1),t.m(s.parentNode,s)),!a[1].isAnswered&&!a[3]&&a[0].type!=="card"?u?u.p(a,b):(u=Ct(a),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},i(a){l||(j(t),l=!0)},o(a){V(t),l=!1},d(a){a&&(A(s),A(i)),o[e].d(a),u&&u.d(a)}}}function Mn(n){let e,t,s,i,l,r,o,c,u,a,b,h,g,k,p,E,S,v,_,T,F,oe,ne,w,H,ee,I,P,q,te,L,ce,Ne,fe,je,Ge,Ke,Je,We=n[0].id,Oe,me,Pe,Xe,Z=n[0].is_invalid&&bt(),x=n[0].needs_review&&_t(),R=n[0].case&&wt(n),G=n[0].text&&pt(n),N=n[0].images&&n[0].images.length>0&&gt(n),J=!n[3]&&n[0].hint&&ht(n);const Ye=[Hn,On,Kn],ae=[];function Ze(C,Q){return C[0].type==="mc"?0:C[0].answers.length===0?1:2}u=Ze(n),a=ae[u]=Ye[u](n);let W=!n[3]&&n[1].isAnswered&&n[0].comment&&vt(n),X=n[1].isAnswered&&n[5]!==-1&&yt(n),se=At(n);return{c(){e=d("div"),Z&&Z.c(),t=M(),x&&x.c(),s=M(),R&&R.c(),i=M(),l=d("div"),G&&G.c(),r=M(),N&&N.c(),o=M(),J&&J.c(),c=M(),a.c(),b=M(),W&&W.c(),h=M(),g=d("div"),k=d("div"),p=d("div"),E=d("button"),E.textContent="More",S=M(),v=d("ul"),X&&X.c(),_=M(),T=d("li"),F=d("a"),oe=d("i"),ne=Ie(" Open in new tab"),H=M(),ee=d("li"),ee.innerHTML='<hr class="dropdown-divider"/>',I=M(),P=d("li"),q=d("button"),q.innerHTML='<i class="bi bi-pencil"></i> Edit question',te=M(),L=d("li"),L.innerHTML='<hr class="dropdown-divider"/>',ce=M(),Ne=d("li"),fe=d("a"),je=d("i"),Ge=Ie(" Open in deck editor"),Je=M(),se.c(),f(l,"class","row border-start border-3 border-dark m-1 mb-3 pt-2"),f(E,"class","btn btn-outline-secondary btn-sm dropdown-toggle"),f(E,"type","button"),f(E,"data-bs-toggle","dropdown"),f(E,"aria-expanded","false"),f(oe,"class","bi bi-box-arrow-up-right"),f(F,"class","dropdown-item btn btn-sm"),f(F,"href",w="/questions/"+n[0].id),f(F,"target","_blank"),f(F,"role","button"),f(q,"type","button"),f(q,"class","dropdown-item btn btn-sm"),f(je,"class","bi bi-collection"),f(fe,"class","dropdown-item btn btn-sm"),f(fe,"href",Ke="/decks/"+n[4]+"/questions/edit?question_id="+n[0].id),f(fe,"role","button"),f(v,"class","dropdown-menu"),f(p,"class","btn-group me-1"),f(k,"class","d-flex justify-content-end"),f(g,"class","row mt-1 mb-1 pt-2"),f(e,"id",Oe="question"+n[0].id)},m(C,Q){y(C,e,Q),Z&&Z.m(e,null),m(e,t),x&&x.m(e,null),m(e,s),R&&R.m(e,null),m(e,i),m(e,l),G&&G.m(l,null),m(l,r),N&&N.m(l,null),m(e,o),J&&J.m(e,null),m(e,c),ae[u].m(e,null),m(e,b),W&&W.m(e,null),m(e,h),m(e,g),m(g,k),m(k,p),m(p,E),m(p,S),m(p,v),X&&X.m(v,null),m(v,_),m(v,T),m(T,F),m(F,oe),m(F,ne),m(v,H),m(v,ee),m(v,I),m(v,P),m(P,q),m(v,te),m(v,L),m(v,ce),m(v,Ne),m(Ne,fe),m(fe,je),m(fe,Ge),m(k,Je),se.m(k,null),me=!0,Pe||(Xe=D(q,"click",Y(n[10])),Pe=!0)},p(C,Q){C[0].is_invalid?Z||(Z=bt(),Z.c(),Z.m(e,t)):Z&&(Z.d(1),Z=null),C[0].needs_review?x||(x=_t(),x.c(),x.m(e,s)):x&&(x.d(1),x=null),C[0].case?R?R.p(C,Q):(R=wt(C),R.c(),R.m(e,i)):R&&(R.d(1),R=null),C[0].text?G?G.p(C,Q):(G=pt(C),G.c(),G.m(l,r)):G&&(G.d(1),G=null),C[0].images&&C[0].images.length>0?N?(N.p(C,Q),Q&1&&j(N,1)):(N=gt(C),N.c(),j(N,1),N.m(l,null)):N&&(we(),V(N,1,1,()=>{N=null}),_e()),!C[3]&&C[0].hint?J?J.p(C,Q):(J=ht(C),J.c(),J.m(e,c)):J&&(J.d(1),J=null);let Qe=u;u=Ze(C),u===Qe?ae[u].p(C,Q):(we(),V(ae[Qe],1,1,()=>{ae[Qe]=null}),_e(),a=ae[u],a?a.p(C,Q):(a=ae[u]=Ye[u](C),a.c()),j(a,1),a.m(e,b)),!C[3]&&C[1].isAnswered&&C[0].comment?W?W.p(C,Q):(W=vt(C),W.c(),W.m(e,h)):W&&(W.d(1),W=null),C[1].isAnswered&&C[5]!==-1?X?X.p(C,Q):(X=yt(C),X.c(),X.m(v,_)):X&&(X.d(1),X=null),(!me||Q&1&&w!==(w="/questions/"+C[0].id))&&f(F,"href",w),(!me||Q&17&&Ke!==(Ke="/decks/"+C[4]+"/questions/edit?question_id="+C[0].id))&&f(fe,"href",Ke),Q&1&&be(We,We=C[0].id)?(we(),V(se,1,1,O),_e(),se=At(C),se.c(),j(se,1),se.m(k,null)):se.p(C,Q),(!me||Q&1&&Oe!==(Oe="question"+C[0].id))&&f(e,"id",Oe)},i(C){me||(j(N),j(a),j(se),me=!0)},o(C){V(N),V(a),V(se),me=!1},d(C){C&&A(e),Z&&Z.d(),x&&x.d(),R&&R.d(),G&&G.d(),N&&N.d(),J&&J.d(),ae[u].d(),W&&W.d(),X&&X.d(),se.d(C),Pe=!1,Xe()}}}function Sn(n){let e,t,s,i;function l(o){n[13](o)}let r={toggleEditor:n[10]};return n[0]!==void 0&&(r.question=n[0]),t=new jt({props:r}),pe.push(()=>ge(t,"question",l)),{c(){e=d("div"),ye(t.$$.fragment),f(e,"class","my-5 pt-1 pb-3 border-dark"),Le(e,"border-top","dotted"),Le(e,"border-bottom","dotted"),Le(e,"border-width","1px")},m(o,c){y(o,e,c),Ae(t,e,null),i=!0},p(o,c){const u={};!s&&c&1&&(s=!0,u.question=o[0],he(()=>s=!1)),t.$set(u)},i(o){i||(j(t.$$.fragment,o),i=!0)},o(o){V(t.$$.fragment,o),i=!1},d(o){o&&A(e),Ce(t)}}}function bt(n){let e;return{c(){e=d("div"),e.innerHTML='<div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-cone-striped"></i> <strong>Question is marked invalid</strong> and safe to skip!</div></div>',f(e,"class","row")},m(t,s){y(t,e,s)},d(t){t&&A(e)}}}function _t(n){let e;return{c(){e=d("div"),e.innerHTML='<div class="col"><div class="alert alert-light" role="alert"><i class="bi bi-eraser-fill"></i> <strong>Question needs review</strong> - Please review the question and answer choices and make sure they are correct and clear. Afterwards, remove the &quot;Needs review&quot; flag.</div></div>',f(e,"class","row")},m(t,s){y(t,e,s)},d(t){t&&A(e)}}}function wt(n){let e,t,s,i,l=B.sanitize(n[0].case.text)+"";return{c(){e=d("div"),t=d("p"),t.innerHTML='<i class="bi bi-clipboard2-pulse"></i> CASE',s=M(),i=d("p"),f(t,"class","small fw-bold"),f(e,"class","alert alert-light"),f(e,"role","alert")},m(r,o){y(r,e,o),m(e,t),m(e,s),m(e,i),i.innerHTML=l},p(r,o){o&1&&l!==(l=B.sanitize(r[0].case.text)+"")&&(i.innerHTML=l)},d(r){r&&A(e)}}}function pt(n){let e,t,s=B.sanitize(n[0].text)+"";return{c(){e=d("div"),t=d("p"),f(t,"id","questionText"),f(e,"class","col-lg")},m(i,l){y(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=B.sanitize(i[0].text)+"")&&(t.innerHTML=s)},d(i){i&&A(e)}}}function gt(n){let e,t,s;function i(r){n[14](r)}let l={};return n[0].images!==void 0&&(l.images=n[0].images),e=new vn({props:l}),pe.push(()=>ge(e,"images",i)),{c(){ye(e.$$.fragment)},m(r,o){Ae(e,r,o),s=!0},p(r,o){const c={};!t&&o&1&&(t=!0,c.images=r[0].images,he(()=>t=!1)),e.$set(c)},i(r){s||(j(e.$$.fragment,r),s=!0)},o(r){V(e.$$.fragment,r),s=!1},d(r){Ce(e,r)}}}function ht(n){let e;function t(l,r){return l[9]?Tn:En}let s=t(n),i=s(n);return{c(){i.c(),e=re()},m(l,r){i.m(l,r),y(l,e,r)},p(l,r){s===(s=t(l))&&i?i.p(l,r):(i.d(1),i=s(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){l&&A(e),i.d(l)}}}function En(n){let e,t,s;return{c(){e=d("button"),e.innerHTML='<i class="bi bi-question"></i> Show hint',f(e,"type","button"),f(e,"class","btn btn-outline-secondary btn-sm mb-3")},m(i,l){y(i,e,l),t||(s=D(e,"click",Y(n[15])),t=!0)},p:O,d(i){i&&A(e),t=!1,s()}}}function Tn(n){let e,t,s=B.sanitize(n[0].hint)+"";return{c(){e=d("div"),t=d("p"),f(e,"class","row border-start border-3 border-secondary-subtle m-1 mt-3 mb-3")},m(i,l){y(i,e,l),m(e,t),t.innerHTML=s},p(i,l){l&1&&s!==(s=B.sanitize(i[0].hint)+"")&&(t.innerHTML=s)},d(i){i&&A(e)}}}function Kn(n){let e,t,s;function i(r){n[19](r)}let l={submitAnswer:n[6],hasAnswer:!!n[5]};return n[0].answers[0]!==void 0&&(l.answer=n[0].answers[0]),e=new mn({props:l}),pe.push(()=>ge(e,"answer",i)),{c(){ye(e.$$.fragment)},m(r,o){Ae(e,r,o),s=!0},p(r,o){const c={};o&64&&(c.submitAnswer=r[6]),o&32&&(c.hasAnswer=!!r[5]),!t&&o&1&&(t=!0,c.answer=r[0].answers[0],he(()=>t=!1)),e.$set(c)},i(r){s||(j(e.$$.fragment,r),s=!0)},o(r){V(e.$$.fragment,r),s=!1},d(r){Ce(e,r)}}}function On(n){let e,t;return e=new wn({props:{submitAnswer:n[6],hasAnswer:!!n[5]}}),{c(){ye(e.$$.fragment)},m(s,i){Ae(e,s,i),t=!0},p(s,i){const l={};i&64&&(l.submitAnswer=s[6]),i&32&&(l.hasAnswer=!!s[5]),e.$set(l)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){Ce(e,s)}}}function Hn(n){let e=[],t=new Map,s,i,l=de(n[0].answers);const r=o=>o[21].id;for(let o=0;o<l.length;o+=1){let c=mt(n,l,o),u=r(c);t.set(u,e[o]=kt(u,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();s=re()},m(o,c){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(o,c);y(o,s,c),i=!0},p(o,c){c&75&&(l=de(o[0].answers),we(),e=Mt(e,c,r,1,o,l,t,s.parentNode,It,kt,s,mt),_e())},i(o){if(!i){for(let c=0;c<l.length;c+=1)j(e[c]);i=!0}},o(o){for(let c=0;c<e.length;c+=1)V(e[c]);i=!1},d(o){o&&A(s);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function kt(n,e){let t,s,i,l,r,o;function c(h){e[16](h,e[21],e[22],e[23])}function u(h){e[17](h,e[21])}function a(h){e[18](h)}let b={submitAnswer:e[6],questionIsAnswered:e[1].isAnswered,answerNumber:e[23]+1};return e[21]!==void 0&&(b.answer=e[21]),e[1].answerContext[e[21].id]!==void 0&&(b.answerContext=e[1].answerContext[e[21].id]),e[3]!==void 0&&(b.examMode=e[3]),s=new cn({props:b}),pe.push(()=>ge(s,"answer",c)),pe.push(()=>ge(s,"answerContext",u)),pe.push(()=>ge(s,"examMode",a)),{key:n,first:null,c(){t=re(),ye(s.$$.fragment),this.first=t},m(h,g){y(h,t,g),Ae(s,h,g),o=!0},p(h,g){e=h;const k={};g&64&&(k.submitAnswer=e[6]),g&2&&(k.questionIsAnswered=e[1].isAnswered),g&1&&(k.answerNumber=e[23]+1),!i&&g&1&&(i=!0,k.answer=e[21],he(()=>i=!1)),!l&&g&3&&(l=!0,k.answerContext=e[1].answerContext[e[21].id],he(()=>l=!1)),!r&&g&8&&(r=!0,k.examMode=e[3],he(()=>r=!1)),s.$set(k)},i(h){o||(j(s.$$.fragment,h),o=!0)},o(h){V(s.$$.fragment,h),o=!1},d(h){h&&A(t),Ce(s,h)}}}function vt(n){let e,t,s,i=B.sanitize(n[0].comment)+"";return{c(){e=d("div"),t=d("div"),s=d("div"),f(s,"class","alert alert-light"),f(s,"role","alert"),f(t,"class","col"),f(e,"class","row")},m(l,r){y(l,e,r),m(e,t),m(t,s),s.innerHTML=i},p(l,r){r&1&&i!==(i=B.sanitize(l[0].comment)+"")&&(s.innerHTML=i)},d(l){l&&A(e)}}}function yt(n){let e,t,s,i;return{c(){e=d("li"),t=d("button"),t.innerHTML='<i class="bi bi-arrow-counterclockwise"></i> Reset answer',f(t,"type","button"),f(t,"class","dropdown-item btn btn-sm")},m(l,r){y(l,e,r),m(e,t),s||(i=D(t,"click",Y(function(){Ht(n[7])&&n[7].apply(this,arguments)})),s=!0)},p(l,r){n=l},d(l){l&&A(e),s=!1,i()}}}function At(n){let e,t;return e=new Cn({props:{questionId:n[0].id}}),{c(){ye(e.$$.fragment)},m(s,i){Ae(e,s,i),t=!0},p(s,i){const l={};i&1&&(l.questionId=s[0].id),e.$set(l)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){Ce(e,s)}}}function Ct(n){let e,t,s,i;return{c(){e=d("div"),t=d("button"),t.textContent="→ Show answer",f(t,"type","button"),f(t,"class","btn btn-outline-secondary btn-sm"),f(e,"class","mt-3")},m(l,r){y(l,e,r),m(e,t),s||(i=D(t,"click",Y(n[20])),s=!0)},p:O,d(l){l&&A(e),s=!1,i()}}}function zn(n){let e,t,s,i;const l=[Ln,qn],r=[];function o(c,u){return c[0]?0:1}return e=o(n),t=r[e]=l[e](n),{c(){t.c(),s=re()},m(c,u){r[e].m(c,u),y(c,s,u),i=!0},p(c,[u]){let a=e;e=o(c),e===a?r[e].p(c,u):(we(),V(r[a],1,1,()=>{r[a]=null}),_e(),t=r[e],t?t.p(c,u):(t=r[e]=l[e](c),t.c()),j(t,1),t.m(s.parentNode,s))},i(c){i||(j(t),i=!0)},o(c){V(t),i=!1},d(c){c&&A(s),r[e].d(c)}}}function In(n){const e=n.target;!e.classList.contains("bg-danger-subtle")&&!e.classList.contains("bg-warning-subtle")&&!e.classList.contains("bg-success-subtle")?e.classList.add("bg-success-subtle"):e.classList.contains("bg-success-subtle")?(e.classList.remove("bg-success-subtle"),e.classList.add("bg-danger-subtle")):e.classList.contains("bg-danger-subtle")?(e.classList.remove("bg-danger-subtle"),e.classList.add("bg-warning-subtle")):e.classList.contains("bg-warning-subtle")&&e.classList.remove("bg-warning-subtle")}function Dn(n,e,t){let{deckId:s}=e,{question:i}=e,{questionContext:l}=e,{helpUsed:r}=e,{answerChoice:o}=e,{submitAnswer:c}=e,{deleteAnswer:u}=e,{examMode:a}=e,{updateCurrentQuestionData:b}=e,{settingsShuffleAnswers:h}=e;var g=!1,k=l.isAnswered;function p(){const w=!g;w&&b?b().then(()=>{t(8,g=w)}):t(8,g=w)}function E(w){i=w,t(0,i),t(12,h),t(1,l)}function S(w){n.$$.not_equal(i.images,w)&&(i.images=w,t(0,i),t(12,h),t(1,l))}const v=()=>{t(9,k=!0),t(2,r=!0)};function _(w,H,ee,I){ee[I]=w,t(0,i),t(12,h),t(1,l)}function T(w,H){n.$$.not_equal(l.answerContext[H.id],w)&&(l.answerContext[H.id]=w,t(1,l))}function F(w){a=w,t(3,a)}function oe(w){n.$$.not_equal(i.answers[0],w)&&(i.answers[0]=w,t(0,i),t(12,h),t(1,l))}const ne=()=>c();return n.$$set=w=>{"deckId"in w&&t(4,s=w.deckId),"question"in w&&t(0,i=w.question),"questionContext"in w&&t(1,l=w.questionContext),"helpUsed"in w&&t(2,r=w.helpUsed),"answerChoice"in w&&t(5,o=w.answerChoice),"submitAnswer"in w&&t(6,c=w.submitAnswer),"deleteAnswer"in w&&t(7,u=w.deleteAnswer),"examMode"in w&&t(3,a=w.examMode),"updateCurrentQuestionData"in w&&t(11,b=w.updateCurrentQuestionData),"settingsShuffleAnswers"in w&&t(12,h=w.settingsShuffleAnswers)},n.$$.update=()=>{n.$$.dirty&4099&&(i.answers.forEach((w,H)=>{w.badgeText="ABCDEFGHIJKLMN".charAt(H)}),i&&i.type==="mc"&&h&&!l.isAnswered&&!Object.values(l.answerContext).some(w=>w.isSelectedAnswer)&&t(0,i.answers=Nt.shuffle(i.answers),i)),n.$$.dirty&3&&(t(9,k=l.isAnswered),t(2,r=l.isAnswered)),n.$$.dirty&1&&(()=>{var w=document.querySelectorAll("#questionText li");[].map.call(w,function(H){H.addEventListener("click",In,!1)})})()},[i,l,r,a,s,o,c,u,g,k,p,b,h,E,S,v,_,T,F,oe,ne]}class Vn extends ke{constructor(e){super(),ve(this,e,Dn,zn,be,{deckId:4,question:0,questionContext:1,helpUsed:2,answerChoice:5,submitAnswer:6,deleteAnswer:7,examMode:3,updateCurrentQuestionData:11,settingsShuffleAnswers:12})}}export{Vn as S,$ as h};
